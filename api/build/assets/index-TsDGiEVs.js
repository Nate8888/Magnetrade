(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function H0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q0={exports:{}},Fu={},W0={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=Symbol.for("react.element"),BT=Symbol.for("react.portal"),UT=Symbol.for("react.fragment"),jT=Symbol.for("react.strict_mode"),HT=Symbol.for("react.profiler"),qT=Symbol.for("react.provider"),WT=Symbol.for("react.context"),GT=Symbol.for("react.forward_ref"),KT=Symbol.for("react.suspense"),QT=Symbol.for("react.memo"),YT=Symbol.for("react.lazy"),bm=Symbol.iterator;function XT(e){return e===null||typeof e!="object"?null:(e=bm&&e[bm]||e["@@iterator"],typeof e=="function"?e:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K0=Object.assign,Q0={};function Rs(e,t,n){this.props=e,this.context=t,this.refs=Q0,this.updater=n||G0}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y0(){}Y0.prototype=Rs.prototype;function Id(e,t,n){this.props=e,this.context=t,this.refs=Q0,this.updater=n||G0}var Ad=Id.prototype=new Y0;Ad.constructor=Id;K0(Ad,Rs.prototype);Ad.isPureReactComponent=!0;var zm=Array.isArray,X0=Object.prototype.hasOwnProperty,Cd={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function J0(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)X0.call(t,r)&&!Z0.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:va,type:e,key:s,ref:o,props:i,_owner:Cd.current}}function ZT(e,t){return{$$typeof:va,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rd(e){return typeof e=="object"&&e!==null&&e.$$typeof===va}function JT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bm=/\/+/g;function zc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?JT(""+e.key):t.toString(36)}function Sl(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case va:case BT:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+zc(o,0):r,zm(i)?(n="",e!=null&&(n=e.replace(Bm,"$&/")+"/"),Sl(i,t,n,"",function(u){return u})):i!=null&&(Rd(i)&&(i=ZT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bm,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",zm(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+zc(s,a);o+=Sl(s,t,n,l,i)}else if(l=XT(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+zc(s,a++),o+=Sl(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ba(e,t,n){if(e==null)return e;var r=[],i=0;return Sl(e,r,"","",function(s){return t.call(n,s,i++)}),r}function ex(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},Tl={transition:null},tx={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Tl,ReactCurrentOwner:Cd};ge.Children={map:Ba,forEach:function(e,t,n){Ba(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ba(e,function(){t++}),t},toArray:function(e){return Ba(e,function(t){return t})||[]},only:function(e){if(!Rd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Rs;ge.Fragment=UT;ge.Profiler=HT;ge.PureComponent=Id;ge.StrictMode=jT;ge.Suspense=KT;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tx;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=K0({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Cd.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)X0.call(t,l)&&!Z0.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:va,type:e.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(e){return e={$$typeof:WT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qT,_context:e},e.Consumer=e};ge.createElement=J0;ge.createFactory=function(e){var t=J0.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:GT,render:e}};ge.isValidElement=Rd;ge.lazy=function(e){return{$$typeof:YT,_payload:{_status:-1,_result:e},_init:ex}};ge.memo=function(e,t){return{$$typeof:QT,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Tl.transition;Tl.transition={};try{e()}finally{Tl.transition=t}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(e,t){return Ct.current.useCallback(e,t)};ge.useContext=function(e){return Ct.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};ge.useEffect=function(e,t){return Ct.current.useEffect(e,t)};ge.useId=function(){return Ct.current.useId()};ge.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return Ct.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};ge.useRef=function(e){return Ct.current.useRef(e)};ge.useState=function(e){return Ct.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return Ct.current.useTransition()};ge.version="18.2.0";W0.exports=ge;var P=W0.exports;const V=H0(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx=P,rx=Symbol.for("react.element"),ix=Symbol.for("react.fragment"),sx=Object.prototype.hasOwnProperty,ox=nx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ax={key:!0,ref:!0,__self:!0,__source:!0};function ev(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)sx.call(t,r)&&!ax.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:rx,type:e,key:s,ref:o,props:i,_owner:ox.current}}Fu.Fragment=ix;Fu.jsx=ev;Fu.jsxs=ev;q0.exports=Fu;var H=q0.exports,bh={},tv={exports:{}},Ht={},nv={exports:{}},rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(x,S){var C=x.length;x.push(S);e:for(;0<C;){var M=C-1>>>1,U=x[M];if(0<i(U,S))x[M]=S,x[C]=U,C=M;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var S=x[0],C=x.pop();if(C!==S){x[0]=C;e:for(var M=0,U=x.length,Y=U>>>1;M<Y;){var Q=2*(M+1)-1,se=x[Q],he=Q+1,pe=x[he];if(0>i(se,C))he<U&&0>i(pe,se)?(x[M]=pe,x[he]=C,M=he):(x[M]=se,x[Q]=C,M=Q);else if(he<U&&0>i(pe,C))x[M]=pe,x[he]=C,M=he;else break e}}return S}function i(x,S){var C=x.sortIndex-S.sortIndex;return C!==0?C:x.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(x){for(var S=n(u);S!==null;){if(S.callback===null)r(u);else if(S.startTime<=x)r(u),S.sortIndex=S.expirationTime,t(l,S);else break;S=n(u)}}function _(x){if(y=!1,g(x),!v)if(n(l)!==null)v=!0,k(T);else{var S=n(u);S!==null&&b(_,S.startTime-x)}}function T(x,S){v=!1,y&&(y=!1,p(R),R=-1),d=!0;var C=f;try{for(g(S),h=n(l);h!==null&&(!(h.expirationTime>S)||x&&!B());){var M=h.callback;if(typeof M=="function"){h.callback=null,f=h.priorityLevel;var U=M(h.expirationTime<=S);S=e.unstable_now(),typeof U=="function"?h.callback=U:h===n(l)&&r(l),g(S)}else r(l);h=n(l)}if(h!==null)var Y=!0;else{var Q=n(u);Q!==null&&b(_,Q.startTime-S),Y=!1}return Y}finally{h=null,f=C,d=!1}}var I=!1,A=null,R=-1,$=5,O=-1;function B(){return!(e.unstable_now()-O<$)}function q(){if(A!==null){var x=e.unstable_now();O=x;var S=!0;try{S=A(!0,x)}finally{S?D():(I=!1,A=null)}}else I=!1}var D;if(typeof m=="function")D=function(){m(q)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,N=E.port2;E.port1.onmessage=q,D=function(){N.postMessage(null)}}else D=function(){w(q,0)};function k(x){A=x,I||(I=!0,D())}function b(x,S){R=w(function(){x(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){v||d||(v=!0,k(T))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(x){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var C=f;f=S;try{return x()}finally{f=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,S){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var C=f;f=x;try{return S()}finally{f=C}},e.unstable_scheduleCallback=function(x,S,C){var M=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?M+C:M):C=M,x){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=C+U,x={id:c++,callback:S,priorityLevel:x,startTime:C,expirationTime:U,sortIndex:-1},C>M?(x.sortIndex=C,t(u,x),n(l)===null&&x===n(u)&&(y?(p(R),R=-1):y=!0,b(_,C-M))):(x.sortIndex=U,t(l,x),v||d||(v=!0,k(T))),x},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(x){var S=f;return function(){var C=f;f=S;try{return x.apply(this,arguments)}finally{f=C}}}})(rv);nv.exports=rv;var lx=nv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=P,Bt=lx;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sv=new Set,Do={};function vi(e,t){ls(e,t),ls(e+"Capture",t)}function ls(e,t){for(Do[e]=t,e=0;e<t.length;e++)sv.add(t[e])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=Object.prototype.hasOwnProperty,ux=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Um={},jm={};function cx(e){return zh.call(jm,e)?!0:zh.call(Um,e)?!1:ux.test(e)?jm[e]=!0:(Um[e]=!0,!1)}function hx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fx(e,t,n,r){if(t===null||typeof t>"u"||hx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rt(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new Rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new Rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new Rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new Rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new Rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new Rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ct[e]=new Rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ct[e]=new Rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ct[e]=new Rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var kd=/[\-:]([a-z])/g;function Pd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kd,Pd);ct[t]=new Rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kd,Pd);ct[t]=new Rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kd,Pd);ct[t]=new Rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new Rt(e,1,!1,e.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ct[e]=new Rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nd(e,t,n,r){var i=ct.hasOwnProperty(t)?ct[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fx(t,n,i,r)&&(n=null),r||i===null?cx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var er=iv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ua=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),$i=Symbol.for("react.fragment"),Dd=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),ov=Symbol.for("react.provider"),av=Symbol.for("react.context"),Vd=Symbol.for("react.forward_ref"),Uh=Symbol.for("react.suspense"),jh=Symbol.for("react.suspense_list"),Md=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),lv=Symbol.for("react.offscreen"),Hm=Symbol.iterator;function Us(e){return e===null||typeof e!="object"?null:(e=Hm&&e[Hm]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Bc;function so(e){if(Bc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bc=t&&t[1]||""}return`
`+Bc+e}var Uc=!1;function jc(e,t){if(!e||Uc)return"";Uc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?so(e):""}function dx(e){switch(e.tag){case 5:return so(e.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 2:case 15:return e=jc(e.type,!1),e;case 11:return e=jc(e.type.render,!1),e;case 1:return e=jc(e.type,!0),e;default:return""}}function Hh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $i:return"Fragment";case Mi:return"Portal";case Bh:return"Profiler";case Dd:return"StrictMode";case Uh:return"Suspense";case jh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case av:return(e.displayName||"Context")+".Consumer";case ov:return(e._context.displayName||"Context")+".Provider";case Vd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Md:return t=e.displayName||null,t!==null?t:Hh(e.type)||"Memo";case ir:t=e._payload,e=e._init;try{return Hh(e(t))}catch{}}return null}function px(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hh(t);case 8:return t===Dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mx(e){var t=uv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ja(e){e._valueTracker||(e._valueTracker=mx(e))}function cv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=uv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qh(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Rr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hv(e,t){t=t.checked,t!=null&&Nd(e,"checked",t,!1)}function Wh(e,t){hv(e,t);var n=Rr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gh(e,t.type,Rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gh(e,t,n){(t!=="number"||Ul(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oo=Array.isArray;function Ki(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Rr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Kh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(j(92));if(oo(n)){if(1<n.length)throw Error(j(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rr(n)}}function fv(e,t){var n=Rr(t.value),r=Rr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Km(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ha,pv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ha=Ha||document.createElement("div"),Ha.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ha.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gx=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(e){gx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vo[t]=vo[e]})});function mv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vo.hasOwnProperty(e)&&vo[e]?(""+t).trim():t+"px"}function gv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var yx=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yh(e,t){if(t){if(yx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function Xh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zh=null;function $d(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jh=null,Qi=null,Yi=null;function Qm(e){if(e=Ea(e)){if(typeof Jh!="function")throw Error(j(280));var t=e.stateNode;t&&(t=ju(t),Jh(e.stateNode,e.type,t))}}function yv(e){Qi?Yi?Yi.push(e):Yi=[e]:Qi=e}function vv(){if(Qi){var e=Qi,t=Yi;if(Yi=Qi=null,Qm(e),t)for(e=0;e<t.length;e++)Qm(t[e])}}function _v(e,t){return e(t)}function wv(){}var Hc=!1;function Ev(e,t,n){if(Hc)return e(t,n);Hc=!0;try{return _v(e,t,n)}finally{Hc=!1,(Qi!==null||Yi!==null)&&(wv(),vv())}}function Mo(e,t){var n=e.stateNode;if(n===null)return null;var r=ju(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var ef=!1;if(qn)try{var js={};Object.defineProperty(js,"passive",{get:function(){ef=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{ef=!1}function vx(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var _o=!1,jl=null,Hl=!1,tf=null,_x={onError:function(e){_o=!0,jl=e}};function wx(e,t,n,r,i,s,o,a,l){_o=!1,jl=null,vx.apply(_x,arguments)}function Ex(e,t,n,r,i,s,o,a,l){if(wx.apply(this,arguments),_o){if(_o){var u=jl;_o=!1,jl=null}else throw Error(j(198));Hl||(Hl=!0,tf=u)}}function _i(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Sv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ym(e){if(_i(e)!==e)throw Error(j(188))}function Sx(e){var t=e.alternate;if(!t){if(t=_i(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ym(i),e;if(s===r)return Ym(i),t;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function Tv(e){return e=Sx(e),e!==null?xv(e):null}function xv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xv(e);if(t!==null)return t;e=e.sibling}return null}var Iv=Bt.unstable_scheduleCallback,Xm=Bt.unstable_cancelCallback,Tx=Bt.unstable_shouldYield,xx=Bt.unstable_requestPaint,Ue=Bt.unstable_now,Ix=Bt.unstable_getCurrentPriorityLevel,Od=Bt.unstable_ImmediatePriority,Av=Bt.unstable_UserBlockingPriority,ql=Bt.unstable_NormalPriority,Ax=Bt.unstable_LowPriority,Cv=Bt.unstable_IdlePriority,bu=null,Cn=null;function Cx(e){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(bu,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Px,Rx=Math.log,kx=Math.LN2;function Px(e){return e>>>=0,e===0?32:31-(Rx(e)/kx|0)|0}var qa=64,Wa=4194304;function ao(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ao(a):(s&=o,s!==0&&(r=ao(s)))}else o=n&~i,o!==0?r=ao(o):s!==0&&(r=ao(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hn(t),i=1<<n,r|=e[n],t&=~i;return r}function Nx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-hn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Nx(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function nf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rv(){var e=qa;return qa<<=1,!(qa&4194240)&&(qa=64),e}function qc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _a(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hn(t),e[t]=n}function Vx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ld(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Te=0;function kv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pv,Fd,Nv,Dv,Vv,rf=!1,Ga=[],pr=null,mr=null,gr=null,$o=new Map,Oo=new Map,lr=[],Mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zm(e,t){switch(e){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":$o.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(t.pointerId)}}function Hs(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ea(t),t!==null&&Fd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $x(e,t,n,r,i){switch(t){case"focusin":return pr=Hs(pr,e,t,n,r,i),!0;case"dragenter":return mr=Hs(mr,e,t,n,r,i),!0;case"mouseover":return gr=Hs(gr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return $o.set(s,Hs($o.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Oo.set(s,Hs(Oo.get(s)||null,e,t,n,r,i)),!0}return!1}function Mv(e){var t=Gr(e.target);if(t!==null){var n=_i(t);if(n!==null){if(t=n.tag,t===13){if(t=Sv(n),t!==null){e.blockedOn=t,Vv(e.priority,function(){Nv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=sf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Zh=r,n.target.dispatchEvent(r),Zh=null}else return t=Ea(n),t!==null&&Fd(t),e.blockedOn=n,!1;t.shift()}return!0}function Jm(e,t,n){xl(e)&&n.delete(t)}function Ox(){rf=!1,pr!==null&&xl(pr)&&(pr=null),mr!==null&&xl(mr)&&(mr=null),gr!==null&&xl(gr)&&(gr=null),$o.forEach(Jm),Oo.forEach(Jm)}function qs(e,t){e.blockedOn===t&&(e.blockedOn=null,rf||(rf=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,Ox)))}function Lo(e){function t(i){return qs(i,e)}if(0<Ga.length){qs(Ga[0],e);for(var n=1;n<Ga.length;n++){var r=Ga[n];r.blockedOn===e&&(r.blockedOn=null)}}for(pr!==null&&qs(pr,e),mr!==null&&qs(mr,e),gr!==null&&qs(gr,e),$o.forEach(t),Oo.forEach(t),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Mv(n),n.blockedOn===null&&lr.shift()}var Xi=er.ReactCurrentBatchConfig,Gl=!0;function Lx(e,t,n,r){var i=Te,s=Xi.transition;Xi.transition=null;try{Te=1,bd(e,t,n,r)}finally{Te=i,Xi.transition=s}}function Fx(e,t,n,r){var i=Te,s=Xi.transition;Xi.transition=null;try{Te=4,bd(e,t,n,r)}finally{Te=i,Xi.transition=s}}function bd(e,t,n,r){if(Gl){var i=sf(e,t,n,r);if(i===null)th(e,t,r,Kl,n),Zm(e,r);else if($x(i,e,t,n,r))r.stopPropagation();else if(Zm(e,r),t&4&&-1<Mx.indexOf(e)){for(;i!==null;){var s=Ea(i);if(s!==null&&Pv(s),s=sf(e,t,n,r),s===null&&th(e,t,r,Kl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else th(e,t,r,null,n)}}var Kl=null;function sf(e,t,n,r){if(Kl=null,e=$d(r),e=Gr(e),e!==null)if(t=_i(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Sv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kl=e,null}function $v(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ix()){case Od:return 1;case Av:return 4;case ql:case Ax:return 16;case Cv:return 536870912;default:return 16}default:return 16}}var hr=null,zd=null,Il=null;function Ov(){if(Il)return Il;var e,t=zd,n=t.length,r,i="value"in hr?hr.value:hr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Il=i.slice(e,1<r?1-r:void 0)}function Al(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ka(){return!0}function eg(){return!1}function qt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ka:eg,this.isPropagationStopped=eg,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),t}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=qt(ks),wa=Le({},ks,{view:0,detail:0}),bx=qt(wa),Wc,Gc,Ws,zu=Le({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ud,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ws&&(Ws&&e.type==="mousemove"?(Wc=e.screenX-Ws.screenX,Gc=e.screenY-Ws.screenY):Gc=Wc=0,Ws=e),Wc)},movementY:function(e){return"movementY"in e?e.movementY:Gc}}),tg=qt(zu),zx=Le({},zu,{dataTransfer:0}),Bx=qt(zx),Ux=Le({},wa,{relatedTarget:0}),Kc=qt(Ux),jx=Le({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Hx=qt(jx),qx=Le({},ks,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wx=qt(qx),Gx=Le({},ks,{data:0}),ng=qt(Gx),Kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yx[e])?!!t[e]:!1}function Ud(){return Xx}var Zx=Le({},wa,{key:function(e){if(e.key){var t=Kx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ud,charCode:function(e){return e.type==="keypress"?Al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jx=qt(Zx),eI=Le({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rg=qt(eI),tI=Le({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ud}),nI=qt(tI),rI=Le({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),iI=qt(rI),sI=Le({},zu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oI=qt(sI),aI=[9,13,27,32],jd=qn&&"CompositionEvent"in window,wo=null;qn&&"documentMode"in document&&(wo=document.documentMode);var lI=qn&&"TextEvent"in window&&!wo,Lv=qn&&(!jd||wo&&8<wo&&11>=wo),ig=" ",sg=!1;function Fv(e,t){switch(e){case"keyup":return aI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function uI(e,t){switch(e){case"compositionend":return bv(t);case"keypress":return t.which!==32?null:(sg=!0,ig);case"textInput":return e=t.data,e===ig&&sg?null:e;default:return null}}function cI(e,t){if(Oi)return e==="compositionend"||!jd&&Fv(e,t)?(e=Ov(),Il=zd=hr=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lv&&t.locale!=="ko"?null:t.data;default:return null}}var hI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function og(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hI[e.type]:t==="textarea"}function zv(e,t,n,r){yv(r),t=Ql(t,"onChange"),0<t.length&&(n=new Bd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eo=null,Fo=null;function fI(e){Xv(e,0)}function Bu(e){var t=bi(e);if(cv(t))return e}function dI(e,t){if(e==="change")return t}var Bv=!1;if(qn){var Qc;if(qn){var Yc="oninput"in document;if(!Yc){var ag=document.createElement("div");ag.setAttribute("oninput","return;"),Yc=typeof ag.oninput=="function"}Qc=Yc}else Qc=!1;Bv=Qc&&(!document.documentMode||9<document.documentMode)}function lg(){Eo&&(Eo.detachEvent("onpropertychange",Uv),Fo=Eo=null)}function Uv(e){if(e.propertyName==="value"&&Bu(Fo)){var t=[];zv(t,Fo,e,$d(e)),Ev(fI,t)}}function pI(e,t,n){e==="focusin"?(lg(),Eo=t,Fo=n,Eo.attachEvent("onpropertychange",Uv)):e==="focusout"&&lg()}function mI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bu(Fo)}function gI(e,t){if(e==="click")return Bu(t)}function yI(e,t){if(e==="input"||e==="change")return Bu(t)}function vI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:vI;function bo(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zh.call(t,i)||!pn(e[i],t[i]))return!1}return!0}function ug(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cg(e,t){var n=ug(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ug(n)}}function jv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hv(){for(var e=window,t=Ul();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ul(e.document)}return t}function Hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _I(e){var t=Hv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&jv(n.ownerDocument.documentElement,n)){if(r!==null&&Hd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cg(n,s);var o=cg(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wI=qn&&"documentMode"in document&&11>=document.documentMode,Li=null,of=null,So=null,af=!1;function hg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;af||Li==null||Li!==Ul(r)||(r=Li,"selectionStart"in r&&Hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),So&&bo(So,r)||(So=r,r=Ql(of,"onSelect"),0<r.length&&(t=new Bd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Li)))}function Qa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fi={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Xc={},qv={};qn&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function Uu(e){if(Xc[e])return Xc[e];if(!Fi[e])return e;var t=Fi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qv)return Xc[e]=t[n];return e}var Wv=Uu("animationend"),Gv=Uu("animationiteration"),Kv=Uu("animationstart"),Qv=Uu("transitionend"),Yv=new Map,fg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(e,t){Yv.set(e,t),vi(t,[e])}for(var Zc=0;Zc<fg.length;Zc++){var Jc=fg[Zc],EI=Jc.toLowerCase(),SI=Jc[0].toUpperCase()+Jc.slice(1);Vr(EI,"on"+SI)}Vr(Wv,"onAnimationEnd");Vr(Gv,"onAnimationIteration");Vr(Kv,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(Qv,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TI=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function dg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ex(r,t,void 0,e),e.currentTarget=null}function Xv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;dg(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;dg(i,a,u),s=l}}}if(Hl)throw e=tf,Hl=!1,tf=null,e}function ke(e,t){var n=t[ff];n===void 0&&(n=t[ff]=new Set);var r=e+"__bubble";n.has(r)||(Zv(t,e,2,!1),n.add(r))}function eh(e,t,n){var r=0;t&&(r|=4),Zv(n,e,r,t)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function zo(e){if(!e[Ya]){e[Ya]=!0,sv.forEach(function(n){n!=="selectionchange"&&(TI.has(n)||eh(n,!1,e),eh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ya]||(t[Ya]=!0,eh("selectionchange",!1,t))}}function Zv(e,t,n,r){switch($v(t)){case 1:var i=Lx;break;case 4:i=Fx;break;default:i=bd}n=i.bind(null,t,n,e),i=void 0,!ef||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function th(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ev(function(){var u=s,c=$d(n),h=[];e:{var f=Yv.get(e);if(f!==void 0){var d=Bd,v=e;switch(e){case"keypress":if(Al(n)===0)break e;case"keydown":case"keyup":d=Jx;break;case"focusin":v="focus",d=Kc;break;case"focusout":v="blur",d=Kc;break;case"beforeblur":case"afterblur":d=Kc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=tg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=nI;break;case Wv:case Gv:case Kv:d=Hx;break;case Qv:d=iI;break;case"scroll":d=bx;break;case"wheel":d=oI;break;case"copy":case"cut":case"paste":d=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=rg}var y=(t&4)!==0,w=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var m=u,g;m!==null;){g=m;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,p!==null&&(_=Mo(m,p),_!=null&&y.push(Bo(m,_,g)))),w)break;m=m.return}0<y.length&&(f=new d(f,v,null,n,c),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",f&&n!==Zh&&(v=n.relatedTarget||n.fromElement)&&(Gr(v)||v[Wn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=u,v=v?Gr(v):null,v!==null&&(w=_i(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(y=tg,_="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=rg,_="onPointerLeave",p="onPointerEnter",m="pointer"),w=d==null?f:bi(d),g=v==null?f:bi(v),f=new y(_,m+"leave",d,n,c),f.target=w,f.relatedTarget=g,_=null,Gr(c)===u&&(y=new y(p,m+"enter",v,n,c),y.target=g,y.relatedTarget=w,_=y),w=_,d&&v)t:{for(y=d,p=v,m=0,g=y;g;g=Ii(g))m++;for(g=0,_=p;_;_=Ii(_))g++;for(;0<m-g;)y=Ii(y),m--;for(;0<g-m;)p=Ii(p),g--;for(;m--;){if(y===p||p!==null&&y===p.alternate)break t;y=Ii(y),p=Ii(p)}y=null}else y=null;d!==null&&pg(h,f,d,y,!1),v!==null&&w!==null&&pg(h,w,v,y,!0)}}e:{if(f=u?bi(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var T=dI;else if(og(f))if(Bv)T=yI;else{T=mI;var I=pI}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=gI);if(T&&(T=T(e,u))){zv(h,T,n,c);break e}I&&I(e,f,u),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Gh(f,"number",f.value)}switch(I=u?bi(u):window,e){case"focusin":(og(I)||I.contentEditable==="true")&&(Li=I,of=u,So=null);break;case"focusout":So=of=Li=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,hg(h,n,c);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":hg(h,n,c)}var A;if(jd)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Oi?Fv(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Lv&&n.locale!=="ko"&&(Oi||R!=="onCompositionStart"?R==="onCompositionEnd"&&Oi&&(A=Ov()):(hr=c,zd="value"in hr?hr.value:hr.textContent,Oi=!0)),I=Ql(u,R),0<I.length&&(R=new ng(R,e,null,n,c),h.push({event:R,listeners:I}),A?R.data=A:(A=bv(n),A!==null&&(R.data=A)))),(A=lI?uI(e,n):cI(e,n))&&(u=Ql(u,"onBeforeInput"),0<u.length&&(c=new ng("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=A))}Xv(h,t)})}function Bo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ql(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Mo(e,n),s!=null&&r.unshift(Bo(e,s,i)),s=Mo(e,t),s!=null&&r.push(Bo(e,s,i))),e=e.return}return r}function Ii(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pg(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Mo(n,s),l!=null&&o.unshift(Bo(n,l,a))):i||(l=Mo(n,s),l!=null&&o.push(Bo(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xI=/\r\n?/g,II=/\u0000|\uFFFD/g;function mg(e){return(typeof e=="string"?e:""+e).replace(xI,`
`).replace(II,"")}function Xa(e,t,n){if(t=mg(t),mg(e)!==t&&n)throw Error(j(425))}function Yl(){}var lf=null,uf=null;function cf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hf=typeof setTimeout=="function"?setTimeout:void 0,AI=typeof clearTimeout=="function"?clearTimeout:void 0,gg=typeof Promise=="function"?Promise:void 0,CI=typeof queueMicrotask=="function"?queueMicrotask:typeof gg<"u"?function(e){return gg.resolve(null).then(e).catch(RI)}:hf;function RI(e){setTimeout(function(){throw e})}function nh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Lo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Lo(t)}function yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Ps,Uo="__reactProps$"+Ps,Wn="__reactContainer$"+Ps,ff="__reactEvents$"+Ps,kI="__reactListeners$"+Ps,PI="__reactHandles$"+Ps;function Gr(e){var t=e[Tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wn]||n[Tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yg(e);e!==null;){if(n=e[Tn])return n;e=yg(e)}return t}e=n,n=e.parentNode}return null}function Ea(e){return e=e[Tn]||e[Wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function ju(e){return e[Uo]||null}var df=[],zi=-1;function Mr(e){return{current:e}}function De(e){0>zi||(e.current=df[zi],df[zi]=null,zi--)}function Ae(e,t){zi++,df[zi]=e.current,e.current=t}var kr={},Et=Mr(kr),Vt=Mr(!1),si=kr;function us(e,t){var n=e.type.contextTypes;if(!n)return kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mt(e){return e=e.childContextTypes,e!=null}function Xl(){De(Vt),De(Et)}function vg(e,t,n){if(Et.current!==kr)throw Error(j(168));Ae(Et,t),Ae(Vt,n)}function Jv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(j(108,px(e)||"Unknown",i));return Le({},n,r)}function Zl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,si=Et.current,Ae(Et,e),Ae(Vt,Vt.current),!0}function _g(e,t,n){var r=e.stateNode;if(!r)throw Error(j(169));n?(e=Jv(e,t,si),r.__reactInternalMemoizedMergedChildContext=e,De(Vt),De(Et),Ae(Et,e)):De(Vt),Ae(Vt,n)}var Ln=null,Hu=!1,rh=!1;function e_(e){Ln===null?Ln=[e]:Ln.push(e)}function NI(e){Hu=!0,e_(e)}function $r(){if(!rh&&Ln!==null){rh=!0;var e=0,t=Te;try{var n=Ln;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ln=null,Hu=!1}catch(i){throw Ln!==null&&(Ln=Ln.slice(e+1)),Iv(Od,$r),i}finally{Te=t,rh=!1}}return null}var Bi=[],Ui=0,Jl=null,eu=0,Wt=[],Gt=0,oi=null,Fn=1,bn="";function jr(e,t){Bi[Ui++]=eu,Bi[Ui++]=Jl,Jl=e,eu=t}function t_(e,t,n){Wt[Gt++]=Fn,Wt[Gt++]=bn,Wt[Gt++]=oi,oi=e;var r=Fn;e=bn;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fn=1<<32-hn(t)+i|n<<i|r,bn=s+e}else Fn=1<<s|n<<i|r,bn=e}function qd(e){e.return!==null&&(jr(e,1),t_(e,1,0))}function Wd(e){for(;e===Jl;)Jl=Bi[--Ui],Bi[Ui]=null,eu=Bi[--Ui],Bi[Ui]=null;for(;e===oi;)oi=Wt[--Gt],Wt[Gt]=null,bn=Wt[--Gt],Wt[Gt]=null,Fn=Wt[--Gt],Wt[Gt]=null}var zt=null,bt=null,Ve=!1,an=null;function n_(e,t){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,bt=yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=oi!==null?{id:Fn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zt=e,bt=null,!0):!1;default:return!1}}function pf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mf(e){if(Ve){var t=bt;if(t){var n=t;if(!wg(e,t)){if(pf(e))throw Error(j(418));t=yr(n.nextSibling);var r=zt;t&&wg(e,t)?n_(r,n):(e.flags=e.flags&-4097|2,Ve=!1,zt=e)}}else{if(pf(e))throw Error(j(418));e.flags=e.flags&-4097|2,Ve=!1,zt=e}}}function Eg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function Za(e){if(e!==zt)return!1;if(!Ve)return Eg(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cf(e.type,e.memoizedProps)),t&&(t=bt)){if(pf(e))throw r_(),Error(j(418));for(;t;)n_(e,t),t=yr(t.nextSibling)}if(Eg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=yr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=zt?yr(e.stateNode.nextSibling):null;return!0}function r_(){for(var e=bt;e;)e=yr(e.nextSibling)}function cs(){bt=zt=null,Ve=!1}function Gd(e){an===null?an=[e]:an.push(e)}var DI=er.ReactCurrentBatchConfig;function sn(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var tu=Mr(null),nu=null,ji=null,Kd=null;function Qd(){Kd=ji=nu=null}function Yd(e){var t=tu.current;De(tu),e._currentValue=t}function gf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zi(e,t){nu=e,Kd=ji=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Jt(e){var t=e._currentValue;if(Kd!==e)if(e={context:e,memoizedValue:t,next:null},ji===null){if(nu===null)throw Error(j(308));ji=e,nu.dependencies={lanes:0,firstContext:e}}else ji=ji.next=e;return t}var Kr=null;function Xd(e){Kr===null?Kr=[e]:Kr.push(e)}function i_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Xd(t)):(n.next=i.next,i.next=n),t.interleaved=n,Gn(e,r)}function Gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sr=!1;function Zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Gn(e,n)}return i=r.interleaved,i===null?(t.next=t,Xd(r)):(t.next=i.next,i.next=t),r.interleaved=t,Gn(e,n)}function Cl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ld(e,n)}}function Sg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ru(e,t,n,r){var i=e.updateQueue;sr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,y=a;switch(f=t,d=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(d,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(d,h,f):v,f==null)break e;h=Le({},h,f);break e;case 2:sr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);li|=o,e.lanes=o,e.memoizedState=h}}function Tg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var o_=new iv.Component().refs;function yf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qu={isMounted:function(e){return(e=e._reactInternals)?_i(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=At(),i=wr(e),s=Un(r,i);s.payload=t,n!=null&&(s.callback=n),t=vr(e,s,i),t!==null&&(fn(t,e,i,r),Cl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=At(),i=wr(e),s=Un(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=vr(e,s,i),t!==null&&(fn(t,e,i,r),Cl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=At(),r=wr(e),i=Un(n,r);i.tag=2,t!=null&&(i.callback=t),t=vr(e,i,r),t!==null&&(fn(t,e,r,n),Cl(t,e,r))}};function xg(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!bo(n,r)||!bo(i,s):!0}function a_(e,t,n){var r=!1,i=kr,s=t.contextType;return typeof s=="object"&&s!==null?s=Jt(s):(i=Mt(t)?si:Et.current,r=t.contextTypes,s=(r=r!=null)?us(e,i):kr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ig(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qu.enqueueReplaceState(t,t.state,null)}function vf(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=o_,Zd(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Jt(s):(s=Mt(t)?si:Et.current,i.context=us(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(yf(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qu.enqueueReplaceState(i,i.state,null),ru(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===o_&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,e))}return e}function Ja(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ag(e){var t=e._init;return t(e._payload)}function l_(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=Er(p,m),p.index=0,p.sibling=null,p}function s(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,g,_){return m===null||m.tag!==6?(m=ch(g,p.mode,_),m.return=p,m):(m=i(m,g),m.return=p,m)}function l(p,m,g,_){var T=g.type;return T===$i?c(p,m,g.props.children,_,g.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ir&&Ag(T)===m.type)?(_=i(m,g.props),_.ref=Gs(p,m,g),_.return=p,_):(_=Vl(g.type,g.key,g.props,null,p.mode,_),_.ref=Gs(p,m,g),_.return=p,_)}function u(p,m,g,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=hh(g,p.mode,_),m.return=p,m):(m=i(m,g.children||[]),m.return=p,m)}function c(p,m,g,_,T){return m===null||m.tag!==7?(m=ni(g,p.mode,_,T),m.return=p,m):(m=i(m,g),m.return=p,m)}function h(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ch(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ua:return g=Vl(m.type,m.key,m.props,null,p.mode,g),g.ref=Gs(p,null,m),g.return=p,g;case Mi:return m=hh(m,p.mode,g),m.return=p,m;case ir:var _=m._init;return h(p,_(m._payload),g)}if(oo(m)||Us(m))return m=ni(m,p.mode,g,null),m.return=p,m;Ja(p,m)}return null}function f(p,m,g,_){var T=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:a(p,m,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ua:return g.key===T?l(p,m,g,_):null;case Mi:return g.key===T?u(p,m,g,_):null;case ir:return T=g._init,f(p,m,T(g._payload),_)}if(oo(g)||Us(g))return T!==null?null:c(p,m,g,_,null);Ja(p,g)}return null}function d(p,m,g,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(g)||null,a(m,p,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ua:return p=p.get(_.key===null?g:_.key)||null,l(m,p,_,T);case Mi:return p=p.get(_.key===null?g:_.key)||null,u(m,p,_,T);case ir:var I=_._init;return d(p,m,g,I(_._payload),T)}if(oo(_)||Us(_))return p=p.get(g)||null,c(m,p,_,T,null);Ja(m,_)}return null}function v(p,m,g,_){for(var T=null,I=null,A=m,R=m=0,$=null;A!==null&&R<g.length;R++){A.index>R?($=A,A=null):$=A.sibling;var O=f(p,A,g[R],_);if(O===null){A===null&&(A=$);break}e&&A&&O.alternate===null&&t(p,A),m=s(O,m,R),I===null?T=O:I.sibling=O,I=O,A=$}if(R===g.length)return n(p,A),Ve&&jr(p,R),T;if(A===null){for(;R<g.length;R++)A=h(p,g[R],_),A!==null&&(m=s(A,m,R),I===null?T=A:I.sibling=A,I=A);return Ve&&jr(p,R),T}for(A=r(p,A);R<g.length;R++)$=d(A,p,R,g[R],_),$!==null&&(e&&$.alternate!==null&&A.delete($.key===null?R:$.key),m=s($,m,R),I===null?T=$:I.sibling=$,I=$);return e&&A.forEach(function(B){return t(p,B)}),Ve&&jr(p,R),T}function y(p,m,g,_){var T=Us(g);if(typeof T!="function")throw Error(j(150));if(g=T.call(g),g==null)throw Error(j(151));for(var I=T=null,A=m,R=m=0,$=null,O=g.next();A!==null&&!O.done;R++,O=g.next()){A.index>R?($=A,A=null):$=A.sibling;var B=f(p,A,O.value,_);if(B===null){A===null&&(A=$);break}e&&A&&B.alternate===null&&t(p,A),m=s(B,m,R),I===null?T=B:I.sibling=B,I=B,A=$}if(O.done)return n(p,A),Ve&&jr(p,R),T;if(A===null){for(;!O.done;R++,O=g.next())O=h(p,O.value,_),O!==null&&(m=s(O,m,R),I===null?T=O:I.sibling=O,I=O);return Ve&&jr(p,R),T}for(A=r(p,A);!O.done;R++,O=g.next())O=d(A,p,R,O.value,_),O!==null&&(e&&O.alternate!==null&&A.delete(O.key===null?R:O.key),m=s(O,m,R),I===null?T=O:I.sibling=O,I=O);return e&&A.forEach(function(q){return t(p,q)}),Ve&&jr(p,R),T}function w(p,m,g,_){if(typeof g=="object"&&g!==null&&g.type===$i&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ua:e:{for(var T=g.key,I=m;I!==null;){if(I.key===T){if(T=g.type,T===$i){if(I.tag===7){n(p,I.sibling),m=i(I,g.props.children),m.return=p,p=m;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ir&&Ag(T)===I.type){n(p,I.sibling),m=i(I,g.props),m.ref=Gs(p,I,g),m.return=p,p=m;break e}n(p,I);break}else t(p,I);I=I.sibling}g.type===$i?(m=ni(g.props.children,p.mode,_,g.key),m.return=p,p=m):(_=Vl(g.type,g.key,g.props,null,p.mode,_),_.ref=Gs(p,m,g),_.return=p,p=_)}return o(p);case Mi:e:{for(I=g.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=i(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=hh(g,p.mode,_),m.return=p,p=m}return o(p);case ir:return I=g._init,w(p,m,I(g._payload),_)}if(oo(g))return v(p,m,g,_);if(Us(g))return y(p,m,g,_);Ja(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,g),m.return=p,p=m):(n(p,m),m=ch(g,p.mode,_),m.return=p,p=m),o(p)):n(p,m)}return w}var hs=l_(!0),u_=l_(!1),Sa={},Rn=Mr(Sa),jo=Mr(Sa),Ho=Mr(Sa);function Qr(e){if(e===Sa)throw Error(j(174));return e}function Jd(e,t){switch(Ae(Ho,t),Ae(jo,e),Ae(Rn,Sa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qh(t,e)}De(Rn),Ae(Rn,t)}function fs(){De(Rn),De(jo),De(Ho)}function c_(e){Qr(Ho.current);var t=Qr(Rn.current),n=Qh(t,e.type);t!==n&&(Ae(jo,e),Ae(Rn,n))}function ep(e){jo.current===e&&(De(Rn),De(jo))}var $e=Mr(0);function iu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ih=[];function tp(){for(var e=0;e<ih.length;e++)ih[e]._workInProgressVersionPrimary=null;ih.length=0}var Rl=er.ReactCurrentDispatcher,sh=er.ReactCurrentBatchConfig,ai=0,Oe=null,Ge=null,Ze=null,su=!1,To=!1,qo=0,VI=0;function dt(){throw Error(j(321))}function np(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function rp(e,t,n,r,i,s){if(ai=s,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rl.current=e===null||e.memoizedState===null?LI:FI,e=n(r,i),To){s=0;do{if(To=!1,qo=0,25<=s)throw Error(j(301));s+=1,Ze=Ge=null,t.updateQueue=null,Rl.current=bI,e=n(r,i)}while(To)}if(Rl.current=ou,t=Ge!==null&&Ge.next!==null,ai=0,Ze=Ge=Oe=null,su=!1,t)throw Error(j(300));return e}function ip(){var e=qo!==0;return qo=0,e}function En(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function en(){if(Ge===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=Ze===null?Oe.memoizedState:Ze.next;if(t!==null)Ze=t,Ge=e;else{if(e===null)throw Error(j(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ze===null?Oe.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Wo(e,t){return typeof t=="function"?t(e):t}function oh(e){var t=en(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ai&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Oe.lanes|=c,li|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,pn(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Oe.lanes|=s,li|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ah(e){var t=en(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);pn(s,t.memoizedState)||(Nt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function h_(){}function f_(e,t){var n=Oe,r=en(),i=t(),s=!pn(r.memoizedState,i);if(s&&(r.memoizedState=i,Nt=!0),r=r.queue,sp(m_.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Go(9,p_.bind(null,n,r,i,t),void 0,null),Je===null)throw Error(j(349));ai&30||d_(n,t,i)}return i}function d_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function p_(e,t,n,r){t.value=n,t.getSnapshot=r,g_(t)&&y_(e)}function m_(e,t,n){return n(function(){g_(t)&&y_(e)})}function g_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function y_(e){var t=Gn(e,1);t!==null&&fn(t,e,1,-1)}function Cg(e){var t=En();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:e},t.queue=e,e=e.dispatch=OI.bind(null,Oe,e),[t.memoizedState,e]}function Go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function v_(){return en().memoizedState}function kl(e,t,n,r){var i=En();Oe.flags|=e,i.memoizedState=Go(1|t,n,void 0,r===void 0?null:r)}function Wu(e,t,n,r){var i=en();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,r!==null&&np(r,o.deps)){i.memoizedState=Go(t,n,s,r);return}}Oe.flags|=e,i.memoizedState=Go(1|t,n,s,r)}function Rg(e,t){return kl(8390656,8,e,t)}function sp(e,t){return Wu(2048,8,e,t)}function __(e,t){return Wu(4,2,e,t)}function w_(e,t){return Wu(4,4,e,t)}function E_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function S_(e,t,n){return n=n!=null?n.concat([e]):null,Wu(4,4,E_.bind(null,t,e),n)}function op(){}function T_(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&np(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function x_(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&np(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function I_(e,t,n){return ai&21?(pn(n,t)||(n=Rv(),Oe.lanes|=n,li|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function MI(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=sh.transition;sh.transition={};try{e(!1),t()}finally{Te=n,sh.transition=r}}function A_(){return en().memoizedState}function $I(e,t,n){var r=wr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C_(e))R_(t,n);else if(n=i_(e,t,n,r),n!==null){var i=At();fn(n,e,r,i),k_(n,t,r)}}function OI(e,t,n){var r=wr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C_(e))R_(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,pn(a,o)){var l=t.interleaved;l===null?(i.next=i,Xd(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=i_(e,t,i,r),n!==null&&(i=At(),fn(n,e,r,i),k_(n,t,r))}}function C_(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function R_(e,t){To=su=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function k_(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ld(e,n)}}var ou={readContext:Jt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},LI={readContext:Jt,useCallback:function(e,t){return En().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Rg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,kl(4194308,4,E_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return kl(4,2,e,t)},useMemo:function(e,t){var n=En();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=En();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$I.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=En();return e={current:e},t.memoizedState=e},useState:Cg,useDebugValue:op,useDeferredValue:function(e){return En().memoizedState=e},useTransition:function(){var e=Cg(!1),t=e[0];return e=MI.bind(null,e[1]),En().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,i=En();if(Ve){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),Je===null)throw Error(j(349));ai&30||d_(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Rg(m_.bind(null,r,s,e),[e]),r.flags|=2048,Go(9,p_.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=En(),t=Je.identifierPrefix;if(Ve){var n=bn,r=Fn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VI++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FI={readContext:Jt,useCallback:T_,useContext:Jt,useEffect:sp,useImperativeHandle:S_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:x_,useReducer:oh,useRef:v_,useState:function(){return oh(Wo)},useDebugValue:op,useDeferredValue:function(e){var t=en();return I_(t,Ge.memoizedState,e)},useTransition:function(){var e=oh(Wo)[0],t=en().memoizedState;return[e,t]},useMutableSource:h_,useSyncExternalStore:f_,useId:A_,unstable_isNewReconciler:!1},bI={readContext:Jt,useCallback:T_,useContext:Jt,useEffect:sp,useImperativeHandle:S_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:x_,useReducer:ah,useRef:v_,useState:function(){return ah(Wo)},useDebugValue:op,useDeferredValue:function(e){var t=en();return Ge===null?t.memoizedState=e:I_(t,Ge.memoizedState,e)},useTransition:function(){var e=ah(Wo)[0],t=en().memoizedState;return[e,t]},useMutableSource:h_,useSyncExternalStore:f_,useId:A_,unstable_isNewReconciler:!1};function ds(e,t){try{var n="",r=t;do n+=dx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function lh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _f(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zI=typeof WeakMap=="function"?WeakMap:Map;function P_(e,t,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){lu||(lu=!0,kf=r),_f(e,t)},n}function N_(e,t,n){n=Un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_f(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_f(e,t),typeof r!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function kg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new zI;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=eA.bind(null,e,t,n),t.then(e,e))}function Pg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ng(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Un(-1,1),t.tag=2,vr(n,t,1))),n.lanes|=1),e)}var BI=er.ReactCurrentOwner,Nt=!1;function xt(e,t,n,r){t.child=e===null?u_(t,null,n,r):hs(t,e.child,n,r)}function Dg(e,t,n,r,i){n=n.render;var s=t.ref;return Zi(t,i),r=rp(e,t,n,r,s,i),n=ip(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kn(e,t,i)):(Ve&&n&&qd(t),t.flags|=1,xt(e,t,r,i),t.child)}function Vg(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!pp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,D_(e,t,s,r,i)):(e=Vl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(o,r)&&e.ref===t.ref)return Kn(e,t,i)}return t.flags|=1,e=Er(s,r),e.ref=t.ref,e.return=t,t.child=e}function D_(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(bo(s,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Kn(e,t,i)}return wf(e,t,n,r,i)}function V_(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(qi,Ft),Ft|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(qi,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(qi,Ft),Ft|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ae(qi,Ft),Ft|=r;return xt(e,t,i,n),t.child}function M_(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wf(e,t,n,r,i){var s=Mt(n)?si:Et.current;return s=us(t,s),Zi(t,i),n=rp(e,t,n,r,s,i),r=ip(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kn(e,t,i)):(Ve&&r&&qd(t),t.flags|=1,xt(e,t,n,i),t.child)}function Mg(e,t,n,r,i){if(Mt(n)){var s=!0;Zl(t)}else s=!1;if(Zi(t,i),t.stateNode===null)Pl(e,t),a_(t,n,r),vf(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=Mt(n)?si:Et.current,u=us(t,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Ig(t,o,r,u),sr=!1;var f=t.memoizedState;o.state=f,ru(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Vt.current||sr?(typeof c=="function"&&(yf(t,n,c,r),l=t.memoizedState),(a=sr||xg(t,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,s_(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:sn(t.type,a),o.props=u,h=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jt(l):(l=Mt(n)?si:Et.current,l=us(t,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Ig(t,o,r,l),sr=!1,f=t.memoizedState,o.state=f,ru(t,r,o,i);var v=t.memoizedState;a!==h||f!==v||Vt.current||sr?(typeof d=="function"&&(yf(t,n,d,r),v=t.memoizedState),(u=sr||xg(t,n,u,r,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ef(e,t,n,r,s,i)}function Ef(e,t,n,r,i,s){M_(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&_g(t,n,!1),Kn(e,t,s);r=t.stateNode,BI.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=hs(t,e.child,null,s),t.child=hs(t,null,a,s)):xt(e,t,a,s),t.memoizedState=r.state,i&&_g(t,n,!0),t.child}function $_(e){var t=e.stateNode;t.pendingContext?vg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vg(e,t.context,!1),Jd(e,t.containerInfo)}function $g(e,t,n,r,i){return cs(),Gd(i),t.flags|=256,xt(e,t,n,r),t.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Tf(e){return{baseLanes:e,cachePool:null,transitions:null}}function O_(e,t,n){var r=t.pendingProps,i=$e.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ae($e,i&1),e===null)return mf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qu(o,r,0,null),e=ni(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Tf(n),t.memoizedState=Sf,e):ap(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return UI(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Er(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Er(a,s):(s=ni(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Tf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Sf,r}return s=e.child,e=s.sibling,r=Er(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ap(e,t){return t=Qu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function el(e,t,n,r){return r!==null&&Gd(r),hs(t,e.child,null,n),e=ap(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function UI(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=lh(Error(j(422))),el(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Qu({mode:"visible",children:r.children},i,0,null),s=ni(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&hs(t,e.child,null,o),t.child.memoizedState=Tf(o),t.memoizedState=Sf,s);if(!(t.mode&1))return el(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(j(419)),r=lh(s,r,void 0),el(e,t,o,r)}if(a=(o&e.childLanes)!==0,Nt||a){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gn(e,i),fn(r,e,i,-1))}return dp(),r=lh(Error(j(421))),el(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=tA.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,bt=yr(i.nextSibling),zt=t,Ve=!0,an=null,e!==null&&(Wt[Gt++]=Fn,Wt[Gt++]=bn,Wt[Gt++]=oi,Fn=e.id,bn=e.overflow,oi=t),t=ap(t,r.children),t.flags|=4096,t)}function Og(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gf(e.return,t,n)}function uh(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function L_(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xt(e,t,r.children,n),r=$e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Og(e,n,t);else if(e.tag===19)Og(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ae($e,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&iu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),uh(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&iu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}uh(t,!0,n,null,s);break;case"together":uh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),li|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=Er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jI(e,t,n){switch(t.tag){case 3:$_(t),cs();break;case 5:c_(t);break;case 1:Mt(t.type)&&Zl(t);break;case 4:Jd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ae(tu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ae($e,$e.current&1),t.flags|=128,null):n&t.child.childLanes?O_(e,t,n):(Ae($e,$e.current&1),e=Kn(e,t,n),e!==null?e.sibling:null);Ae($e,$e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return L_(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,V_(e,t,n)}return Kn(e,t,n)}var F_,xf,b_,z_;F_=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xf=function(){};b_=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qr(Rn.current);var s=null;switch(n){case"input":i=qh(e,i),r=qh(e,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=Kh(e,i),r=Kh(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yl)}Yh(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Do.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Do.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};z_=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ks(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function HI(e,t,n){var r=t.pendingProps;switch(Wd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return Mt(t.type)&&Xl(),pt(t),null;case 3:return r=t.stateNode,fs(),De(Vt),De(Et),tp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Za(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,an!==null&&(Df(an),an=null))),xf(e,t),pt(t),null;case 5:ep(t);var i=Qr(Ho.current);if(n=t.type,e!==null&&t.stateNode!=null)b_(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(j(166));return pt(t),null}if(e=Qr(Rn.current),Za(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Tn]=t,r[Uo]=s,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<lo.length;i++)ke(lo[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":qm(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":Gm(r,s),ke("invalid",r)}Yh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xa(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xa(r.textContent,a,e),i=["children",""+a]):Do.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":ja(r),Wm(r,s,!0);break;case"textarea":ja(r),Km(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Tn]=t,e[Uo]=r,F_(e,t,!1,!1),t.stateNode=e;e:{switch(o=Xh(n,r),n){case"dialog":ke("cancel",e),ke("close",e),i=r;break;case"iframe":case"object":case"embed":ke("load",e),i=r;break;case"video":case"audio":for(i=0;i<lo.length;i++)ke(lo[i],e);i=r;break;case"source":ke("error",e),i=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),i=r;break;case"details":ke("toggle",e),i=r;break;case"input":qm(e,r),i=qh(e,r),ke("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),ke("invalid",e);break;case"textarea":Gm(e,r),i=Kh(e,r),ke("invalid",e);break;default:i=r}Yh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?gv(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pv(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vo(e,l):typeof l=="number"&&Vo(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Do.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",e):l!=null&&Nd(e,s,l,o))}switch(n){case"input":ja(e),Wm(e,r,!1);break;case"textarea":ja(e),Km(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Rr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ki(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ki(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)z_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(j(166));if(n=Qr(Ho.current),Qr(Rn.current),Za(t)){if(r=t.stateNode,n=t.memoizedProps,r[Tn]=t,(s=r.nodeValue!==n)&&(e=zt,e!==null))switch(e.tag){case 3:Xa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=t,t.stateNode=r}return pt(t),null;case 13:if(De($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&bt!==null&&t.mode&1&&!(t.flags&128))r_(),cs(),t.flags|=98560,s=!1;else if(s=Za(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(j(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Tn]=t}else cs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),s=!1}else an!==null&&(Df(an),an=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?Ke===0&&(Ke=3):dp())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return fs(),xf(e,t),e===null&&zo(t.stateNode.containerInfo),pt(t),null;case 10:return Yd(t.type._context),pt(t),null;case 17:return Mt(t.type)&&Xl(),pt(t),null;case 19:if(De($e),s=t.memoizedState,s===null)return pt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ks(s,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=iu(e),o!==null){for(t.flags|=128,Ks(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ae($e,$e.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ue()>ps&&(t.flags|=128,r=!0,Ks(s,!1),t.lanes=4194304)}else{if(!r)if(e=iu(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ks(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return pt(t),null}else 2*Ue()-s.renderingStartTime>ps&&n!==1073741824&&(t.flags|=128,r=!0,Ks(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ue(),t.sibling=null,n=$e.current,Ae($e,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return fp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ft&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function qI(e,t){switch(Wd(t),t.tag){case 1:return Mt(t.type)&&Xl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(),De(Vt),De(Et),tp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ep(t),null;case 13:if(De($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De($e),null;case 4:return fs(),null;case 10:return Yd(t.type._context),null;case 22:case 23:return fp(),null;case 24:return null;default:return null}}var tl=!1,yt=!1,WI=typeof WeakSet=="function"?WeakSet:Set,X=null;function Hi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(e,t,r)}else n.current=null}function If(e,t,n){try{n()}catch(r){ze(e,t,r)}}var Lg=!1;function GI(e,t){if(lf=Gl,e=Hv(),Hd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=e,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(uf={focusedElem:e,selectionRange:n},Gl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:sn(t.type,y),w);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(_){ze(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return v=Lg,Lg=!1,v}function xo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&If(t,n,s)}i=i.next}while(i!==r)}}function Gu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Af(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function B_(e){var t=e.alternate;t!==null&&(e.alternate=null,B_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tn],delete t[Uo],delete t[ff],delete t[kI],delete t[PI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function U_(e){return e.tag===5||e.tag===3||e.tag===4}function Fg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||U_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yl));else if(r!==4&&(e=e.child,e!==null))for(Cf(e,t,n),e=e.sibling;e!==null;)Cf(e,t,n),e=e.sibling}function Rf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Rf(e,t,n),e=e.sibling;e!==null;)Rf(e,t,n),e=e.sibling}var rt=null,on=!1;function nr(e,t,n){for(n=n.child;n!==null;)j_(e,t,n),n=n.sibling}function j_(e,t,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:yt||Hi(n,t);case 6:var r=rt,i=on;rt=null,nr(e,t,n),rt=r,on=i,rt!==null&&(on?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(on?(e=rt,n=n.stateNode,e.nodeType===8?nh(e.parentNode,n):e.nodeType===1&&nh(e,n),Lo(e)):nh(rt,n.stateNode));break;case 4:r=rt,i=on,rt=n.stateNode.containerInfo,on=!0,nr(e,t,n),rt=r,on=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&If(n,t,o),i=i.next}while(i!==r)}nr(e,t,n);break;case 1:if(!yt&&(Hi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,t,a)}nr(e,t,n);break;case 21:nr(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,nr(e,t,n),yt=r):nr(e,t,n);break;default:nr(e,t,n)}}function bg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new WI),t.forEach(function(r){var i=nA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,on=!1;break e;case 3:rt=a.stateNode.containerInfo,on=!0;break e;case 4:rt=a.stateNode.containerInfo,on=!0;break e}a=a.return}if(rt===null)throw Error(j(160));j_(s,o,i),rt=null,on=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ze(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)H_(t,e),t=t.sibling}function H_(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rn(t,e),wn(e),r&4){try{xo(3,e,e.return),Gu(3,e)}catch(y){ze(e,e.return,y)}try{xo(5,e,e.return)}catch(y){ze(e,e.return,y)}}break;case 1:rn(t,e),wn(e),r&512&&n!==null&&Hi(n,n.return);break;case 5:if(rn(t,e),wn(e),r&512&&n!==null&&Hi(n,n.return),e.flags&32){var i=e.stateNode;try{Vo(i,"")}catch(y){ze(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&hv(i,s),Xh(a,o);var u=Xh(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?gv(i,h):c==="dangerouslySetInnerHTML"?pv(i,h):c==="children"?Vo(i,h):Nd(i,c,h,u)}switch(a){case"input":Wh(i,s);break;case"textarea":fv(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Ki(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ki(i,!!s.multiple,s.defaultValue,!0):Ki(i,!!s.multiple,s.multiple?[]:"",!1))}i[Uo]=s}catch(y){ze(e,e.return,y)}}break;case 6:if(rn(t,e),wn(e),r&4){if(e.stateNode===null)throw Error(j(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(y){ze(e,e.return,y)}}break;case 3:if(rn(t,e),wn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lo(t.containerInfo)}catch(y){ze(e,e.return,y)}break;case 4:rn(t,e),wn(e);break;case 13:rn(t,e),wn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cp=Ue())),r&4&&bg(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(u=yt)||c,rn(t,e),yt=u):rn(t,e),wn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(X=e,c=e.child;c!==null;){for(h=X=c;X!==null;){switch(f=X,d=f.child,f.tag){case 0:case 11:case 14:case 15:xo(4,f,f.return);break;case 1:Hi(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){ze(r,n,y)}}break;case 5:Hi(f,f.return);break;case 22:if(f.memoizedState!==null){Bg(h);continue}}d!==null?(d.return=f,X=d):Bg(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mv("display",o))}catch(y){ze(e,e.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){ze(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rn(t,e),wn(e),r&4&&bg(e);break;case 21:break;default:rn(t,e),wn(e)}}function wn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(U_(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vo(i,""),r.flags&=-33);var s=Fg(e);Rf(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fg(e);Cf(e,a,o);break;default:throw Error(j(161))}}catch(l){ze(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KI(e,t,n){X=e,q_(e)}function q_(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yt;a=tl;var u=yt;if(tl=o,(yt=l)&&!u)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?Ug(i):l!==null?(l.return=o,X=l):Ug(i);for(;s!==null;)X=s,q_(s),s=s.sibling;X=i,tl=a,yt=u}zg(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):zg(e)}}function zg(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||Gu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:sn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Tg(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tg(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Lo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}yt||t.flags&512&&Af(t)}catch(f){ze(t,t.return,f)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Bg(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Ug(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gu(4,t)}catch(l){ze(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){ze(t,i,l)}}var s=t.return;try{Af(t)}catch(l){ze(t,s,l)}break;case 5:var o=t.return;try{Af(t)}catch(l){ze(t,o,l)}}}catch(l){ze(t,t.return,l)}if(t===e){X=null;break}var a=t.sibling;if(a!==null){a.return=t.return,X=a;break}X=t.return}}var QI=Math.ceil,au=er.ReactCurrentDispatcher,lp=er.ReactCurrentOwner,Zt=er.ReactCurrentBatchConfig,we=0,Je=null,qe=null,at=0,Ft=0,qi=Mr(0),Ke=0,Ko=null,li=0,Ku=0,up=0,Io=null,Pt=null,cp=0,ps=1/0,On=null,lu=!1,kf=null,_r=null,nl=!1,fr=null,uu=0,Ao=0,Pf=null,Nl=-1,Dl=0;function At(){return we&6?Ue():Nl!==-1?Nl:Nl=Ue()}function wr(e){return e.mode&1?we&2&&at!==0?at&-at:DI.transition!==null?(Dl===0&&(Dl=Rv()),Dl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:$v(e.type)),e):1}function fn(e,t,n,r){if(50<Ao)throw Ao=0,Pf=null,Error(j(185));_a(e,n,r),(!(we&2)||e!==Je)&&(e===Je&&(!(we&2)&&(Ku|=n),Ke===4&&ur(e,at)),$t(e,r),n===1&&we===0&&!(t.mode&1)&&(ps=Ue()+500,Hu&&$r()))}function $t(e,t){var n=e.callbackNode;Dx(e,t);var r=Wl(e,e===Je?at:0);if(r===0)n!==null&&Xm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Xm(n),t===1)e.tag===0?NI(jg.bind(null,e)):e_(jg.bind(null,e)),CI(function(){!(we&6)&&$r()}),n=null;else{switch(kv(r)){case 1:n=Od;break;case 4:n=Av;break;case 16:n=ql;break;case 536870912:n=Cv;break;default:n=ql}n=J_(n,W_.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function W_(e,t){if(Nl=-1,Dl=0,we&6)throw Error(j(327));var n=e.callbackNode;if(Ji()&&e.callbackNode!==n)return null;var r=Wl(e,e===Je?at:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cu(e,r);else{t=r;var i=we;we|=2;var s=K_();(Je!==e||at!==t)&&(On=null,ps=Ue()+500,ti(e,t));do try{ZI();break}catch(a){G_(e,a)}while(!0);Qd(),au.current=s,we=i,qe!==null?t=0:(Je=null,at=0,t=Ke)}if(t!==0){if(t===2&&(i=nf(e),i!==0&&(r=i,t=Nf(e,i))),t===1)throw n=Ko,ti(e,0),ur(e,r),$t(e,Ue()),n;if(t===6)ur(e,r);else{if(i=e.current.alternate,!(r&30)&&!YI(i)&&(t=cu(e,r),t===2&&(s=nf(e),s!==0&&(r=s,t=Nf(e,s))),t===1))throw n=Ko,ti(e,0),ur(e,r),$t(e,Ue()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(j(345));case 2:Hr(e,Pt,On);break;case 3:if(ur(e,r),(r&130023424)===r&&(t=cp+500-Ue(),10<t)){if(Wl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){At(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=hf(Hr.bind(null,e,Pt,On),t);break}Hr(e,Pt,On);break;case 4:if(ur(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-hn(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QI(r/1960))-r,10<r){e.timeoutHandle=hf(Hr.bind(null,e,Pt,On),r);break}Hr(e,Pt,On);break;case 5:Hr(e,Pt,On);break;default:throw Error(j(329))}}}return $t(e,Ue()),e.callbackNode===n?W_.bind(null,e):null}function Nf(e,t){var n=Io;return e.current.memoizedState.isDehydrated&&(ti(e,t).flags|=256),e=cu(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Df(t)),e}function Df(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function YI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ur(e,t){for(t&=~up,t&=~Ku,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hn(t),r=1<<n;e[n]=-1,t&=~r}}function jg(e){if(we&6)throw Error(j(327));Ji();var t=Wl(e,0);if(!(t&1))return $t(e,Ue()),null;var n=cu(e,t);if(e.tag!==0&&n===2){var r=nf(e);r!==0&&(t=r,n=Nf(e,r))}if(n===1)throw n=Ko,ti(e,0),ur(e,t),$t(e,Ue()),n;if(n===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hr(e,Pt,On),$t(e,Ue()),null}function hp(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(ps=Ue()+500,Hu&&$r())}}function ui(e){fr!==null&&fr.tag===0&&!(we&6)&&Ji();var t=we;we|=1;var n=Zt.transition,r=Te;try{if(Zt.transition=null,Te=1,e)return e()}finally{Te=r,Zt.transition=n,we=t,!(we&6)&&$r()}}function fp(){Ft=qi.current,De(qi)}function ti(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,AI(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Wd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:fs(),De(Vt),De(Et),tp();break;case 5:ep(r);break;case 4:fs();break;case 13:De($e);break;case 19:De($e);break;case 10:Yd(r.type._context);break;case 22:case 23:fp()}n=n.return}if(Je=e,qe=e=Er(e.current,null),at=Ft=t,Ke=0,Ko=null,up=Ku=li=0,Pt=Io=null,Kr!==null){for(t=0;t<Kr.length;t++)if(n=Kr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Kr=null}return e}function G_(e,t){do{var n=qe;try{if(Qd(),Rl.current=ou,su){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}su=!1}if(ai=0,Ze=Ge=Oe=null,To=!1,qo=0,lp.current=null,n===null||n.return===null){Ke=1,Ko=t,qe=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Pg(o);if(d!==null){d.flags&=-257,Ng(d,o,a,s,t),d.mode&1&&kg(s,u,t),t=d,l=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}else{if(!(t&1)){kg(s,u,t),dp();break e}l=Error(j(426))}}else if(Ve&&a.mode&1){var w=Pg(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ng(w,o,a,s,t),Gd(ds(l,a));break e}}s=l=ds(l,a),Ke!==4&&(Ke=2),Io===null?Io=[s]:Io.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=P_(s,l,t);Sg(s,p);break e;case 1:a=l;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(_r===null||!_r.has(g)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=N_(s,a,t);Sg(s,_);break e}}s=s.return}while(s!==null)}Y_(n)}catch(T){t=T,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function K_(){var e=au.current;return au.current=ou,e===null?ou:e}function dp(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(li&268435455)&&!(Ku&268435455)||ur(Je,at)}function cu(e,t){var n=we;we|=2;var r=K_();(Je!==e||at!==t)&&(On=null,ti(e,t));do try{XI();break}catch(i){G_(e,i)}while(!0);if(Qd(),we=n,au.current=r,qe!==null)throw Error(j(261));return Je=null,at=0,Ke}function XI(){for(;qe!==null;)Q_(qe)}function ZI(){for(;qe!==null&&!Tx();)Q_(qe)}function Q_(e){var t=Z_(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?Y_(e):qe=t,lp.current=null}function Y_(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=qI(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,qe=null;return}}else if(n=HI(n,t,Ft),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Ke===0&&(Ke=5)}function Hr(e,t,n){var r=Te,i=Zt.transition;try{Zt.transition=null,Te=1,JI(e,t,n,r)}finally{Zt.transition=i,Te=r}return null}function JI(e,t,n,r){do Ji();while(fr!==null);if(we&6)throw Error(j(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Vx(e,s),e===Je&&(qe=Je=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,J_(ql,function(){return Ji(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var o=Te;Te=1;var a=we;we|=4,lp.current=null,GI(e,n),H_(n,e),_I(uf),Gl=!!lf,uf=lf=null,e.current=n,KI(n),xx(),we=a,Te=o,Zt.transition=s}else e.current=n;if(nl&&(nl=!1,fr=e,uu=i),s=e.pendingLanes,s===0&&(_r=null),Cx(n.stateNode),$t(e,Ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lu)throw lu=!1,e=kf,kf=null,e;return uu&1&&e.tag!==0&&Ji(),s=e.pendingLanes,s&1?e===Pf?Ao++:(Ao=0,Pf=e):Ao=0,$r(),null}function Ji(){if(fr!==null){var e=kv(uu),t=Zt.transition,n=Te;try{if(Zt.transition=null,Te=16>e?16:e,fr===null)var r=!1;else{if(e=fr,fr=null,uu=0,we&6)throw Error(j(331));var i=we;for(we|=4,X=e.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var c=X;switch(c.tag){case 0:case 11:case 15:xo(8,c,s)}var h=c.child;if(h!==null)h.return=c,X=h;else for(;X!==null;){c=X;var f=c.sibling,d=c.return;if(B_(c),c===u){X=null;break}if(f!==null){f.return=d,X=f;break}X=d}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xo(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,X=p;break e}X=s.return}}var m=e.current;for(X=m;X!==null;){o=X;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,X=g;else e:for(o=m;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gu(9,a)}}catch(T){ze(a,a.return,T)}if(a===o){X=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,X=_;break e}X=a.return}}if(we=i,$r(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(bu,e)}catch{}r=!0}return r}finally{Te=n,Zt.transition=t}}return!1}function Hg(e,t,n){t=ds(n,t),t=P_(e,t,1),e=vr(e,t,1),t=At(),e!==null&&(_a(e,1,t),$t(e,t))}function ze(e,t,n){if(e.tag===3)Hg(e,e,n);else for(;t!==null;){if(t.tag===3){Hg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_r===null||!_r.has(r))){e=ds(n,e),e=N_(t,e,1),t=vr(t,e,1),e=At(),t!==null&&(_a(t,1,e),$t(t,e));break}}t=t.return}}function eA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=At(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>Ue()-cp?ti(e,0):up|=n),$t(e,t)}function X_(e,t){t===0&&(e.mode&1?(t=Wa,Wa<<=1,!(Wa&130023424)&&(Wa=4194304)):t=1);var n=At();e=Gn(e,t),e!==null&&(_a(e,t,n),$t(e,n))}function tA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),X_(e,n)}function nA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(t),X_(e,n)}var Z_;Z_=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,jI(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,Ve&&t.flags&1048576&&t_(t,eu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pl(e,t),e=t.pendingProps;var i=us(t,Et.current);Zi(t,n),i=rp(null,t,r,e,i,n);var s=ip();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(s=!0,Zl(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zd(t),i.updater=qu,t.stateNode=i,i._reactInternals=t,vf(t,r,e,n),t=Ef(null,t,r,!0,s,n)):(t.tag=0,Ve&&s&&qd(t),xt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=iA(r),e=sn(r,e),i){case 0:t=wf(null,t,r,e,n);break e;case 1:t=Mg(null,t,r,e,n);break e;case 11:t=Dg(null,t,r,e,n);break e;case 14:t=Vg(null,t,r,sn(r.type,e),n);break e}throw Error(j(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sn(r,i),wf(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sn(r,i),Mg(e,t,r,i,n);case 3:e:{if($_(t),e===null)throw Error(j(387));r=t.pendingProps,s=t.memoizedState,i=s.element,s_(e,t),ru(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ds(Error(j(423)),t),t=$g(e,t,r,n,i);break e}else if(r!==i){i=ds(Error(j(424)),t),t=$g(e,t,r,n,i);break e}else for(bt=yr(t.stateNode.containerInfo.firstChild),zt=t,Ve=!0,an=null,n=u_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),r===i){t=Kn(e,t,n);break e}xt(e,t,r,n)}t=t.child}return t;case 5:return c_(t),e===null&&mf(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,cf(r,i)?o=null:s!==null&&cf(r,s)&&(t.flags|=32),M_(e,t),xt(e,t,o,n),t.child;case 6:return e===null&&mf(t),null;case 13:return O_(e,t,n);case 4:return Jd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hs(t,null,r,n):xt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sn(r,i),Dg(e,t,r,i,n);case 7:return xt(e,t,t.pendingProps,n),t.child;case 8:return xt(e,t,t.pendingProps.children,n),t.child;case 12:return xt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ae(tu,r._currentValue),r._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===i.children&&!Vt.current){t=Kn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Un(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gf(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gf(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Zi(t,n),i=Jt(i),r=r(i),t.flags|=1,xt(e,t,r,n),t.child;case 14:return r=t.type,i=sn(r,t.pendingProps),i=sn(r.type,i),Vg(e,t,r,i,n);case 15:return D_(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sn(r,i),Pl(e,t),t.tag=1,Mt(r)?(e=!0,Zl(t)):e=!1,Zi(t,n),a_(t,r,i),vf(t,r,i,n),Ef(null,t,r,!0,e,n);case 19:return L_(e,t,n);case 22:return V_(e,t,n)}throw Error(j(156,t.tag))};function J_(e,t){return Iv(e,t)}function rA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,n,r){return new rA(e,t,n,r)}function pp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iA(e){if(typeof e=="function")return pp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vd)return 11;if(e===Md)return 14}return 2}function Er(e,t){var n=e.alternate;return n===null?(n=Yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vl(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")pp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $i:return ni(n.children,i,s,t);case Dd:o=8,i|=8;break;case Bh:return e=Yt(12,n,t,i|2),e.elementType=Bh,e.lanes=s,e;case Uh:return e=Yt(13,n,t,i),e.elementType=Uh,e.lanes=s,e;case jh:return e=Yt(19,n,t,i),e.elementType=jh,e.lanes=s,e;case lv:return Qu(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ov:o=10;break e;case av:o=9;break e;case Vd:o=11;break e;case Md:o=14;break e;case ir:o=16,r=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=Yt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function ni(e,t,n,r){return e=Yt(7,e,r,t),e.lanes=n,e}function Qu(e,t,n,r){return e=Yt(22,e,r,t),e.elementType=lv,e.lanes=n,e.stateNode={isHidden:!1},e}function ch(e,t,n){return e=Yt(6,e,null,t),e.lanes=n,e}function hh(e,t,n){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qc(0),this.expirationTimes=qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mp(e,t,n,r,i,s,o,a,l){return e=new sA(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Yt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(s),e}function oA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ew(e){if(!e)return kr;e=e._reactInternals;e:{if(_i(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var n=e.type;if(Mt(n))return Jv(e,n,t)}return t}function tw(e,t,n,r,i,s,o,a,l){return e=mp(n,r,!0,e,i,s,o,a,l),e.context=ew(null),n=e.current,r=At(),i=wr(n),s=Un(r,i),s.callback=t??null,vr(n,s,i),e.current.lanes=i,_a(e,i,r),$t(e,r),e}function Yu(e,t,n,r){var i=t.current,s=At(),o=wr(i);return n=ew(n),t.context===null?t.context=n:t.pendingContext=n,t=Un(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vr(i,t,o),e!==null&&(fn(e,i,o,s),Cl(e,i,o)),o}function hu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gp(e,t){qg(e,t),(e=e.alternate)&&qg(e,t)}function aA(){return null}var nw=typeof reportError=="function"?reportError:function(e){console.error(e)};function yp(e){this._internalRoot=e}Xu.prototype.render=yp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Yu(e,t,null,null)};Xu.prototype.unmount=yp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ui(function(){Yu(null,e,null,null)}),t[Wn]=null}};function Xu(e){this._internalRoot=e}Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lr.length&&t!==0&&t<lr[n].priority;n++);lr.splice(n,0,e),n===0&&Mv(e)}};function vp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wg(){}function lA(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=hu(o);s.call(u)}}var o=tw(t,r,e,0,null,!1,!1,"",Wg);return e._reactRootContainer=o,e[Wn]=o.current,zo(e.nodeType===8?e.parentNode:e),ui(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=hu(l);a.call(u)}}var l=mp(e,0,!1,null,null,!1,!1,"",Wg);return e._reactRootContainer=l,e[Wn]=l.current,zo(e.nodeType===8?e.parentNode:e),ui(function(){Yu(t,l,n,r)}),l}function Ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=hu(o);a.call(l)}}Yu(t,o,e,i)}else o=lA(n,t,e,i,r);return hu(o)}Pv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ao(t.pendingLanes);n!==0&&(Ld(t,n|1),$t(t,Ue()),!(we&6)&&(ps=Ue()+500,$r()))}break;case 13:ui(function(){var r=Gn(e,1);if(r!==null){var i=At();fn(r,e,1,i)}}),gp(e,1)}};Fd=function(e){if(e.tag===13){var t=Gn(e,134217728);if(t!==null){var n=At();fn(t,e,134217728,n)}gp(e,134217728)}};Nv=function(e){if(e.tag===13){var t=wr(e),n=Gn(e,t);if(n!==null){var r=At();fn(n,e,t,r)}gp(e,t)}};Dv=function(){return Te};Vv=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};Jh=function(e,t,n){switch(t){case"input":if(Wh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ju(r);if(!i)throw Error(j(90));cv(r),Wh(r,i)}}}break;case"textarea":fv(e,n);break;case"select":t=n.value,t!=null&&Ki(e,!!n.multiple,t,!1)}};_v=hp;wv=ui;var uA={usingClientEntryPoint:!1,Events:[Ea,bi,ju,yv,vv,hp]},Qs={findFiberByHostInstance:Gr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},cA={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tv(e),e===null?null:e.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||aA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{bu=rl.inject(cA),Cn=rl}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uA;Ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(t))throw Error(j(200));return oA(e,t,null,n)};Ht.createRoot=function(e,t){if(!vp(e))throw Error(j(299));var n=!1,r="",i=nw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=mp(e,1,!1,null,null,n,!1,r,i),e[Wn]=t.current,zo(e.nodeType===8?e.parentNode:e),new yp(t)};Ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=Tv(t),e=e===null?null:e.stateNode,e};Ht.flushSync=function(e){return ui(e)};Ht.hydrate=function(e,t,n){if(!Zu(t))throw Error(j(200));return Ju(null,e,t,!0,n)};Ht.hydrateRoot=function(e,t,n){if(!vp(e))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=tw(t,null,e,1,n??null,i,!1,s,o),e[Wn]=t.current,zo(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)};Ht.render=function(e,t,n){if(!Zu(t))throw Error(j(200));return Ju(null,e,t,!1,n)};Ht.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(j(40));return e._reactRootContainer?(ui(function(){Ju(null,null,e,!1,function(){e._reactRootContainer=null,e[Wn]=null})}),!0):!1};Ht.unstable_batchedUpdates=hp;Ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Ju(e,t,n,!1,r)};Ht.version="18.2.0-next-9e3b772b8-20220608";function rw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rw)}catch(e){console.error(e)}}rw(),tv.exports=Ht;var hA=tv.exports,Gg=hA;bh.createRoot=Gg.createRoot,bh.hydrateRoot=Gg.hydrateRoot;function kt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=kt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var iw={exports:{}},sw={},ow={exports:{}},aw={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=P;function fA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dA=typeof Object.is=="function"?Object.is:fA,pA=ms.useState,mA=ms.useEffect,gA=ms.useLayoutEffect,yA=ms.useDebugValue;function vA(e,t){var n=t(),r=pA({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return gA(function(){i.value=n,i.getSnapshot=t,fh(i)&&s({inst:i})},[e,n,t]),mA(function(){return fh(i)&&s({inst:i}),e(function(){fh(i)&&s({inst:i})})},[e]),yA(n),n}function fh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dA(e,n)}catch{return!0}}function _A(e,t){return t()}var wA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_A:vA;aw.useSyncExternalStore=ms.useSyncExternalStore!==void 0?ms.useSyncExternalStore:wA;ow.exports=aw;var EA=ow.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=P,SA=EA;function TA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xA=typeof Object.is=="function"?Object.is:TA,IA=SA.useSyncExternalStore,AA=ec.useRef,CA=ec.useEffect,RA=ec.useMemo,kA=ec.useDebugValue;sw.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=AA(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=RA(function(){function l(d){if(!u){if(u=!0,c=d,d=r(d),i!==void 0&&o.hasValue){var v=o.value;if(i(v,d))return h=v}return h=d}if(v=h,xA(c,d))return v;var y=r(d);return i!==void 0&&i(v,y)?v:(c=d,h=y)}var u=!1,c,h,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=IA(e,s[0],s[1]);return CA(function(){o.hasValue=!0,o.value=a},[a]),kA(a),a};iw.exports=sw;var PA=iw.exports;const NA=H0(PA);var DA={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Kg=e=>{let t;const n=new Set,r=(l,u)=>{const c=typeof l=="function"?l(t):l;if(!Object.is(c,t)){const h=t;t=u??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(f=>f(t,h))}},i=()=>t,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(DA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,a),a},VA=e=>e?Kg(e):Kg,{useDebugValue:MA}=V,{useSyncExternalStoreWithSelector:$A}=NA;function lw(e,t=e.getState,n){const r=$A(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return MA(r),r}const Qg=(e,t)=>{const n=VA(e),r=(i,s=t)=>lw(n,i,s);return Object.assign(r,n),r},OA=(e,t)=>e?Qg(e,t):Qg;function St(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var LA={value:()=>{}};function tc(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ml(n)}function Ml(e){this._=e}function FA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ml.prototype=tc.prototype={constructor:Ml,on:function(e,t){var n=this._,r=FA(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=bA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Yg(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Yg(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ml(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function bA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Yg(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=LA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vf="http://www.w3.org/1999/xhtml";const Xg={svg:"http://www.w3.org/2000/svg",xhtml:Vf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Xg.hasOwnProperty(t)?{space:Xg[t],local:e}:e}function zA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vf&&t.documentElement.namespaceURI===Vf?t.createElement(e):t.createElementNS(n,e)}}function BA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function uw(e){var t=nc(e);return(t.local?BA:zA)(t)}function UA(){}function _p(e){return e==null?UA:function(){return this.querySelector(e)}}function jA(e){typeof e!="function"&&(e=_p(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Ut(r,this._parents)}function HA(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qA(){return[]}function cw(e){return e==null?qA:function(){return this.querySelectorAll(e)}}function WA(e){return function(){return HA(e.apply(this,arguments))}}function GA(e){typeof e=="function"?e=WA(e):e=cw(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new Ut(r,i)}function hw(e){return function(){return this.matches(e)}}function fw(e){return function(t){return t.matches(e)}}var KA=Array.prototype.find;function QA(e){return function(){return KA.call(this.children,e)}}function YA(){return this.firstElementChild}function XA(e){return this.select(e==null?YA:QA(typeof e=="function"?e:fw(e)))}var ZA=Array.prototype.filter;function JA(){return Array.from(this.children)}function eC(e){return function(){return ZA.call(this.children,e)}}function tC(e){return this.selectAll(e==null?JA:eC(typeof e=="function"?e:fw(e)))}function nC(e){typeof e!="function"&&(e=hw(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Ut(r,this._parents)}function dw(e){return new Array(e.length)}function rC(){return new Ut(this._enter||this._groups.map(dw),this._parents)}function fu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fu.prototype={constructor:fu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function iC(e){return function(){return e}}function sC(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new fu(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function oC(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,h=s.length,f=new Array(c),d;for(a=0;a<c;++a)(l=t[a])&&(f[a]=d=o.call(l,l.__data__,a,t)+"",u.has(d)?i[a]=l:u.set(d,l));for(a=0;a<h;++a)d=o.call(e,s[a],a,s)+"",(l=u.get(d))?(r[a]=l,l.__data__=s[a],u.delete(d)):n[a]=new fu(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function aC(e){return e.__data__}function lC(e,t){if(!arguments.length)return Array.from(this,aC);var n=t?oC:sC,r=this._parents,i=this._groups;typeof e!="function"&&(e=iC(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],h=i[u],f=h.length,d=uC(e.call(c,c&&c.__data__,u,r)),v=d.length,y=a[u]=new Array(v),w=o[u]=new Array(v),p=l[u]=new Array(f);n(c,h,y,w,p,d,t);for(var m=0,g=0,_,T;m<v;++m)if(_=y[m]){for(m>=g&&(g=m+1);!(T=w[g])&&++g<v;);_._next=T||null}}return o=new Ut(o,r),o._enter=a,o._exit=l,o}function uC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cC(){return new Ut(this._exit||this._groups.map(dw),this._parents)}function hC(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],h=u.length,f=a[l]=new Array(h),d,v=0;v<h;++v)(d=u[v]||c[v])&&(f[v]=d);for(;l<i;++l)a[l]=n[l];return new Ut(a,this._parents)}function dC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pC(e){e||(e=mC);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new Ut(i,this._parents).order()}function mC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yC(){return Array.from(this)}function vC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function _C(){let e=0;for(const t of this)++e;return e}function wC(){return!this.node()}function EC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function SC(e){return function(){this.removeAttribute(e)}}function TC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xC(e,t){return function(){this.setAttribute(e,t)}}function IC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function AC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function CC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function RC(e,t){var n=nc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?TC:SC:typeof t=="function"?n.local?CC:AC:n.local?IC:xC)(n,t))}function pw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kC(e){return function(){this.style.removeProperty(e)}}function PC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function NC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function DC(e,t,n){return arguments.length>1?this.each((t==null?kC:typeof t=="function"?NC:PC)(e,t,n??"")):gs(this.node(),e)}function gs(e,t){return e.style.getPropertyValue(t)||pw(e).getComputedStyle(e,null).getPropertyValue(t)}function VC(e){return function(){delete this[e]}}function MC(e,t){return function(){this[e]=t}}function $C(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function OC(e,t){return arguments.length>1?this.each((t==null?VC:typeof t=="function"?$C:MC)(e,t)):this.node()[e]}function mw(e){return e.trim().split(/^|\s+/)}function wp(e){return e.classList||new gw(e)}function gw(e){this._node=e,this._names=mw(e.getAttribute("class")||"")}gw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yw(e,t){for(var n=wp(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function vw(e,t){for(var n=wp(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function LC(e){return function(){yw(this,e)}}function FC(e){return function(){vw(this,e)}}function bC(e,t){return function(){(t.apply(this,arguments)?yw:vw)(this,e)}}function zC(e,t){var n=mw(e+"");if(arguments.length<2){for(var r=wp(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?bC:t?LC:FC)(n,t))}function BC(){this.textContent=""}function UC(e){return function(){this.textContent=e}}function jC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function HC(e){return arguments.length?this.each(e==null?BC:(typeof e=="function"?jC:UC)(e)):this.node().textContent}function qC(){this.innerHTML=""}function WC(e){return function(){this.innerHTML=e}}function GC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function KC(e){return arguments.length?this.each(e==null?qC:(typeof e=="function"?GC:WC)(e)):this.node().innerHTML}function QC(){this.nextSibling&&this.parentNode.appendChild(this)}function YC(){return this.each(QC)}function XC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZC(){return this.each(XC)}function JC(e){var t=typeof e=="function"?e:uw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function eR(){return null}function tR(e,t){var n=typeof e=="function"?e:uw(e),r=t==null?eR:typeof t=="function"?t:_p(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function nR(){var e=this.parentNode;e&&e.removeChild(this)}function rR(){return this.each(nR)}function iR(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sR(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oR(e){return this.select(e?sR:iR)}function aR(e){return arguments.length?this.property("__data__",e):this.node().__data__}function lR(e){return function(t){e.call(this,t,this.__data__)}}function uR(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function cR(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function hR(e,t,n){return function(){var r=this.__on,i,s=lR(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function fR(e,t,n){var r=uR(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?hR:cR,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function _w(e,t,n){var r=pw(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dR(e,t){return function(){return _w(this,e,t)}}function pR(e,t){return function(){return _w(this,e,t.apply(this,arguments))}}function mR(e,t){return this.each((typeof t=="function"?pR:dR)(e,t))}function*gR(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var ww=[null];function Ut(e,t){this._groups=e,this._parents=t}function Ta(){return new Ut([[document.documentElement]],ww)}function yR(){return this}Ut.prototype=Ta.prototype={constructor:Ut,select:jA,selectAll:GA,selectChild:XA,selectChildren:tC,filter:nC,data:lC,enter:rC,exit:cC,join:hC,merge:fC,selection:yR,order:dC,sort:pC,call:gC,nodes:yC,node:vC,size:_C,empty:wC,each:EC,attr:RC,style:DC,property:OC,classed:zC,text:HC,html:KC,raise:YC,lower:ZC,append:JC,insert:tR,remove:rR,clone:oR,datum:aR,on:fR,dispatch:mR,[Symbol.iterator]:gR};function ln(e){return typeof e=="string"?new Ut([[document.querySelector(e)]],[document.documentElement]):new Ut([[e]],ww)}function vR(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Sn(e,t){if(e=vR(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const _R={passive:!1},Qo={capture:!0,passive:!1};function dh(e){e.stopImmediatePropagation()}function es(e){e.preventDefault(),e.stopImmediatePropagation()}function Ew(e){var t=e.document.documentElement,n=ln(e).on("dragstart.drag",es,Qo);"onselectstart"in t?n.on("selectstart.drag",es,Qo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Sw(e,t){var n=e.document.documentElement,r=ln(e).on("dragstart.drag",null);t&&(r.on("click.drag",es,Qo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const il=e=>()=>e;function Mf(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Mf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function wR(e){return!e.ctrlKey&&!e.button}function ER(){return this.parentNode}function SR(e,t){return t??{x:e.x,y:e.y}}function TR(){return navigator.maxTouchPoints||"ontouchstart"in this}function xR(){var e=wR,t=ER,n=SR,r=TR,i={},s=tc("start","drag","end"),o=0,a,l,u,c,h=0;function f(_){_.on("mousedown.drag",d).filter(r).on("touchstart.drag",w).on("touchmove.drag",p,_R).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(_,T){if(!(c||!e.call(this,_,T))){var I=g(this,t.call(this,_,T),_,T,"mouse");I&&(ln(_.view).on("mousemove.drag",v,Qo).on("mouseup.drag",y,Qo),Ew(_.view),dh(_),u=!1,a=_.clientX,l=_.clientY,I("start",_))}}function v(_){if(es(_),!u){var T=_.clientX-a,I=_.clientY-l;u=T*T+I*I>h}i.mouse("drag",_)}function y(_){ln(_.view).on("mousemove.drag mouseup.drag",null),Sw(_.view,u),es(_),i.mouse("end",_)}function w(_,T){if(e.call(this,_,T)){var I=_.changedTouches,A=t.call(this,_,T),R=I.length,$,O;for($=0;$<R;++$)(O=g(this,A,_,T,I[$].identifier,I[$]))&&(dh(_),O("start",_,I[$]))}}function p(_){var T=_.changedTouches,I=T.length,A,R;for(A=0;A<I;++A)(R=i[T[A].identifier])&&(es(_),R("drag",_,T[A]))}function m(_){var T=_.changedTouches,I=T.length,A,R;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<I;++A)(R=i[T[A].identifier])&&(dh(_),R("end",_,T[A]))}function g(_,T,I,A,R,$){var O=s.copy(),B=Sn($||I,T),q,D,E;if((E=n.call(_,new Mf("beforestart",{sourceEvent:I,target:f,identifier:R,active:o,x:B[0],y:B[1],dx:0,dy:0,dispatch:O}),A))!=null)return q=E.x-B[0]||0,D=E.y-B[1]||0,function N(k,b,x){var S=B,C;switch(k){case"start":i[R]=N,C=o++;break;case"end":delete i[R],--o;case"drag":B=Sn(x||b,T),C=o;break}O.call(k,_,new Mf(k,{sourceEvent:b,subject:E,target:f,identifier:R,active:C,x:B[0]+q,y:B[1]+D,dx:B[0]-S[0],dy:B[1]-S[1],dispatch:O}),A)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:il(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:il(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:il(_),f):n},f.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:il(!!_),f):r},f.on=function(){var _=s.on.apply(s,arguments);return _===s?f:_},f.clickDistance=function(_){return arguments.length?(h=(_=+_)*_,f):Math.sqrt(h)},f}function Ep(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Tw(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xa(){}var Yo=.7,du=1/Yo,ts="\\s*([+-]?\\d+)\\s*",Xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IR=/^#([0-9a-f]{3,8})$/,AR=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),CR=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),RR=new RegExp(`^rgba\\(${ts},${ts},${ts},${Xo}\\)$`),kR=new RegExp(`^rgba\\(${kn},${kn},${kn},${Xo}\\)$`),PR=new RegExp(`^hsl\\(${Xo},${kn},${kn}\\)$`),NR=new RegExp(`^hsla\\(${Xo},${kn},${kn},${Xo}\\)$`),Zg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ep(xa,Zo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jg,formatHex:Jg,formatHex8:DR,formatHsl:VR,formatRgb:ey,toString:ey});function Jg(){return this.rgb().formatHex()}function DR(){return this.rgb().formatHex8()}function VR(){return xw(this).formatHsl()}function ey(){return this.rgb().formatRgb()}function Zo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=IR.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ty(t):n===3?new Dt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AR.exec(e))?new Dt(t[1],t[2],t[3],1):(t=CR.exec(e))?new Dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RR.exec(e))?sl(t[1],t[2],t[3],t[4]):(t=kR.exec(e))?sl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=PR.exec(e))?iy(t[1],t[2]/100,t[3]/100,1):(t=NR.exec(e))?iy(t[1],t[2]/100,t[3]/100,t[4]):Zg.hasOwnProperty(e)?ty(Zg[e]):e==="transparent"?new Dt(NaN,NaN,NaN,0):null}function ty(e){return new Dt(e>>16&255,e>>8&255,e&255,1)}function sl(e,t,n,r){return r<=0&&(e=t=n=NaN),new Dt(e,t,n,r)}function MR(e){return e instanceof xa||(e=Zo(e)),e?(e=e.rgb(),new Dt(e.r,e.g,e.b,e.opacity)):new Dt}function $f(e,t,n,r){return arguments.length===1?MR(e):new Dt(e,t,n,r??1)}function Dt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ep(Dt,$f,Tw(xa,{brighter(e){return e=e==null?du:Math.pow(du,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yo:Math.pow(Yo,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Dt(ri(this.r),ri(this.g),ri(this.b),pu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ny,formatHex:ny,formatHex8:$R,formatRgb:ry,toString:ry}));function ny(){return`#${Yr(this.r)}${Yr(this.g)}${Yr(this.b)}`}function $R(){return`#${Yr(this.r)}${Yr(this.g)}${Yr(this.b)}${Yr((isNaN(this.opacity)?1:this.opacity)*255)}`}function ry(){const e=pu(this.opacity);return`${e===1?"rgb(":"rgba("}${ri(this.r)}, ${ri(this.g)}, ${ri(this.b)}${e===1?")":`, ${e})`}`}function pu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ri(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yr(e){return e=ri(e),(e<16?"0":"")+e.toString(16)}function iy(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,r)}function xw(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof xa||(e=Zo(e)),!e)return new un;if(e instanceof un)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new un(o,a,l,e.opacity)}function OR(e,t,n,r){return arguments.length===1?xw(e):new un(e,t,n,r??1)}function un(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ep(un,OR,Tw(xa,{brighter(e){return e=e==null?du:Math.pow(du,e),new un(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yo:Math.pow(Yo,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Dt(ph(e>=240?e-240:e+120,i,r),ph(e,i,r),ph(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new un(sy(this.h),ol(this.s),ol(this.l),pu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pu(this.opacity);return`${e===1?"hsl(":"hsla("}${sy(this.h)}, ${ol(this.s)*100}%, ${ol(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sy(e){return e=(e||0)%360,e<0?e+360:e}function ol(e){return Math.max(0,Math.min(1,e||0))}function ph(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Iw=e=>()=>e;function LR(e,t){return function(n){return e+n*t}}function FR(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bR(e){return(e=+e)==1?Aw:function(t,n){return n-t?FR(t,n,e):Iw(isNaN(t)?n:t)}}function Aw(e,t){var n=t-e;return n?LR(e,n):Iw(isNaN(e)?t:e)}const oy=function e(t){var n=bR(t);function r(i,s){var o=n((i=$f(i)).r,(s=$f(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=Aw(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function or(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Of=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mh=new RegExp(Of.source,"g");function zR(e){return function(){return e}}function BR(e){return function(t){return e(t)+""}}function UR(e,t){var n=Of.lastIndex=mh.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Of.exec(e))&&(i=mh.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:or(r,i)})),n=mh.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?BR(l[0].x):zR(t):(t=l.length,function(u){for(var c=0,h;c<t;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var ay=180/Math.PI,Lf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cw(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ay,skewX:Math.atan(l)*ay,scaleX:o,scaleY:a}}var al;function jR(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Lf:Cw(t.a,t.b,t.c,t.d,t.e,t.f)}function HR(e){return e==null||(al||(al=document.createElementNS("http://www.w3.org/2000/svg","g")),al.setAttribute("transform",e),!(e=al.transform.baseVal.consolidate()))?Lf:(e=e.matrix,Cw(e.a,e.b,e.c,e.d,e.e,e.f))}function Rw(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,h,f,d,v){if(u!==h||c!==f){var y=d.push("translate(",null,t,null,n);v.push({i:y-4,x:or(u,h)},{i:y-2,x:or(c,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:or(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:or(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,d,v){if(u!==h||c!==f){var y=d.push(i(d)+"scale(",null,",",null,")");v.push({i:y-4,x:or(u,h)},{i:y-2,x:or(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,f),o(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var v=-1,y=f.length,w;++v<y;)h[(w=f[v]).i]=w.x(d);return h.join("")}}}var qR=Rw(jR,"px, ","px)","deg)"),WR=Rw(HR,", ",")",")"),GR=1e-12;function ly(e){return((e=Math.exp(e))+1/e)/2}function KR(e){return((e=Math.exp(e))-1/e)/2}function QR(e){return((e=Math.exp(2*e))-1)/(e+1)}const YR=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],h=o[1],f=o[2],d=c-a,v=h-l,y=d*d+v*v,w,p;if(y<GR)p=Math.log(f/u)/t,w=function(A){return[a+A*d,l+A*v,u*Math.exp(t*A*p)]};else{var m=Math.sqrt(y),g=(f*f-u*u+r*y)/(2*u*n*m),_=(f*f-u*u-r*y)/(2*f*n*m),T=Math.log(Math.sqrt(g*g+1)-g),I=Math.log(Math.sqrt(_*_+1)-_);p=(I-T)/t,w=function(A){var R=A*p,$=ly(T),O=u/(n*m)*($*QR(t*R+T)-KR(T));return[a+O*d,l+O*v,u*$/ly(t*R+T)]}}return w.duration=p*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var ys=0,uo=0,Ys=0,kw=1e3,mu,co,gu=0,ci=0,rc=0,Jo=typeof performance=="object"&&performance.now?performance:Date,Pw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sp(){return ci||(Pw(XR),ci=Jo.now()+rc)}function XR(){ci=0}function yu(){this._call=this._time=this._next=null}yu.prototype=Nw.prototype={constructor:yu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Sp():+n)+(t==null?0:+t),!this._next&&co!==this&&(co?co._next=this:mu=this,co=this),this._call=e,this._time=n,Ff()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ff())}};function Nw(e,t,n){var r=new yu;return r.restart(e,t,n),r}function ZR(){Sp(),++ys;for(var e=mu,t;e;)(t=ci-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ys}function uy(){ci=(gu=Jo.now())+rc,ys=uo=0;try{ZR()}finally{ys=0,ek(),ci=0}}function JR(){var e=Jo.now(),t=e-gu;t>kw&&(rc-=t,gu=e)}function ek(){for(var e,t=mu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mu=n);co=e,Ff(r)}function Ff(e){if(!ys){uo&&(uo=clearTimeout(uo));var t=e-ci;t>24?(e<1/0&&(uo=setTimeout(uy,e-Jo.now()-rc)),Ys&&(Ys=clearInterval(Ys))):(Ys||(gu=Jo.now(),Ys=setInterval(JR,kw)),ys=1,Pw(uy))}}function cy(e,t,n){var r=new yu;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var tk=tc("start","end","cancel","interrupt"),nk=[],Dw=0,hy=1,bf=2,$l=3,fy=4,zf=5,Ol=6;function ic(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;rk(e,n,{name:t,index:r,group:i,on:tk,tween:nk,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Dw})}function Tp(e,t){var n=yn(e,t);if(n.state>Dw)throw new Error("too late; already scheduled");return n}function Vn(e,t){var n=yn(e,t);if(n.state>$l)throw new Error("too late; already running");return n}function yn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rk(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Nw(s,0,n.time);function s(u){n.state=hy,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,h,f,d;if(n.state!==hy)return l();for(c in r)if(d=r[c],d.name===n.name){if(d.state===$l)return cy(o);d.state===fy?(d.state=Ol,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Ol,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(cy(function(){n.state===$l&&(n.state=fy,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=bf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bf){for(n.state=$l,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=zf,1),h=-1,f=i.length;++h<f;)i[h].call(e,c);n.state===zf&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ol,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ll(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>bf&&r.state<zf,r.state=Ol,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function ik(e){return this.each(function(){Ll(this,e)})}function sk(e,t){var n,r;return function(){var i=Vn(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ok(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Vn(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function ak(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=yn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?sk:ok)(n,e,t))}function xp(e,t,n){var r=e._id;return e.each(function(){var i=Vn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return yn(i,r).value[t]}}function Vw(e,t){var n;return(typeof t=="number"?or:t instanceof Zo?oy:(n=Zo(t))?(t=n,oy):UR)(e,t)}function lk(e){return function(){this.removeAttribute(e)}}function uk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ck(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function hk(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function fk(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function dk(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function pk(e,t){var n=nc(e),r=n==="transform"?WR:Vw;return this.attrTween(e,typeof t=="function"?(n.local?dk:fk)(n,r,xp(this,"attr."+e,t)):t==null?(n.local?uk:lk)(n):(n.local?hk:ck)(n,r,t))}function mk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gk(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yk(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&gk(e,s)),n}return i._value=t,i}function vk(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mk(e,s)),n}return i._value=t,i}function _k(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=nc(e);return this.tween(n,(r.local?yk:vk)(r,t))}function wk(e,t){return function(){Tp(this,e).delay=+t.apply(this,arguments)}}function Ek(e,t){return t=+t,function(){Tp(this,e).delay=t}}function Sk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wk:Ek)(t,e)):yn(this.node(),t).delay}function Tk(e,t){return function(){Vn(this,e).duration=+t.apply(this,arguments)}}function xk(e,t){return t=+t,function(){Vn(this,e).duration=t}}function Ik(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tk:xk)(t,e)):yn(this.node(),t).duration}function Ak(e,t){if(typeof t!="function")throw new Error;return function(){Vn(this,e).ease=t}}function Ck(e){var t=this._id;return arguments.length?this.each(Ak(t,e)):yn(this.node(),t).ease}function Rk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vn(this,e).ease=n}}function kk(e){if(typeof e!="function")throw new Error;return this.each(Rk(this._id,e))}function Pk(e){typeof e!="function"&&(e=hw(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Qn(r,this._parents,this._name,this._id)}function Nk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,h=o[a]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;a<r;++a)o[a]=t[a];return new Qn(o,this._parents,this._name,this._id)}function Dk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Vk(e,t,n){var r,i,s=Dk(t)?Tp:Vn;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Mk(e,t){var n=this._id;return arguments.length<2?yn(this.node(),n).on.on(e):this.each(Vk(n,e,t))}function $k(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ok(){return this.on("end.remove",$k(this._id))}function Lk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_p(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,h,f=0;f<l;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,ic(u[f],t,n,f,u,yn(c,n)));return new Qn(s,this._parents,t,n)}function Fk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cw(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=e.call(c,c.__data__,h,l),d,v=yn(c,n),y=0,w=f.length;y<w;++y)(d=f[y])&&ic(d,t,n,y,f,v);s.push(f),o.push(c)}return new Qn(s,o,t,n)}var bk=Ta.prototype.constructor;function zk(){return new bk(this._groups,this._parents)}function Bk(e,t){var n,r,i;return function(){var s=gs(this,e),o=(this.style.removeProperty(e),gs(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Mw(e){return function(){this.style.removeProperty(e)}}function Uk(e,t,n){var r,i=n+"",s;return function(){var o=gs(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function jk(e,t,n){var r,i,s;return function(){var o=gs(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),gs(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function Hk(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Vn(this,e),u=l.on,c=l.value[s]==null?a||(a=Mw(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function qk(e,t,n){var r=(e+="")=="transform"?qR:Vw;return t==null?this.styleTween(e,Bk(e,r)).on("end.style."+e,Mw(e)):typeof t=="function"?this.styleTween(e,jk(e,r,xp(this,"style."+e,t))).each(Hk(this._id,e)):this.styleTween(e,Uk(e,r,t),n).on("end.style."+e,null)}function Wk(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Gk(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Wk(e,o,n)),r}return s._value=t,s}function Kk(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Gk(e,t,n??""))}function Qk(e){return function(){this.textContent=e}}function Yk(e){return function(){var t=e(this);this.textContent=t??""}}function Xk(e){return this.tween("text",typeof e=="function"?Yk(xp(this,"text",e)):Qk(e==null?"":e+""))}function Zk(e){return function(t){this.textContent=e.call(this,t)}}function Jk(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Zk(i)),t}return r._value=e,r}function eP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Jk(e))}function tP(){for(var e=this._name,t=this._id,n=$w(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=yn(l,t);ic(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qn(r,this._parents,e,n)}function nP(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Vn(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var rP=0;function Qn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $w(){return++rP}var $n=Ta.prototype;Qn.prototype={constructor:Qn,select:Lk,selectAll:Fk,selectChild:$n.selectChild,selectChildren:$n.selectChildren,filter:Pk,merge:Nk,selection:zk,transition:tP,call:$n.call,nodes:$n.nodes,node:$n.node,size:$n.size,empty:$n.empty,each:$n.each,on:Mk,attr:pk,attrTween:_k,style:qk,styleTween:Kk,text:Xk,textTween:eP,remove:Ok,tween:ak,delay:Sk,duration:Ik,ease:Ck,easeVarying:kk,end:nP,[Symbol.iterator]:$n[Symbol.iterator]};function iP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sP={time:null,delay:0,duration:250,ease:iP};function oP(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function aP(e){var t,n;e instanceof Qn?(t=e._id,e=e._name):(t=$w(),(n=sP).time=Sp(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&ic(l,e,t,u,o,n||oP(l,t));return new Qn(r,this._parents,e,t)}Ta.prototype.interrupt=ik;Ta.prototype.transition=aP;const ll=e=>()=>e;function lP(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function zn(e,t,n){this.k=e,this.x=t,this.y=n}zn.prototype={constructor:zn,scale:function(e){return e===1?this:new zn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new zn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sr=new zn(1,0,0);zn.prototype;function gh(e){e.stopImmediatePropagation()}function Xs(e){e.preventDefault(),e.stopImmediatePropagation()}function uP(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cP(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function dy(){return this.__zoom||Sr}function hP(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fP(){return navigator.maxTouchPoints||"ontouchstart"in this}function dP(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function pP(){var e=uP,t=cP,n=dP,r=hP,i=fP,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=YR,u=tc("start","zoom","end"),c,h,f,d=500,v=150,y=0,w=10;function p(E){E.property("__zoom",dy).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",B).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(E,N,k,b){var x=E.selection?E.selection():E;x.property("__zoom",dy),E!==x?T(E,N,k,b):x.interrupt().each(function(){I(this,arguments).event(b).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},p.scaleBy=function(E,N,k,b){p.scaleTo(E,function(){var x=this.__zoom.k,S=typeof N=="function"?N.apply(this,arguments):N;return x*S},k,b)},p.scaleTo=function(E,N,k,b){p.transform(E,function(){var x=t.apply(this,arguments),S=this.__zoom,C=k==null?_(x):typeof k=="function"?k.apply(this,arguments):k,M=S.invert(C),U=typeof N=="function"?N.apply(this,arguments):N;return n(g(m(S,U),C,M),x,o)},k,b)},p.translateBy=function(E,N,k,b){p.transform(E,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),o)},null,b)},p.translateTo=function(E,N,k,b,x){p.transform(E,function(){var S=t.apply(this,arguments),C=this.__zoom,M=b==null?_(S):typeof b=="function"?b.apply(this,arguments):b;return n(Sr.translate(M[0],M[1]).scale(C.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof k=="function"?-k.apply(this,arguments):-k),S,o)},b,x)};function m(E,N){return N=Math.max(s[0],Math.min(s[1],N)),N===E.k?E:new zn(N,E.x,E.y)}function g(E,N,k){var b=N[0]-k[0]*E.k,x=N[1]-k[1]*E.k;return b===E.x&&x===E.y?E:new zn(E.k,b,x)}function _(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function T(E,N,k,b){E.on("start.zoom",function(){I(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(b).end()}).tween("zoom",function(){var x=this,S=arguments,C=I(x,S).event(b),M=t.apply(x,S),U=k==null?_(M):typeof k=="function"?k.apply(x,S):k,Y=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),Q=x.__zoom,se=typeof N=="function"?N.apply(x,S):N,he=l(Q.invert(U).concat(Y/Q.k),se.invert(U).concat(Y/se.k));return function(pe){if(pe===1)pe=se;else{var Ee=he(pe),Re=Y/Ee[2];pe=new zn(Re,U[0]-Ee[0]*Re,U[1]-Ee[1]*Re)}C.zoom(null,pe)}})}function I(E,N,k){return!k&&E.__zooming||new A(E,N)}function A(E,N){this.that=E,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,N),this.taps=0}A.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,N){return this.mouse&&E!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var N=ln(this.that).datum();u.call(E,this.that,new lP(E,{sourceEvent:this.sourceEvent,target:p,type:E,transform:this.that.__zoom,dispatch:u}),N)}};function R(E,...N){if(!e.apply(this,arguments))return;var k=I(this,N).event(E),b=this.__zoom,x=Math.max(s[0],Math.min(s[1],b.k*Math.pow(2,r.apply(this,arguments)))),S=Sn(E);if(k.wheel)(k.mouse[0][0]!==S[0]||k.mouse[0][1]!==S[1])&&(k.mouse[1]=b.invert(k.mouse[0]=S)),clearTimeout(k.wheel);else{if(b.k===x)return;k.mouse=[S,b.invert(S)],Ll(this),k.start()}Xs(E),k.wheel=setTimeout(C,v),k.zoom("mouse",n(g(m(b,x),k.mouse[0],k.mouse[1]),k.extent,o));function C(){k.wheel=null,k.end()}}function $(E,...N){if(f||!e.apply(this,arguments))return;var k=E.currentTarget,b=I(this,N,!0).event(E),x=ln(E.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",Y,!0),S=Sn(E,k),C=E.clientX,M=E.clientY;Ew(E.view),gh(E),b.mouse=[S,this.__zoom.invert(S)],Ll(this),b.start();function U(Q){if(Xs(Q),!b.moved){var se=Q.clientX-C,he=Q.clientY-M;b.moved=se*se+he*he>y}b.event(Q).zoom("mouse",n(g(b.that.__zoom,b.mouse[0]=Sn(Q,k),b.mouse[1]),b.extent,o))}function Y(Q){x.on("mousemove.zoom mouseup.zoom",null),Sw(Q.view,b.moved),Xs(Q),b.event(Q).end()}}function O(E,...N){if(e.apply(this,arguments)){var k=this.__zoom,b=Sn(E.changedTouches?E.changedTouches[0]:E,this),x=k.invert(b),S=k.k*(E.shiftKey?.5:2),C=n(g(m(k,S),b,x),t.apply(this,N),o);Xs(E),a>0?ln(this).transition().duration(a).call(T,C,b,E):ln(this).call(p.transform,C,b,E)}}function B(E,...N){if(e.apply(this,arguments)){var k=E.touches,b=k.length,x=I(this,N,E.changedTouches.length===b).event(E),S,C,M,U;for(gh(E),C=0;C<b;++C)M=k[C],U=Sn(M,this),U=[U,this.__zoom.invert(U),M.identifier],x.touch0?!x.touch1&&x.touch0[2]!==U[2]&&(x.touch1=U,x.taps=0):(x.touch0=U,S=!0,x.taps=1+!!c);c&&(c=clearTimeout(c)),S&&(x.taps<2&&(h=U[0],c=setTimeout(function(){c=null},d)),Ll(this),x.start())}}function q(E,...N){if(this.__zooming){var k=I(this,N).event(E),b=E.changedTouches,x=b.length,S,C,M,U;for(Xs(E),S=0;S<x;++S)C=b[S],M=Sn(C,this),k.touch0&&k.touch0[2]===C.identifier?k.touch0[0]=M:k.touch1&&k.touch1[2]===C.identifier&&(k.touch1[0]=M);if(C=k.that.__zoom,k.touch1){var Y=k.touch0[0],Q=k.touch0[1],se=k.touch1[0],he=k.touch1[1],pe=(pe=se[0]-Y[0])*pe+(pe=se[1]-Y[1])*pe,Ee=(Ee=he[0]-Q[0])*Ee+(Ee=he[1]-Q[1])*Ee;C=m(C,Math.sqrt(pe/Ee)),M=[(Y[0]+se[0])/2,(Y[1]+se[1])/2],U=[(Q[0]+he[0])/2,(Q[1]+he[1])/2]}else if(k.touch0)M=k.touch0[0],U=k.touch0[1];else return;k.zoom("touch",n(g(C,M,U),k.extent,o))}}function D(E,...N){if(this.__zooming){var k=I(this,N).event(E),b=E.changedTouches,x=b.length,S,C;for(gh(E),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),S=0;S<x;++S)C=b[S],k.touch0&&k.touch0[2]===C.identifier?delete k.touch0:k.touch1&&k.touch1[2]===C.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(C=Sn(C,this),Math.hypot(h[0]-C[0],h[1]-C[1])<w)){var M=ln(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return p.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:ll(+E),p):r},p.filter=function(E){return arguments.length?(e=typeof E=="function"?E:ll(!!E),p):e},p.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:ll(!!E),p):i},p.extent=function(E){return arguments.length?(t=typeof E=="function"?E:ll([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),p):t},p.scaleExtent=function(E){return arguments.length?(s[0]=+E[0],s[1]=+E[1],p):[s[0],s[1]]},p.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(E){return arguments.length?(n=E,p):n},p.duration=function(E){return arguments.length?(a=+E,p):a},p.interpolate=function(E){return arguments.length?(l=E,p):l},p.on=function(){var E=u.on.apply(u,arguments);return E===u?p:E},p.clickDistance=function(E){return arguments.length?(y=(E=+E)*E,p):Math.sqrt(y)},p.tapDistance=function(E){return arguments.length?(w=+E,p):w},p}const sc=P.createContext(null),mP=sc.Provider,Yn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ow=Yn.error001();function Fe(e,t){const n=P.useContext(sc);if(n===null)throw new Error(Ow);return lw(n,e,t)}const tt=()=>{const e=P.useContext(sc);if(e===null)throw new Error(Ow);return P.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},gP=e=>e.userSelectionActive?"none":"all";function Lw({position:e,children:t,className:n,style:r,...i}){const s=Fe(gP),o=`${e}`.split("-");return V.createElement("div",{className:kt(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},t)}function yP({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:V.createElement(Lw,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const vP=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const h=P.useRef(null),[f,d]=P.useState({x:0,y:0,width:0,height:0}),v=kt(["react-flow__edge-textwrapper",u]);return P.useEffect(()=>{if(h.current){const y=h.current.getBBox();d({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:V.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:v,visibility:f.width?"visible":"hidden",...c},i&&V.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),V.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:r},n),l)};var _P=P.memo(vP);const Ip=e=>({width:e.offsetWidth,height:e.offsetHeight}),vs=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ap=(e={x:0,y:0},t)=>({x:vs(e.x,t[0][0],t[1][0]),y:vs(e.y,t[0][1],t[1][1])}),py=(e,t,n)=>e<t?vs(Math.abs(e-t),1,50)/50:e>n?-vs(Math.abs(e-n),1,50)/50:0,Fw=(e,t)=>{const n=py(e.x,35,t.width-35)*20,r=py(e.y,35,t.height-35)*20;return[n,r]},bw=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},wP=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Cp=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),EP=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),my=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Bf=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},SP=e=>Xt(e.width)&&Xt(e.height)&&Xt(e.x)&&Xt(e.y),Xt=e=>!isNaN(e)&&isFinite(e),Qe=Symbol.for("internals"),zw=["Enter"," ","Escape"],TP=(e,t)=>{},xP=e=>"nativeEvent"in e;function Uf(e){var i,s;const t=xP(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Bw=e=>"clientX"in e,Tr=(e,t)=>{var s,o;const n=Bw(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},vu=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Ia=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:f,interactionWidth:d=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),d&&V.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),i&&Xt(n)&&Xt(r)?V.createElement(_P,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);Ia.displayName="BaseEdge";function Zs(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function Uw({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function jw({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),h=Math.abs(u-t);return[l,u,c,h]}var hi;(function(e){e.Strict="strict",e.Loose="loose"})(hi||(hi={}));var Xr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Xr||(Xr={}));var ea;(function(e){e.Partial="partial",e.Full="full"})(ea||(ea={}));var cr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(cr||(cr={}));var _u;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(_u||(_u={}));var ee;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ee||(ee={}));function gy({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ee.Left||e===ee.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Hw({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:i,targetPosition:s=ee.Top}){const[o,a]=gy({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=gy({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,h,f,d]=jw({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${o},${a} ${l},${u} ${r},${i}`,c,h,f,d]}const Rp=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=ee.Bottom,targetPosition:s=ee.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:d,markerStart:v,interactionWidth:y})=>{const[w,p,m]=Hw({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return V.createElement(Ia,{path:w,labelX:p,labelY:m,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:d,markerStart:v,interactionWidth:y})});Rp.displayName="SimpleBezierEdge";const yy={[ee.Left]:{x:-1,y:0},[ee.Right]:{x:1,y:0},[ee.Top]:{x:0,y:-1},[ee.Bottom]:{x:0,y:1}},IP=({source:e,sourcePosition:t=ee.Bottom,target:n})=>t===ee.Left||t===ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vy=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function AP({source:e,sourcePosition:t=ee.Bottom,target:n,targetPosition:r=ee.Top,center:i,offset:s}){const o=yy[t],a=yy[r],l={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=IP({source:l,sourcePosition:t,target:u}),h=c.x!==0?"x":"y",f=c[h];let d=[],v,y;const w={x:0,y:0},p={x:0,y:0},[m,g,_,T]=Uw({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[h]*a[h]===-1){v=i.x||m,y=i.y||g;const A=[{x:v,y:l.y},{x:v,y:u.y}],R=[{x:l.x,y},{x:u.x,y}];o[h]===f?d=h==="x"?A:R:d=h==="x"?R:A}else{const A=[{x:l.x,y:u.y}],R=[{x:u.x,y:l.y}];if(h==="x"?d=o.x===f?R:A:d=o.y===f?A:R,t===r){const D=Math.abs(e[h]-n[h]);if(D<=s){const E=Math.min(s-1,s-D);o[h]===f?w[h]=(l[h]>e[h]?-1:1)*E:p[h]=(u[h]>n[h]?-1:1)*E}}if(t!==r){const D=h==="x"?"y":"x",E=o[h]===a[D],N=l[D]>u[D],k=l[D]<u[D];(o[h]===1&&(!E&&N||E&&k)||o[h]!==1&&(!E&&k||E&&N))&&(d=h==="x"?A:R)}const $={x:l.x+w.x,y:l.y+w.y},O={x:u.x+p.x,y:u.y+p.y},B=Math.max(Math.abs($.x-d[0].x),Math.abs(O.x-d[0].x)),q=Math.max(Math.abs($.y-d[0].y),Math.abs(O.y-d[0].y));B>=q?(v=($.x+O.x)/2,y=d[0].y):(v=d[0].x,y=($.y+O.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...d,{x:u.x+p.x,y:u.y+p.y},n],v,y,_,T]}function CP(e,t,n,r){const i=Math.min(vy(e,t)/2,vy(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function jf({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:i,targetPosition:s=ee.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20}){const[c,h,f,d,v]=AP({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u});return[c.reduce((w,p,m)=>{let g="";return m>0&&m<c.length-1?g=CP(c[m-1],p,c[m+1],o):g=`${m===0?"M":"L"}${p.x} ${p.y}`,w+=g,w},""),h,f,d,v]}const oc=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:h=ee.Bottom,targetPosition:f=ee.Top,markerEnd:d,markerStart:v,pathOptions:y,interactionWidth:w})=>{const[p,m,g]=jf({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:r,targetPosition:f,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return V.createElement(Ia,{path:p,labelX:m,labelY:g,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:v,interactionWidth:w})});oc.displayName="SmoothStepEdge";const kp=P.memo(e=>{var t;return V.createElement(oc,{...e,pathOptions:P.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});kp.displayName="StepEdge";function RP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=Uw({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Pp=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:f,interactionWidth:d})=>{const[v,y,w]=RP({sourceX:e,sourceY:t,targetX:n,targetY:r});return V.createElement(Ia,{path:v,labelX:y,labelY:w,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:f,interactionWidth:d})});Pp.displayName="StraightEdge";function ul(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _y({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case ee.Left:return[t-ul(t-r,s),n];case ee.Right:return[t+ul(r-t,s),n];case ee.Top:return[t,n-ul(n-i,s)];case ee.Bottom:return[t,n+ul(i-n,s)]}}function qw({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:i,targetPosition:s=ee.Top,curvature:o=.25}){const[a,l]=_y({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,c]=_y({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[h,f,d,v]=jw({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${i}`,h,f,d,v]}const wu=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=ee.Bottom,targetPosition:s=ee.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:d,markerStart:v,pathOptions:y,interactionWidth:w})=>{const[p,m,g]=qw({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:y==null?void 0:y.curvature});return V.createElement(Ia,{path:p,labelX:m,labelY:g,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:d,markerStart:v,interactionWidth:w})});wu.displayName="BezierEdge";const Np=P.createContext(null),kP=Np.Provider;Np.Consumer;const PP=()=>P.useContext(Np),NP=e=>"id"in e&&"source"in e&&"target"in e,DP=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Hf=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,VP=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ww=(e,t)=>{if(!e.source||!e.target)return t;let n;return NP(e)?n={...e}:n={...e,id:DP(e)},VP(n,t)?t:t.concat(n)},qf=({x:e,y:t},[n,r,i],s,[o,a])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},Gw=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),ns=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Dp=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:o}=ns(i,t).positionAbsolute;return wP(r,Cp({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return EP(n)},Kw=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(c=>{const{width:h,height:f,selectable:d=!0,hidden:v=!1}=c;if(o&&!d||v)return!1;const{positionAbsolute:y}=ns(c,a),w={x:y.x,y:y.y,width:h||0,height:f||0},p=Bf(l,w),m=typeof h>"u"||typeof f>"u"||h===null||f===null,g=s&&p>0,_=(h||0)*(f||0);(m||g||p>=_||c.dragging)&&u.push(c)}),u},Qw=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Yw=(e,t,n,r,i,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),l=Math.min(o,a),u=vs(l,r,i),c=e.x+e.width/2,h=e.y+e.height/2,f=t/2-c*u,d=n/2-h*u;return{x:f,y:d,zoom:u}},qr=(e,t=0)=>e.transition().duration(t);function wy(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function MP(e,t,n,r,i,s){const{x:o,y:a}=Tr(e),u=t.elementsFromPoint(o,a).find(v=>v.classList.contains("react-flow__handle"));if(u){const v=u.getAttribute("data-nodeid");if(v){const y=Vp(void 0,u),w=u.getAttribute("data-handleid"),p=s({nodeId:v,id:w,type:y});if(p){const m=i.find(g=>g.nodeId===v&&g.type===y&&g.id===w);return{handle:{id:w,type:y,nodeId:v,x:(m==null?void 0:m.x)||n.x,y:(m==null?void 0:m.y)||n.y},validHandleResult:p}}}}let c=[],h=1/0;if(i.forEach(v=>{const y=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(y<=r){const w=s(v);y<=h&&(y<h?c=[{handle:v,validHandleResult:w}]:y===h&&c.push({handle:v,validHandleResult:w}),h=y)}}),!c.length)return{handle:null,validHandleResult:Xw()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:v})=>v.isValid),d=c.some(({handle:v})=>v.type==="target");return c.find(({handle:v,validHandleResult:y})=>d?v.type==="target":f?y.isValid:!0)||c[0]}const $P={source:null,target:null,sourceHandle:null,targetHandle:null},Xw=()=>({handleDomNode:null,isValid:!1,connection:$P,endHandle:null});function Zw(e,t,n,r,i,s,o){const a=i==="target",l=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Xw(),handleDomNode:l};if(l){const c=Vp(void 0,l),h=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),v=l.classList.contains("connectableend"),y={source:a?h:n,sourceHandle:a?f:r,target:a?n:h,targetHandle:a?r:f};u.connection=y,d&&v&&(t===hi.Strict?a&&c==="source"||!a&&c==="target":h!==n||f!==r)&&(u.endHandle={nodeId:h,handleId:f,type:c},u.isValid=s(y))}return u}function OP({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[Qe]){const{handleBounds:o}=s[Qe];let a=[],l=[];o&&(a=wy(s,o,"source",`${t}-${n}-${r}`),l=wy(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function Vp(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function yh(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function LP(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Jw({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const c=bw(e.target),{connectionMode:h,domNode:f,autoPanOnConnect:d,connectionRadius:v,onConnectStart:y,panBy:w,getNodes:p,cancelConnection:m}=s();let g=0,_;const{x:T,y:I}=Tr(e),A=c==null?void 0:c.elementFromPoint(T,I),R=Vp(l,A),$=f==null?void 0:f.getBoundingClientRect();if(!$||!R)return;let O,B=Tr(e,$),q=!1,D=null,E=!1,N=null;const k=OP({nodes:p(),nodeId:n,handleId:t,handleType:R}),b=()=>{if(!d)return;const[C,M]=Fw(B,$);w({x:C,y:M}),g=requestAnimationFrame(b)};o({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:t,type:R},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:R});function x(C){const{transform:M}=s();B=Tr(C,$);const{handle:U,validHandleResult:Y}=MP(C,c,qf(B,M,!1,[1,1]),v,k,Q=>Zw(Q,h,n,t,i?"target":"source",a,c));if(_=U,q||(b(),q=!0),N=Y.handleDomNode,D=Y.connection,E=Y.isValid,o({connectionPosition:_&&E?Gw({x:_.x,y:_.y},M):B,connectionStatus:LP(!!_,E),connectionEndHandle:Y.endHandle}),!_&&!E&&!N)return yh(O);D.source!==D.target&&N&&(yh(O),O=N,N.classList.add("connecting","react-flow__handle-connecting"),N.classList.toggle("valid",E),N.classList.toggle("react-flow__handle-valid",E))}function S(C){var M,U;(_||N)&&D&&E&&(r==null||r(D)),(U=(M=s()).onConnectEnd)==null||U.call(M,C),l&&(u==null||u(C)),yh(O),m(),cancelAnimationFrame(g),q=!1,E=!1,D=null,N=null,c.removeEventListener("mousemove",x),c.removeEventListener("mouseup",S),c.removeEventListener("touchmove",x),c.removeEventListener("touchend",S)}c.addEventListener("mousemove",x),c.addEventListener("mouseup",S),c.addEventListener("touchmove",x),c.addEventListener("touchend",S)}const Ey=()=>!0,FP=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),bP=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},e1=P.forwardRef(({type:e="source",position:t=ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:h,...f},d)=>{var $,O;const v=o||null,y=e==="target",w=tt(),p=PP(),{connectOnClick:m,noPanClassName:g}=Fe(FP,St),{connecting:_,clickConnecting:T}=Fe(bP(p,v,e),St);p||(O=($=w.getState()).onError)==null||O.call($,"010",Yn.error010());const I=B=>{const{defaultEdgeOptions:q,onConnect:D,hasDefaultEdges:E}=w.getState(),N={...q,...B};if(E){const{edges:k,setEdges:b}=w.getState();b(Ww(N,k))}D==null||D(N),a==null||a(N)},A=B=>{if(!p)return;const q=Bw(B);i&&(q&&B.button===0||!q)&&Jw({event:B,handleId:v,nodeId:p,onConnect:I,isTarget:y,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||Ey}),q?c==null||c(B):h==null||h(B)},R=B=>{const{onClickConnectStart:q,onClickConnectEnd:D,connectionClickStartHandle:E,connectionMode:N,isValidConnection:k}=w.getState();if(!p||!E&&!i)return;if(!E){q==null||q(B,{nodeId:p,handleId:v,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:p,type:e,handleId:v}});return}const b=bw(B.target),x=n||k||Ey,{connection:S,isValid:C}=Zw({nodeId:p,id:v,type:e},N,E.nodeId,E.handleId||null,E.type,x,b);C&&I(S),D==null||D(B),w.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":v,"data-nodeid":p,"data-handlepos":t,"data-id":`${p}-${v}-${e}`,className:kt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,u,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:s,connecting:T,connectionindicator:r&&(i&&!_||s&&_)}]),onMouseDown:A,onTouchStart:A,onClick:m?R:void 0,ref:d,...f},l)});e1.displayName="Handle";var fi=P.memo(e1);const t1=({data:e,isConnectable:t,targetPosition:n=ee.Top,sourcePosition:r=ee.Bottom})=>V.createElement(V.Fragment,null,V.createElement(fi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,V.createElement(fi,{type:"source",position:r,isConnectable:t}));t1.displayName="DefaultNode";var Wf=P.memo(t1);const n1=({data:e,isConnectable:t,sourcePosition:n=ee.Bottom})=>V.createElement(V.Fragment,null,e==null?void 0:e.label,V.createElement(fi,{type:"source",position:n,isConnectable:t}));n1.displayName="InputNode";var r1=P.memo(n1);const i1=({data:e,isConnectable:t,targetPosition:n=ee.Top})=>V.createElement(V.Fragment,null,V.createElement(fi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);i1.displayName="OutputNode";var s1=P.memo(i1);const Mp=()=>null;Mp.displayName="GroupNode";const zP=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),cl=e=>e.id;function BP(e,t){return St(e.selectedNodes.map(cl),t.selectedNodes.map(cl))&&St(e.selectedEdges.map(cl),t.selectedEdges.map(cl))}const o1=P.memo(({onSelectionChange:e})=>{const t=tt(),{selectedNodes:n,selectedEdges:r}=Fe(zP,BP);return P.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});o1.displayName="SelectionListener";const UP=e=>!!e.onSelectionChange;function jP({onSelectionChange:e}){const t=Fe(UP);return e||t?V.createElement(o1,{onSelectionChange:e}):null}const HP=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ai(e,t){P.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function de(e,t,n){P.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const qP=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:d,elevateNodesOnSelect:v,minZoom:y,maxZoom:w,nodeExtent:p,onNodesChange:m,onEdgesChange:g,elementsSelectable:_,connectionMode:T,snapGrid:I,snapToGrid:A,translateExtent:R,connectOnClick:$,defaultEdgeOptions:O,fitView:B,fitViewOptions:q,onNodesDelete:D,onEdgesDelete:E,onNodeDrag:N,onNodeDragStart:k,onNodeDragStop:b,onSelectionDrag:x,onSelectionDragStart:S,onSelectionDragStop:C,noPanClassName:M,nodeOrigin:U,rfId:Y,autoPanOnConnect:Q,autoPanOnNodeDrag:se,onError:he,connectionRadius:pe,isValidConnection:Ee,nodeDragThreshold:Re})=>{const{setNodes:L,setEdges:ne,setDefaultNodesAndEdges:oe,setMinZoom:te,setMaxZoom:K,setTranslateExtent:ie,setNodeExtent:ye,reset:le}=Fe(HP,St),W=tt();return P.useEffect(()=>{const Ie=r==null?void 0:r.map(Me=>({...Me,...O}));return oe(n,Ie),()=>{le()}},[]),de("defaultEdgeOptions",O,W.setState),de("connectionMode",T,W.setState),de("onConnect",i,W.setState),de("onConnectStart",s,W.setState),de("onConnectEnd",o,W.setState),de("onClickConnectStart",a,W.setState),de("onClickConnectEnd",l,W.setState),de("nodesDraggable",u,W.setState),de("nodesConnectable",c,W.setState),de("nodesFocusable",h,W.setState),de("edgesFocusable",f,W.setState),de("edgesUpdatable",d,W.setState),de("elementsSelectable",_,W.setState),de("elevateNodesOnSelect",v,W.setState),de("snapToGrid",A,W.setState),de("snapGrid",I,W.setState),de("onNodesChange",m,W.setState),de("onEdgesChange",g,W.setState),de("connectOnClick",$,W.setState),de("fitViewOnInit",B,W.setState),de("fitViewOnInitOptions",q,W.setState),de("onNodesDelete",D,W.setState),de("onEdgesDelete",E,W.setState),de("onNodeDrag",N,W.setState),de("onNodeDragStart",k,W.setState),de("onNodeDragStop",b,W.setState),de("onSelectionDrag",x,W.setState),de("onSelectionDragStart",S,W.setState),de("onSelectionDragStop",C,W.setState),de("noPanClassName",M,W.setState),de("nodeOrigin",U,W.setState),de("rfId",Y,W.setState),de("autoPanOnConnect",Q,W.setState),de("autoPanOnNodeDrag",se,W.setState),de("onError",he,W.setState),de("connectionRadius",pe,W.setState),de("isValidConnection",Ee,W.setState),de("nodeDragThreshold",Re,W.setState),Ai(e,L),Ai(t,ne),Ai(y,te),Ai(w,K),Ai(R,ie),Ai(p,ye),null},Sy={display:"none"},WP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},a1="react-flow__node-desc",l1="react-flow__edge-desc",GP="react-flow__aria-live",KP=e=>e.ariaLiveMessage;function QP({rfId:e}){const t=Fe(KP);return V.createElement("div",{id:`${GP}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:WP},t)}function YP({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${a1}-${e}`,style:Sy},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${l1}-${e}`,style:Sy},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&V.createElement(QP,{rfId:e}))}var ta=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=P.useState(!1),i=P.useRef(!1),s=P.useRef(new Set([])),[o,a]=P.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.split("+")),c=u.reduce((h,f)=>h.concat(...f),[]);return[u,c]}return[[],[]]},[e]);return P.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=d=>{if(i.current=d.ctrlKey||d.metaKey||d.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Uf(d))return!1;const y=xy(d.code,a);s.current.add(d[y]),Ty(o,s.current,!1)&&(d.preventDefault(),r(!0))},h=d=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Uf(d))return!1;const y=xy(d.code,a);Ty(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(d[y]),d.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[e,r]),n};function Ty(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function xy(e,t){return t.includes(e)?"code":"key"}function u1(e,t,n,r){var o,a;if(!e.parentNode)return n;const i=t.get(e.parentNode),s=ns(i,r);return u1(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((o=i[Qe])==null?void 0:o.z)??0)>(n.z??0)?((a=i[Qe])==null?void 0:a.z)??0:n.z??0},r)}function c1(e,t,n){e.forEach(r=>{var i;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:s,y:o,z:a}=u1(r,e,{...r.position,z:((i=r[Qe])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:o},r[Qe].z=a,n!=null&&n[r.id]&&(r[Qe].isParent=!0)}})}function vh(e,t,n,r){const i=new Map,s={},o=r?1e3:0;return e.forEach(a=>{var h;const l=(Xt(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),c={width:u==null?void 0:u.width,height:u==null?void 0:u.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(c.parentNode=a.parentNode,s[a.parentNode]=!0),Object.defineProperty(c,Qe,{enumerable:!1,value:{handleBounds:(h=u==null?void 0:u[Qe])==null?void 0:h.handleBounds,z:l}}),i.set(a.id,c)}),c1(i,n,s),i}function h1(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:h}=e(),f=t.initial&&!u&&c;if(a&&l&&(f||!t.initial)){const v=n().filter(w=>{var m;const p=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(m=t.nodes)!=null&&m.length?p&&t.nodes.some(g=>g.id===w.id):p}),y=v.every(w=>w.width&&w.height);if(v.length>0&&y){const w=Dp(v,h),{x:p,y:m,zoom:g}=Yw(w,r,i,t.minZoom??s,t.maxZoom??o,t.padding??.1),_=Sr.translate(p,m).scale(g);return typeof t.duration=="number"&&t.duration>0?a.transform(qr(l,t.duration),_):a.transform(l,_),!0}}return!1}function XP(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Qe]:r[Qe],selected:n.selected})}),new Map(t)}function ZP(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function hl({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:XP(e,i)}),o==null||o(e)),t!=null&&t.length&&(u&&r({edges:ZP(t,s)}),a==null||a(t))}const Ci=()=>{},JP={zoomIn:Ci,zoomOut:Ci,zoomTo:Ci,getZoom:()=>1,setViewport:Ci,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ci,fitBounds:Ci,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},e2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),t2=()=>{const e=tt(),{d3Zoom:t,d3Selection:n}=Fe(e2,St);return P.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(qr(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(qr(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(qr(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[o,a,l]=e.getState().transform,u=Sr.translate(i.x??o,i.y??a).scale(i.zoom??l);t.transform(qr(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=e.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>h1(e.getState,i),setCenter:(i,s,o)=>{const{width:a,height:l,maxZoom:u}=e.getState(),c=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,h=a/2-i*c,f=l/2-s*c,d=Sr.translate(h,f).scale(c);t.transform(qr(n,o==null?void 0:o.duration),d)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:h,zoom:f}=Yw(i,o,a,l,u,(s==null?void 0:s.padding)??.1),d=Sr.translate(c,h).scale(f);t.transform(qr(n,s==null?void 0:s.duration),d)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),qf(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:l}=e.getState();if(!l)return i;const{x:u,y:c}=l.getBoundingClientRect(),h={x:i.x-u,y:i.y-c};return qf(h,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=e.getState();if(!o)return i;const{x:a,y:l}=o.getBoundingClientRect(),u=Gw(i,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:JP,[t,n])};function $p(){const e=t2(),t=tt(),n=P.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=P.useCallback(y=>t.getState().nodeInternals.get(y),[]),i=P.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(w=>({...w}))},[]),s=P.useCallback(y=>{const{edges:w=[]}=t.getState();return w.find(p=>p.id===y)},[]),o=P.useCallback(y=>{const{getNodes:w,setNodes:p,hasDefaultNodes:m,onNodesChange:g}=t.getState(),_=w(),T=typeof y=="function"?y(_):y;if(m)p(T);else if(g){const I=T.length===0?_.map(A=>({type:"remove",id:A.id})):T.map(A=>({item:A,type:"reset"}));g(I)}},[]),a=P.useCallback(y=>{const{edges:w=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:g}=t.getState(),_=typeof y=="function"?y(w):y;if(m)p(_);else if(g){const T=_.length===0?w.map(I=>({type:"remove",id:I.id})):_.map(I=>({item:I,type:"reset"}));g(T)}},[]),l=P.useCallback(y=>{const w=Array.isArray(y)?y:[y],{getNodes:p,setNodes:m,hasDefaultNodes:g,onNodesChange:_}=t.getState();if(g){const I=[...p(),...w];m(I)}else if(_){const T=w.map(I=>({item:I,type:"add"}));_(T)}},[]),u=P.useCallback(y=>{const w=Array.isArray(y)?y:[y],{edges:p=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:_}=t.getState();if(g)m([...p,...w]);else if(_){const T=w.map(I=>({item:I,type:"add"}));_(T)}},[]),c=P.useCallback(()=>{const{getNodes:y,edges:w=[],transform:p}=t.getState(),[m,g,_]=p;return{nodes:y().map(T=>({...T})),edges:w.map(T=>({...T})),viewport:{x:m,y:g,zoom:_}}},[]),h=P.useCallback(({nodes:y,edges:w})=>{const{nodeInternals:p,getNodes:m,edges:g,hasDefaultNodes:_,hasDefaultEdges:T,onNodesDelete:I,onEdgesDelete:A,onNodesChange:R,onEdgesChange:$}=t.getState(),O=(y||[]).map(N=>N.id),B=(w||[]).map(N=>N.id),q=m().reduce((N,k)=>{const b=!O.includes(k.id)&&k.parentNode&&N.find(S=>S.id===k.parentNode);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(O.includes(k.id)||b)&&N.push(k),N},[]),D=g.filter(N=>typeof N.deletable=="boolean"?N.deletable:!0),E=D.filter(N=>B.includes(N.id));if(q||E){const N=Qw(q,D),k=[...E,...N],b=k.reduce((x,S)=>(x.includes(S.id)||x.push(S.id),x),[]);if((T||_)&&(T&&t.setState({edges:g.filter(x=>!b.includes(x.id))}),_&&(q.forEach(x=>{p.delete(x.id)}),t.setState({nodeInternals:new Map(p)}))),b.length>0&&(A==null||A(k),$&&$(b.map(x=>({id:x,type:"remove"})))),q.length>0&&(I==null||I(q),R)){const x=q.map(S=>({id:S.id,type:"remove"}));R(x)}}},[]),f=P.useCallback(y=>{const w=SP(y),p=w?null:t.getState().nodeInternals.get(y.id);return[w?y:my(p),p,w]},[]),d=P.useCallback((y,w=!0,p)=>{const[m,g,_]=f(y);return m?(p||t.getState().getNodes()).filter(T=>{if(!_&&(T.id===g.id||!T.positionAbsolute))return!1;const I=my(T),A=Bf(I,m);return w&&A>0||A>=m.width*m.height}):[]},[]),v=P.useCallback((y,w,p=!0)=>{const[m]=f(y);if(!m)return!1;const g=Bf(m,w);return p&&g>0||g>=m.width*m.height},[]);return P.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:h,getIntersectingNodes:d,isNodeIntersecting:v}),[e,n,r,i,s,o,a,l,u,c,h,d,v])}const n2={actInsideInputWithModifier:!1};var r2=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=tt(),{deleteElements:r}=$p(),i=ta(e,n2),s=ta(t);P.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=o.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),P.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function i2(e){const t=tt();P.useEffect(()=>{let n;const r=()=>{var s,o;if(!e.current)return;const i=Ip(e.current);(i.height===0||i.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Yn.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Op={position:"absolute",width:"100%",height:"100%",top:0,left:0},s2=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,fl=e=>({x:e.x,y:e.y,zoom:e.k}),Ri=(e,t)=>e.target.closest(`.${t}`),Iy=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ay=e=>{const t=e.ctrlKey&&vu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},o2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),a2=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Xr.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:h=!0,defaultViewport:f,translateExtent:d,minZoom:v,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:p=!0,children:m,noWheelClassName:g,noPanClassName:_})=>{const T=P.useRef(),I=tt(),A=P.useRef(!1),R=P.useRef(!1),$=P.useRef(null),O=P.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:q,d3ZoomHandler:D,userSelectionActive:E}=Fe(o2,St),N=ta(w),k=P.useRef(0),b=P.useRef(!1),x=P.useRef();return i2($),P.useEffect(()=>{if($.current){const S=$.current.getBoundingClientRect(),C=pP().scaleExtent([v,y]).translateExtent(d),M=ln($.current).call(C),U=Sr.translate(f.x,f.y).scale(vs(f.zoom,v,y)),Y=[[0,0],[S.width,S.height]],Q=C.constrain()(U,Y,d);C.transform(M,Q),C.wheelDelta(Ay),I.setState({d3Zoom:C,d3Selection:M,d3ZoomHandler:M.on("wheel.zoom"),transform:[Q.x,Q.y,Q.k],domNode:$.current.closest(".react-flow")})}},[]),P.useEffect(()=>{q&&B&&(o&&!N&&!E?q.on("wheel.zoom",S=>{if(Ri(S,g))return!1;S.preventDefault(),S.stopImmediatePropagation();const C=q.property("__zoom").k||1,M=vu();if(S.ctrlKey&&s&&M){const Re=Sn(S),L=Ay(S),ne=C*Math.pow(2,L);B.scaleTo(q,ne,Re,S);return}const U=S.deltaMode===1?20:1;let Y=l===Xr.Vertical?0:S.deltaX*U,Q=l===Xr.Horizontal?0:S.deltaY*U;!M&&S.shiftKey&&l!==Xr.Vertical&&(Y=S.deltaY*U,Q=0),B.translateBy(q,-(Y/C)*a,-(Q/C)*a,{internal:!0});const se=fl(q.property("__zoom")),{onViewportChangeStart:he,onViewportChange:pe,onViewportChangeEnd:Ee}=I.getState();clearTimeout(x.current),b.current||(b.current=!0,t==null||t(S,se),he==null||he(se)),b.current&&(e==null||e(S,se),pe==null||pe(se),x.current=setTimeout(()=>{n==null||n(S,se),Ee==null||Ee(se),b.current=!1},150))},{passive:!1}):typeof D<"u"&&q.on("wheel.zoom",function(S,C){if(!p||Ri(S,g))return null;S.preventDefault(),D.call(this,S,C)},{passive:!1}))},[E,o,l,q,B,D,N,s,p,g,t,e,n]),P.useEffect(()=>{B&&B.on("start",S=>{var U,Y;if(!S.sourceEvent||S.sourceEvent.internal)return null;k.current=(U=S.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:C}=I.getState(),M=fl(S.transform);A.current=!0,O.current=M,((Y=S.sourceEvent)==null?void 0:Y.type)==="mousedown"&&I.setState({paneDragging:!0}),C==null||C(M),t==null||t(S.sourceEvent,M)})},[B,t]),P.useEffect(()=>{B&&(E&&!A.current?B.on("zoom",null):E||B.on("zoom",S=>{var M;const{onViewportChange:C}=I.getState();if(I.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),R.current=!!(r&&Iy(h,k.current??0)),(e||C)&&!((M=S.sourceEvent)!=null&&M.internal)){const U=fl(S.transform);C==null||C(U),e==null||e(S.sourceEvent,U)}}))},[E,B,e,h,r]),P.useEffect(()=>{B&&B.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:C}=I.getState();if(A.current=!1,I.setState({paneDragging:!1}),r&&Iy(h,k.current??0)&&!R.current&&r(S.sourceEvent),R.current=!1,(n||C)&&s2(O.current,S.transform)){const M=fl(S.transform);O.current=M,clearTimeout(T.current),T.current=setTimeout(()=>{C==null||C(M),n==null||n(S.sourceEvent,M)},o?150:0)}})},[B,o,h,n,r]),P.useEffect(()=>{B&&B.filter(S=>{const C=N||i,M=s&&S.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&S.button===1&&S.type==="mousedown"&&(Ri(S,"react-flow__node")||Ri(S,"react-flow__edge")))return!0;if(!h&&!C&&!o&&!u&&!s||E||!u&&S.type==="dblclick"||Ri(S,g)&&S.type==="wheel"||Ri(S,_)&&(S.type!=="wheel"||o&&S.type==="wheel"&&!N)||!s&&S.ctrlKey&&S.type==="wheel"||!C&&!o&&!M&&S.type==="wheel"||!h&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(h)&&!h.includes(S.button)&&(S.type==="mousedown"||S.type==="touchstart"))return!1;const U=Array.isArray(h)&&h.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&U})},[E,B,i,s,o,u,h,c,N]),V.createElement("div",{className:"react-flow__renderer",ref:$,style:Op},m)},l2=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function u2(){const{userSelectionActive:e,userSelectionRect:t}=Fe(l2,St);return e&&t?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Cy(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);n.position.y=n.position.y-s,n.style.height+=s,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function f1(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Cy(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Cy(r,o);break}case"remove":return r}return r.push(o),r},n)}function d1(e,t){return f1(e,t)}function c2(e,t){return f1(e,t)}const ar=(e,t)=>({id:e,type:"select",selected:t});function Wi(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(ar(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(ar(r.id,!1))),n},[])}const _h=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},h2=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),p1=P.memo(({isSelecting:e,selectionMode:t=ea.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:h})=>{const f=P.useRef(null),d=tt(),v=P.useRef(0),y=P.useRef(0),w=P.useRef(),{userSelectionActive:p,elementsSelectable:m,dragging:g}=Fe(h2,St),_=()=>{d.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},T=D=>{s==null||s(D),d.getState().resetSelectedElements(),d.setState({nodesSelectionActive:!1})},I=D=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){D.preventDefault();return}o==null||o(D)},A=a?D=>a(D):void 0,R=D=>{const{resetSelectedElements:E,domNode:N}=d.getState();if(w.current=N==null?void 0:N.getBoundingClientRect(),!m||!e||D.button!==0||D.target!==f.current||!w.current)return;const{x:k,y:b}=Tr(D,w.current);E(),d.setState({userSelectionRect:{width:0,height:0,startX:k,startY:b,x:k,y:b}}),r==null||r(D)},$=D=>{const{userSelectionRect:E,nodeInternals:N,edges:k,transform:b,onNodesChange:x,onEdgesChange:S,nodeOrigin:C,getNodes:M}=d.getState();if(!e||!w.current||!E)return;d.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=Tr(D,w.current),Y=E.startX??0,Q=E.startY??0,se={...E,x:U.x<Y?U.x:Y,y:U.y<Q?U.y:Q,width:Math.abs(U.x-Y),height:Math.abs(U.y-Q)},he=M(),pe=Kw(N,se,b,t===ea.Partial,!0,C),Ee=Qw(pe,k).map(L=>L.id),Re=pe.map(L=>L.id);if(v.current!==Re.length){v.current=Re.length;const L=Wi(he,Re);L.length&&(x==null||x(L))}if(y.current!==Ee.length){y.current=Ee.length;const L=Wi(k,Ee);L.length&&(S==null||S(L))}d.setState({userSelectionRect:se})},O=D=>{if(D.button!==0)return;const{userSelectionRect:E}=d.getState();!p&&E&&D.target===f.current&&(T==null||T(D)),d.setState({nodesSelectionActive:v.current>0}),_(),i==null||i(D)},B=D=>{p&&(d.setState({nodesSelectionActive:v.current>0}),i==null||i(D)),_()},q=m&&(e||p);return V.createElement("div",{className:kt(["react-flow__pane",{dragging:g,selection:e}]),onClick:q?void 0:_h(T,f),onContextMenu:_h(I,f),onWheel:_h(A,f),onMouseEnter:q?void 0:l,onMouseDown:q?R:void 0,onMouseMove:q?$:u,onMouseUp:q?O:void 0,onMouseLeave:q?B:c,ref:f,style:Op},h,V.createElement(u2,null))});p1.displayName="Pane";function m1(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:m1(n,t):!1}function Ry(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function f2(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!m1(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}})}function d2(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function g1(e,t,n,r,i=[0,0],s){const o=d2(e,e.extent||r);let a=o;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:h,y:f}=ns(c,i).positionAbsolute;a=c&&Xt(h)&&Xt(f)&&Xt(c.width)&&Xt(c.height)?[[h+e.width*i[0],f+e.height*i[1]],[h+c.width-e.width+e.width*i[0],f+c.height-e.height+e.height*i[1]]]:a}else s==null||s("005",Yn.error005()),a=o;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const c=n.get(e.parentNode),{x:h,y:f}=ns(c,i).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+f],[e.extent[1][0]+h,e.extent[1][1]+f]]}let l={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);l=ns(c,i).positionAbsolute}const u=a&&a!=="parent"?Ap(t,a):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function wh({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const ky=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...Ip(l)}})};function Js(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Gf({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Yn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function p2(){const e=tt();return P.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Eh(e){return(t,n,r)=>e==null?void 0:e(t,r)}function y1({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=tt(),[l,u]=P.useState(!1),c=P.useRef([]),h=P.useRef({x:null,y:null}),f=P.useRef(0),d=P.useRef(null),v=P.useRef({x:0,y:0}),y=P.useRef(null),w=P.useRef(!1),p=P.useRef(!1),m=p2();return P.useEffect(()=>{if(e!=null&&e.current){const g=ln(e.current),_=({x:A,y:R})=>{const{nodeInternals:$,onNodeDrag:O,onSelectionDrag:B,updateNodePositions:q,nodeExtent:D,snapGrid:E,snapToGrid:N,nodeOrigin:k,onError:b}=a.getState();h.current={x:A,y:R};let x=!1,S={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&D){const M=Dp(c.current,k);S=Cp(M)}if(c.current=c.current.map(M=>{const U={x:A-M.distance.x,y:R-M.distance.y};N&&(U.x=E[0]*Math.round(U.x/E[0]),U.y=E[1]*Math.round(U.y/E[1]));const Y=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];c.current.length>1&&D&&!M.extent&&(Y[0][0]=M.positionAbsolute.x-S.x+D[0][0],Y[1][0]=M.positionAbsolute.x+(M.width??0)-S.x2+D[1][0],Y[0][1]=M.positionAbsolute.y-S.y+D[0][1],Y[1][1]=M.positionAbsolute.y+(M.height??0)-S.y2+D[1][1]);const Q=g1(M,U,$,Y,k,b);return x=x||M.position.x!==Q.position.x||M.position.y!==Q.position.y,M.position=Q.position,M.positionAbsolute=Q.positionAbsolute,M}),!x)return;q(c.current,!0,!0),u(!0);const C=i?O:Eh(B);if(C&&y.current){const[M,U]=wh({nodeId:i,dragItems:c.current,nodeInternals:$});C(y.current,M,U)}},T=()=>{if(!d.current)return;const[A,R]=Fw(v.current,d.current);if(A!==0||R!==0){const{transform:$,panBy:O}=a.getState();h.current.x=(h.current.x??0)-A/$[2],h.current.y=(h.current.y??0)-R/$[2],O({x:A,y:R})&&_(h.current)}f.current=requestAnimationFrame(T)},I=A=>{var k;const{nodeInternals:R,multiSelectionActive:$,nodesDraggable:O,unselectNodesAndEdges:B,onNodeDragStart:q,onSelectionDragStart:D}=a.getState();p.current=!0;const E=i?q:Eh(D);(!o||!s)&&!$&&i&&((k=R.get(i))!=null&&k.selected||B()),i&&s&&o&&Gf({id:i,store:a,nodeRef:e});const N=m(A);if(h.current=N,c.current=f2(R,O,N,i),E&&c.current){const[b,x]=wh({nodeId:i,dragItems:c.current,nodeInternals:R});E(A.sourceEvent,b,x)}};if(t)g.on(".drag",null);else{const A=xR().on("start",R=>{const{domNode:$,nodeDragThreshold:O}=a.getState();O===0&&I(R);const B=m(R);h.current=B,d.current=($==null?void 0:$.getBoundingClientRect())||null,v.current=Tr(R.sourceEvent,d.current)}).on("drag",R=>{var q,D;const $=m(R),{autoPanOnNodeDrag:O,nodeDragThreshold:B}=a.getState();if(!w.current&&p.current&&O&&(w.current=!0,T()),!p.current){const E=$.xSnapped-(((q=h==null?void 0:h.current)==null?void 0:q.x)??0),N=$.ySnapped-(((D=h==null?void 0:h.current)==null?void 0:D.y)??0);Math.sqrt(E*E+N*N)>B&&I(R)}(h.current.x!==$.xSnapped||h.current.y!==$.ySnapped)&&c.current&&p.current&&(y.current=R.sourceEvent,v.current=Tr(R.sourceEvent,d.current),_($))}).on("end",R=>{if(p.current&&(u(!1),w.current=!1,p.current=!1,cancelAnimationFrame(f.current),c.current)){const{updateNodePositions:$,nodeInternals:O,onNodeDragStop:B,onSelectionDragStop:q}=a.getState(),D=i?B:Eh(q);if($(c.current,!1,!1),D){const[E,N]=wh({nodeId:i,dragItems:c.current,nodeInternals:O});D(R.sourceEvent,E,N)}}}).filter(R=>{const $=R.target;return!R.button&&(!n||!Ry($,`.${n}`,e))&&(!r||Ry($,r,e))});return g.call(A),()=>{g.on(".drag",null)}}}},[e,t,n,r,s,a,i,o,m]),l}function v1(){const e=tt();return P.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),h=o().filter(m=>m.selected&&(m.draggable||c&&typeof m.draggable>"u")),f=a?l[0]:5,d=a?l[1]:5,v=n.isShiftPressed?4:1,y=n.x*f*v,w=n.y*d*v,p=h.map(m=>{if(m.positionAbsolute){const g={x:m.positionAbsolute.x+y,y:m.positionAbsolute.y+w};a&&(g.x=l[0]*Math.round(g.x/l[0]),g.y=l[1]*Math.round(g.y/l[1]));const{positionAbsolute:_,position:T}=g1(m,g,r,i,void 0,u);m.position=T,m.positionAbsolute=_}return m});s(p,!0,!1)},[])}const rs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var eo=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:h,onMouseMove:f,onMouseLeave:d,onContextMenu:v,onDoubleClick:y,style:w,className:p,isDraggable:m,isSelectable:g,isConnectable:_,isFocusable:T,selectNodesOnDrag:I,sourcePosition:A,targetPosition:R,hidden:$,resizeObserver:O,dragHandle:B,zIndex:q,isParent:D,noDragClassName:E,noPanClassName:N,initialized:k,disableKeyboardA11y:b,ariaLabel:x,rfId:S})=>{const C=tt(),M=P.useRef(null),U=P.useRef(A),Y=P.useRef(R),Q=P.useRef(r),se=g||m||c||h||f||d,he=v1(),pe=Js(n,C.getState,h),Ee=Js(n,C.getState,f),Re=Js(n,C.getState,d),L=Js(n,C.getState,v),ne=Js(n,C.getState,y),oe=ie=>{const{nodeDragThreshold:ye}=C.getState();if(g&&(!I||!m||ye>0)&&Gf({id:n,store:C,nodeRef:M}),c){const le=C.getState().nodeInternals.get(n);le&&c(ie,{...le})}},te=ie=>{if(!Uf(ie))if(zw.includes(ie.key)&&g){const ye=ie.key==="Escape";Gf({id:n,store:C,unselect:ye,nodeRef:M})}else!b&&m&&u&&Object.prototype.hasOwnProperty.call(rs,ie.key)&&(C.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),he({x:rs[ie.key].x,y:rs[ie.key].y,isShiftPressed:ie.shiftKey}))};P.useEffect(()=>{if(M.current&&!$){const ie=M.current;return O==null||O.observe(ie),()=>O==null?void 0:O.unobserve(ie)}},[$]),P.useEffect(()=>{const ie=Q.current!==r,ye=U.current!==A,le=Y.current!==R;M.current&&(ie||ye||le)&&(ie&&(Q.current=r),ye&&(U.current=A),le&&(Y.current=R),C.getState().updateNodeDimensions([{id:n,nodeElement:M.current,forceUpdate:!0}]))},[n,r,A,R]);const K=y1({nodeRef:M,disabled:$||!m,noDragClassName:E,handleSelector:B,nodeId:n,isSelectable:g,selectNodesOnDrag:I});return $?null:V.createElement("div",{className:kt(["react-flow__node",`react-flow__node-${r}`,{[N]:m},p,{selected:u,selectable:g,parent:D,dragging:K}]),ref:M,style:{zIndex:q,transform:`translate(${a}px,${l}px)`,pointerEvents:se?"all":"none",visibility:k?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:pe,onMouseMove:Ee,onMouseLeave:Re,onContextMenu:L,onClick:oe,onDoubleClick:ne,onKeyDown:T?te:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":b?void 0:`${a1}-${S}`,"aria-label":x},V.createElement(kP,{value:n},V.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:_,sourcePosition:A,targetPosition:R,dragging:K,dragHandle:B,zIndex:q})))};return t.displayName="NodeWrapper",P.memo(t)};const m2=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Dp(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function g2({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=tt(),{width:i,height:s,x:o,y:a,transformString:l,userSelectionActive:u}=Fe(m2,St),c=v1(),h=P.useRef(null);if(P.useEffect(()=>{var v;n||(v=h.current)==null||v.focus({preventScroll:!0})},[n]),y1({nodeRef:h}),u||!i||!s)return null;const f=e?v=>{const y=r.getState().getNodes().filter(w=>w.selected);e(v,y)}:void 0,d=v=>{Object.prototype.hasOwnProperty.call(rs,v.key)&&c({x:rs[v.key].x,y:rs[v.key].y,isShiftPressed:v.shiftKey})};return V.createElement("div",{className:kt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},V.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:i,height:s,top:a,left:o}}))}var y2=P.memo(g2);const v2=e=>e.nodesSelectionActive,_1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:h,selectionOnDrag:f,selectionMode:d,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:w,panActivationKeyCode:p,zoomActivationKeyCode:m,elementsSelectable:g,zoomOnScroll:_,zoomOnPinch:T,panOnScroll:I,panOnScrollSpeed:A,panOnScrollMode:R,zoomOnDoubleClick:$,panOnDrag:O,defaultViewport:B,translateExtent:q,minZoom:D,maxZoom:E,preventScrolling:N,onSelectionContextMenu:k,noWheelClassName:b,noPanClassName:x,disableKeyboardA11y:S})=>{const C=Fe(v2),M=ta(h),U=ta(p),Y=U||O,Q=U||I,se=M||f&&Y!==!0;return r2({deleteKeyCode:a,multiSelectionKeyCode:w}),V.createElement(a2,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:s,elementsSelectable:g,zoomOnScroll:_,zoomOnPinch:T,panOnScroll:Q,panOnScrollSpeed:A,panOnScrollMode:R,zoomOnDoubleClick:$,panOnDrag:!M&&Y,defaultViewport:B,translateExtent:q,minZoom:D,maxZoom:E,zoomActivationKeyCode:m,preventScrolling:N,noWheelClassName:b,noPanClassName:x},V.createElement(p1,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:Y,isSelecting:!!se,selectionMode:d},e,C&&V.createElement(y2,{onSelectionContextMenu:k,noPanClassName:x,disableKeyboardA11y:S})))};_1.displayName="FlowRenderer";var _2=P.memo(_1);function w2(e){return Fe(P.useCallback(n=>e?Kw(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function E2(e){const t={input:eo(e.input||r1),default:eo(e.default||Wf),output:eo(e.output||s1),group:eo(e.group||Mp)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=eo(e[s]||Wf),i),n);return{...t,...r}}const S2=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},T2=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),w1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=Fe(T2,St),a=w2(e.onlyRenderVisibleElements),l=P.useRef(),u=P.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(h=>{const f=h.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));s(f)});return l.current=c,c},[]);return P.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:Op},a.map(c=>{var T,I;let h=c.type||"default";e.nodeTypes[h]||(o==null||o("003",Yn.error003(h)),h="default");const f=e.nodeTypes[h]||e.nodeTypes.default,d=!!(c.draggable||t&&typeof c.draggable>"u"),v=!!(c.selectable||i&&typeof c.selectable>"u"),y=!!(c.connectable||n&&typeof c.connectable>"u"),w=!!(c.focusable||r&&typeof c.focusable>"u"),p=e.nodeExtent?Ap(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,m=(p==null?void 0:p.x)??0,g=(p==null?void 0:p.y)??0,_=S2({x:m,y:g,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return V.createElement(f,{key:c.id,id:c.id,className:c.className,style:c.style,type:h,data:c.data,sourcePosition:c.sourcePosition||ee.Bottom,targetPosition:c.targetPosition||ee.Top,hidden:c.hidden,xPos:m,yPos:g,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:d,isSelectable:v,isConnectable:y,isFocusable:w,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((T=c[Qe])==null?void 0:T.z)??0,isParent:!!((I=c[Qe])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel})}))};w1.displayName="NodeRenderer";var x2=P.memo(w1);const I2=(e,t,n)=>n===ee.Left?e-t:n===ee.Right?e+t:e,A2=(e,t,n)=>n===ee.Top?e-t:n===ee.Bottom?e+t:e,Py="react-flow__edgeupdater",Ny=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>V.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:kt([Py,`${Py}-${a}`]),cx:I2(t,r,e),cy:A2(n,r,e),r,stroke:"transparent",fill:"transparent"}),C2=()=>!0;var ki=e=>{const t=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:v,labelBgBorderRadius:y,style:w,source:p,target:m,sourceX:g,sourceY:_,targetX:T,targetY:I,sourcePosition:A,targetPosition:R,elementsSelectable:$,hidden:O,sourceHandleId:B,targetHandleId:q,onContextMenu:D,onMouseEnter:E,onMouseMove:N,onMouseLeave:k,edgeUpdaterRadius:b,onEdgeUpdate:x,onEdgeUpdateStart:S,onEdgeUpdateEnd:C,markerEnd:M,markerStart:U,rfId:Y,ariaLabel:Q,isFocusable:se,isUpdatable:he,pathOptions:pe,interactionWidth:Ee})=>{const Re=P.useRef(null),[L,ne]=P.useState(!1),[oe,te]=P.useState(!1),K=tt(),ie=P.useMemo(()=>`url(#${Hf(U,Y)})`,[U,Y]),ye=P.useMemo(()=>`url(#${Hf(M,Y)})`,[M,Y]);if(O)return null;const le=ft=>{var _n;const{edges:Lt,addSelectedEdges:br,unselectNodesAndEdges:zr,multiSelectionActive:Br}=K.getState(),Mn=Lt.find(zs=>zs.id===n);Mn&&($&&(K.setState({nodesSelectionActive:!1}),Mn.selected&&Br?(zr({nodes:[],edges:[Mn]}),(_n=Re.current)==null||_n.blur()):br([n])),o&&o(ft,Mn))},W=Zs(n,K.getState,a),Ie=Zs(n,K.getState,D),Me=Zs(n,K.getState,E),ht=Zs(n,K.getState,N),tn=Zs(n,K.getState,k),vn=(ft,Lt)=>{if(ft.button!==0)return;const{edges:br,isValidConnection:zr}=K.getState(),Br=Lt?m:p,Mn=(Lt?q:B)||null,_n=Lt?"target":"source",zs=zr||C2,Lc=Lt,Bs=br.find(Ur=>Ur.id===n);te(!0),S==null||S(ft,Bs,_n);const Fc=Ur=>{te(!1),C==null||C(Ur,Bs,_n)};Jw({event:ft,handleId:Mn,nodeId:Br,onConnect:Ur=>x==null?void 0:x(Bs,Ur),isTarget:Lc,getState:K.getState,setState:K.setState,isValidConnection:zs,edgeUpdaterType:_n,onEdgeUpdateEnd:Fc})},nn=ft=>vn(ft,!0),Ti=ft=>vn(ft,!1),tr=()=>ne(!0),Fr=()=>ne(!1),bs=!$&&!o,xi=ft=>{var Lt;if(zw.includes(ft.key)&&$){const{unselectNodesAndEdges:br,addSelectedEdges:zr,edges:Br}=K.getState();ft.key==="Escape"?((Lt=Re.current)==null||Lt.blur(),br({edges:[Br.find(_n=>_n.id===n)]})):zr([n])}};return V.createElement("g",{className:kt(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:bs,updating:L}]),onClick:le,onDoubleClick:W,onContextMenu:Ie,onMouseEnter:Me,onMouseMove:ht,onMouseLeave:tn,onKeyDown:se?xi:void 0,tabIndex:se?0:void 0,role:se?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Q===null?void 0:Q||`Edge from ${p} to ${m}`,"aria-describedby":se?`${l1}-${Y}`:void 0,ref:Re},!oe&&V.createElement(e,{id:n,source:p,target:m,selected:l,animated:u,label:c,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:v,labelBgBorderRadius:y,data:s,style:w,sourceX:g,sourceY:_,targetX:T,targetY:I,sourcePosition:A,targetPosition:R,sourceHandleId:B,targetHandleId:q,markerStart:ie,markerEnd:ye,pathOptions:pe,interactionWidth:Ee}),he&&V.createElement(V.Fragment,null,(he==="source"||he===!0)&&V.createElement(Ny,{position:A,centerX:g,centerY:_,radius:b,onMouseDown:nn,onMouseEnter:tr,onMouseOut:Fr,type:"source"}),(he==="target"||he===!0)&&V.createElement(Ny,{position:R,centerX:T,centerY:I,radius:b,onMouseDown:Ti,onMouseEnter:tr,onMouseOut:Fr,type:"target"})))};return t.displayName="EdgeWrapper",P.memo(t)};function R2(e){const t={default:ki(e.default||wu),straight:ki(e.bezier||Pp),step:ki(e.step||kp),smoothstep:ki(e.step||oc),simplebezier:ki(e.simplebezier||Rp)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=ki(e[s]||wu),i),n);return{...t,...r}}function Dy(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case ee.Top:return{x:r+s/2,y:i};case ee.Right:return{x:r+s,y:i+o/2};case ee.Bottom:return{x:r+s/2,y:i+o};case ee.Left:return{x:r,y:i+o/2}}}function Vy(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const k2=(e,t,n,r,i,s)=>{const o=Dy(n,e,t),a=Dy(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function P2({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Cp({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),h=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(h*f)>0}function My(e){var r,i,s,o,a;const t=((r=e==null?void 0:e[Qe])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const N2=[{level:0,isMaxLevel:!0,edges:[]}];function D2(e,t,n=!1){let r=-1;const i=e.reduce((o,a)=>{var c,h;const l=Xt(a.zIndex);let u=l?a.zIndex:0;if(n){const f=t.get(a.target),d=t.get(a.source),v=a.selected||(f==null?void 0:f.selected)||(d==null?void 0:d.selected),y=Math.max(((c=d==null?void 0:d[Qe])==null?void 0:c.z)||0,((h=f==null?void 0:f[Qe])==null?void 0:h.z)||0,1e3);u=(l?a.zIndex:0)+(v?y:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?N2:s}function V2(e,t,n){const r=Fe(P.useCallback(i=>e?i.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&P2({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return D2(r,t,n)}const M2=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),$2=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),$y={[_u.Arrow]:M2,[_u.ArrowClosed]:$2};function O2(e){const t=tt();return P.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call($y,e)?$y[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Yn.error009(e)),null)},[e])}const L2=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=O2(t);return l?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},V.createElement(l,{color:n,strokeWidth:o})):null},F2=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Hf(o,t);r.includes(a)||(i.push({id:a,color:o.color||e,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},E1=({defaultColor:e,rfId:t})=>{const n=Fe(P.useCallback(F2({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return V.createElement("defs",null,n.map(r=>V.createElement(L2,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};E1.displayName="MarkerDefinitions";var b2=P.memo(E1);const z2=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),S1=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeUpdate:o,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:h,edgeUpdaterRadius:f,onEdgeDoubleClick:d,onEdgeUpdateStart:v,onEdgeUpdateEnd:y,children:w})=>{const{edgesFocusable:p,edgesUpdatable:m,elementsSelectable:g,width:_,height:T,connectionMode:I,nodeInternals:A,onError:R}=Fe(z2,St),$=V2(t,A,n);return _?V.createElement(V.Fragment,null,$.map(({level:O,edges:B,isMaxLevel:q})=>V.createElement("svg",{key:O,style:{zIndex:O},width:_,height:T,className:"react-flow__edges react-flow__container"},q&&V.createElement(b2,{defaultColor:e,rfId:r}),V.createElement("g",null,B.map(D=>{const[E,N,k]=My(A.get(D.source)),[b,x,S]=My(A.get(D.target));if(!k||!S)return null;let C=D.type||"default";i[C]||(R==null||R("011",Yn.error011(C)),C="default");const M=i[C]||i.default,U=I===hi.Strict?x.target:(x.target??[]).concat(x.source??[]),Y=Vy(N.source,D.sourceHandle),Q=Vy(U,D.targetHandle),se=(Y==null?void 0:Y.position)||ee.Bottom,he=(Q==null?void 0:Q.position)||ee.Top,pe=!!(D.focusable||p&&typeof D.focusable>"u"),Ee=typeof o<"u"&&(D.updatable||m&&typeof D.updatable>"u");if(!Y||!Q)return R==null||R("008",Yn.error008(Y,D)),null;const{sourceX:Re,sourceY:L,targetX:ne,targetY:oe}=k2(E,Y,se,b,Q,he);return V.createElement(M,{key:D.id,id:D.id,className:kt([D.className,s]),type:C,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:Re,sourceY:L,targetX:ne,targetY:oe,sourcePosition:se,targetPosition:he,elementsSelectable:g,onEdgeUpdate:o,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:h,edgeUpdaterRadius:f,onEdgeDoubleClick:d,onEdgeUpdateStart:v,onEdgeUpdateEnd:y,rfId:r,ariaLabel:D.ariaLabel,isFocusable:pe,isUpdatable:Ee,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth})})))),w):null};S1.displayName="EdgeRenderer";var B2=P.memo(S1);const U2=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function j2({children:e}){const t=Fe(U2);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function H2(e){const t=$p(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const q2={[ee.Left]:ee.Right,[ee.Right]:ee.Left,[ee.Top]:ee.Bottom,[ee.Bottom]:ee.Top},T1=({nodeId:e,handleType:t,style:n,type:r=cr.Bezier,CustomComponent:i,connectionStatus:s})=>{var I,A,R;const{fromNode:o,handleId:a,toX:l,toY:u,connectionMode:c}=Fe(P.useCallback($=>({fromNode:$.nodeInternals.get(e),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[e]),St),h=(I=o==null?void 0:o[Qe])==null?void 0:I.handleBounds;let f=h==null?void 0:h[t];if(c===hi.Loose&&(f=f||(h==null?void 0:h[t==="source"?"target":"source"])),!o||!f)return null;const d=a?f.find($=>$.id===a):f[0],v=d?d.x+d.width/2:(o.width??0)/2,y=d?d.y+d.height/2:o.height??0,w=(((A=o.positionAbsolute)==null?void 0:A.x)??0)+v,p=(((R=o.positionAbsolute)==null?void 0:R.y)??0)+y,m=d==null?void 0:d.position,g=m?q2[m]:null;if(!m||!g)return null;if(i)return V.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:d,fromX:w,fromY:p,toX:l,toY:u,fromPosition:m,toPosition:g,connectionStatus:s});let _="";const T={sourceX:w,sourceY:p,sourcePosition:m,targetX:l,targetY:u,targetPosition:g};return r===cr.Bezier?[_]=qw(T):r===cr.Step?[_]=jf({...T,borderRadius:0}):r===cr.SmoothStep?[_]=jf(T):r===cr.SimpleBezier?[_]=Hw(T):_=`M${w},${p} ${l},${u}`,V.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};T1.displayName="ConnectionLine";const W2=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function G2({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:l,connectionStatus:u}=Fe(W2,St);return!(i&&s&&a&&o)?null:V.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:kt(["react-flow__connection",u])},V.createElement(T1,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function Oy(e,t){return P.useRef(null),tt(),P.useMemo(()=>t(e),[e])}const x1=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:d,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:w,connectionLineType:p,connectionLineStyle:m,connectionLineComponent:g,connectionLineContainerStyle:_,selectionKeyCode:T,selectionOnDrag:I,selectionMode:A,multiSelectionKeyCode:R,panActivationKeyCode:$,zoomActivationKeyCode:O,deleteKeyCode:B,onlyRenderVisibleElements:q,elementsSelectable:D,selectNodesOnDrag:E,defaultViewport:N,translateExtent:k,minZoom:b,maxZoom:x,preventScrolling:S,defaultMarkerColor:C,zoomOnScroll:M,zoomOnPinch:U,panOnScroll:Y,panOnScrollSpeed:Q,panOnScrollMode:se,zoomOnDoubleClick:he,panOnDrag:pe,onPaneClick:Ee,onPaneMouseEnter:Re,onPaneMouseMove:L,onPaneMouseLeave:ne,onPaneScroll:oe,onPaneContextMenu:te,onEdgeUpdate:K,onEdgeContextMenu:ie,onEdgeMouseEnter:ye,onEdgeMouseMove:le,onEdgeMouseLeave:W,edgeUpdaterRadius:Ie,onEdgeUpdateStart:Me,onEdgeUpdateEnd:ht,noDragClassName:tn,noWheelClassName:vn,noPanClassName:nn,elevateEdgesOnSelect:Ti,disableKeyboardA11y:tr,nodeOrigin:Fr,nodeExtent:bs,rfId:xi})=>{const ft=Oy(e,E2),Lt=Oy(t,R2);return H2(s),V.createElement(_2,{onPaneClick:Ee,onPaneMouseEnter:Re,onPaneMouseMove:L,onPaneMouseLeave:ne,onPaneContextMenu:te,onPaneScroll:oe,deleteKeyCode:B,selectionKeyCode:T,selectionOnDrag:I,selectionMode:A,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:R,panActivationKeyCode:$,zoomActivationKeyCode:O,elementsSelectable:D,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:M,zoomOnPinch:U,zoomOnDoubleClick:he,panOnScroll:Y,panOnScrollSpeed:Q,panOnScrollMode:se,panOnDrag:pe,defaultViewport:N,translateExtent:k,minZoom:b,maxZoom:x,onSelectionContextMenu:v,preventScrolling:S,noDragClassName:tn,noWheelClassName:vn,noPanClassName:nn,disableKeyboardA11y:tr},V.createElement(j2,null,V.createElement(B2,{edgeTypes:Lt,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:K,onlyRenderVisibleElements:q,onEdgeContextMenu:ie,onEdgeMouseEnter:ye,onEdgeMouseMove:le,onEdgeMouseLeave:W,onEdgeUpdateStart:Me,onEdgeUpdateEnd:ht,edgeUpdaterRadius:Ie,defaultMarkerColor:C,noPanClassName:nn,elevateEdgesOnSelect:!!Ti,disableKeyboardA11y:tr,rfId:xi},V.createElement(G2,{style:m,type:p,component:g,containerStyle:_})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(x2,{nodeTypes:ft,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:d,selectNodesOnDrag:E,onlyRenderVisibleElements:q,noPanClassName:nn,noDragClassName:tn,disableKeyboardA11y:tr,nodeOrigin:Fr,nodeExtent:bs,rfId:xi})))};x1.displayName="GraphView";var K2=P.memo(x1);const Kf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],rr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Kf,nodeExtent:Kf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:hi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:TP,isValidConnection:void 0},Q2=()=>OA((e,t)=>({...rr,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:vh(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?vh(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const h=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(h.transform),d=n.reduce((y,w)=>{const p=i.get(w.id);if(p){const m=Ip(w.nodeElement);!!(m.width&&m.height&&(p.width!==m.width||p.height!==m.height||w.forceUpdate))&&(i.set(p.id,{...p,[Qe]:{...p[Qe],handleBounds:{source:ky(".source",w.nodeElement,f,u),target:ky(".target",w.nodeElement,f,u)}},...m}),y.push({id:p.id,type:"dimensions",dimensions:m}))}return y},[]);c1(i,u);const v=o||s&&!o&&h1(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:v}),(d==null?void 0:d.length)>0&&(r==null||r(d))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(s){const u=d1(n,a()),c=vh(u,i,o,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(l=>ar(l,!0)):(o=Wi(s(),n),a=Wi(i,[])),hl({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(l=>ar(l,!0)):(o=Wi(i,n),a=Wi(s(),[])),hl({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),o=n||s(),a=r||i,l=o.map(c=>(c.selected=!1,ar(c.id,!1))),u=a.map(c=>ar(c.id,!1));hl({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>ar(a.id,!1)),o=n.filter(a=>a.selected).map(a=>ar(a.id,!1));hl({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Ap(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:l}=t();if(!o||!a||!n.x&&!n.y)return!1;const u=Sr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,s]],h=o==null?void 0:o.constrain()(u,c,l);return o.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>e({connectionNodeId:rr.connectionNodeId,connectionHandleId:rr.connectionHandleId,connectionHandleType:rr.connectionHandleType,connectionStatus:rr.connectionStatus,connectionStartHandle:rr.connectionStartHandle,connectionEndHandle:rr.connectionEndHandle}),reset:()=>e({...rr})}),Object.is),I1=({children:e})=>{const t=P.useRef(null);return t.current||(t.current=Q2()),V.createElement(mP,{value:t.current},e)};I1.displayName="ReactFlowProvider";const A1=({children:e})=>P.useContext(sc)?V.createElement(V.Fragment,null,e):V.createElement(I1,null,e);A1.displayName="ReactFlowWrapper";const Y2={input:r1,default:Wf,output:s1,group:Mp},X2={default:wu,straight:Pp,step:kp,smoothstep:oc,simplebezier:Rp},Z2=[0,0],J2=[15,15],eN={x:0,y:0,zoom:1},tN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},C1=P.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=Y2,edgeTypes:o=X2,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:h,onMoveEnd:f,onConnect:d,onConnectStart:v,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:p,onNodeMouseEnter:m,onNodeMouseMove:g,onNodeMouseLeave:_,onNodeContextMenu:T,onNodeDoubleClick:I,onNodeDragStart:A,onNodeDrag:R,onNodeDragStop:$,onNodesDelete:O,onEdgesDelete:B,onSelectionChange:q,onSelectionDragStart:D,onSelectionDrag:E,onSelectionDragStop:N,onSelectionContextMenu:k,onSelectionStart:b,onSelectionEnd:x,connectionMode:S=hi.Strict,connectionLineType:C=cr.Bezier,connectionLineStyle:M,connectionLineComponent:U,connectionLineContainerStyle:Y,deleteKeyCode:Q="Backspace",selectionKeyCode:se="Shift",selectionOnDrag:he=!1,selectionMode:pe=ea.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:Re=vu()?"Meta":"Control",zoomActivationKeyCode:L=vu()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:oe=J2,onlyRenderVisibleElements:te=!1,selectNodesOnDrag:K=!0,nodesDraggable:ie,nodesConnectable:ye,nodesFocusable:le,nodeOrigin:W=Z2,edgesFocusable:Ie,edgesUpdatable:Me,elementsSelectable:ht,defaultViewport:tn=eN,minZoom:vn=.5,maxZoom:nn=2,translateExtent:Ti=Kf,preventScrolling:tr=!0,nodeExtent:Fr,defaultMarkerColor:bs="#b1b1b7",zoomOnScroll:xi=!0,zoomOnPinch:ft=!0,panOnScroll:Lt=!1,panOnScrollSpeed:br=.5,panOnScrollMode:zr=Xr.Free,zoomOnDoubleClick:Br=!0,panOnDrag:Mn=!0,onPaneClick:_n,onPaneMouseEnter:zs,onPaneMouseMove:Lc,onPaneMouseLeave:Bs,onPaneScroll:Fc,onPaneContextMenu:$m,children:Ur,onEdgeUpdate:hT,onEdgeContextMenu:fT,onEdgeDoubleClick:dT,onEdgeMouseEnter:pT,onEdgeMouseMove:mT,onEdgeMouseLeave:gT,onEdgeUpdateStart:yT,onEdgeUpdateEnd:vT,edgeUpdaterRadius:_T=10,onNodesChange:wT,onEdgesChange:ET,noDragClassName:ST="nodrag",noWheelClassName:TT="nowheel",noPanClassName:Om="nopan",fitView:xT=!1,fitViewOptions:IT,connectOnClick:AT=!0,attributionPosition:CT,proOptions:RT,defaultEdgeOptions:kT,elevateNodesOnSelect:PT=!0,elevateEdgesOnSelect:NT=!1,disableKeyboardA11y:Lm=!1,autoPanOnConnect:DT=!0,autoPanOnNodeDrag:VT=!0,connectionRadius:MT=20,isValidConnection:$T,onError:OT,style:LT,id:Fm,nodeDragThreshold:FT,...bT},zT)=>{const bc=Fm||"1";return V.createElement("div",{...bT,style:{...LT,...tN},ref:zT,className:kt(["react-flow",i]),"data-testid":"rf__wrapper",id:Fm},V.createElement(A1,null,V.createElement(K2,{onInit:u,onMove:c,onMoveStart:h,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:m,onNodeMouseMove:g,onNodeMouseLeave:_,onNodeContextMenu:T,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:o,connectionLineType:C,connectionLineStyle:M,connectionLineComponent:U,connectionLineContainerStyle:Y,selectionKeyCode:se,selectionOnDrag:he,selectionMode:pe,deleteKeyCode:Q,multiSelectionKeyCode:Re,panActivationKeyCode:Ee,zoomActivationKeyCode:L,onlyRenderVisibleElements:te,selectNodesOnDrag:K,defaultViewport:tn,translateExtent:Ti,minZoom:vn,maxZoom:nn,preventScrolling:tr,zoomOnScroll:xi,zoomOnPinch:ft,zoomOnDoubleClick:Br,panOnScroll:Lt,panOnScrollSpeed:br,panOnScrollMode:zr,panOnDrag:Mn,onPaneClick:_n,onPaneMouseEnter:zs,onPaneMouseMove:Lc,onPaneMouseLeave:Bs,onPaneScroll:Fc,onPaneContextMenu:$m,onSelectionContextMenu:k,onSelectionStart:b,onSelectionEnd:x,onEdgeUpdate:hT,onEdgeContextMenu:fT,onEdgeDoubleClick:dT,onEdgeMouseEnter:pT,onEdgeMouseMove:mT,onEdgeMouseLeave:gT,onEdgeUpdateStart:yT,onEdgeUpdateEnd:vT,edgeUpdaterRadius:_T,defaultMarkerColor:bs,noDragClassName:ST,noWheelClassName:TT,noPanClassName:Om,elevateEdgesOnSelect:NT,rfId:bc,disableKeyboardA11y:Lm,nodeOrigin:W,nodeExtent:Fr}),V.createElement(qP,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:d,onConnectStart:v,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:p,nodesDraggable:ie,nodesConnectable:ye,nodesFocusable:le,edgesFocusable:Ie,edgesUpdatable:Me,elementsSelectable:ht,elevateNodesOnSelect:PT,minZoom:vn,maxZoom:nn,nodeExtent:Fr,onNodesChange:wT,onEdgesChange:ET,snapToGrid:ne,snapGrid:oe,connectionMode:S,translateExtent:Ti,connectOnClick:AT,defaultEdgeOptions:kT,fitView:xT,fitViewOptions:IT,onNodesDelete:O,onEdgesDelete:B,onNodeDragStart:A,onNodeDrag:R,onNodeDragStop:$,onSelectionDrag:E,onSelectionDragStart:D,onSelectionDragStop:N,noPanClassName:Om,nodeOrigin:W,rfId:bc,autoPanOnConnect:DT,autoPanOnNodeDrag:VT,onError:OT,connectionRadius:MT,isValidConnection:$T,nodeDragThreshold:FT}),V.createElement(jP,{onSelectionChange:q}),Ur,V.createElement(yP,{proOptions:RT,position:CT}),V.createElement(YP,{rfId:bc,disableKeyboardA11y:Lm})))});C1.displayName="ReactFlow";function R1(e){return t=>{const[n,r]=P.useState(t),i=P.useCallback(s=>r(o=>e(s,o)),[]);return[n,r,i]}}const nN=R1(d1),rN=R1(c2);function iN(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function sN(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function oN(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function aN(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function lN(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ho=({children:e,className:t,...n})=>V.createElement("button",{type:"button",className:kt(["react-flow__controls-button",t]),...n},e);ho.displayName="ControlButton";const uN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),k1=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:u,children:c,position:h="bottom-left"})=>{const f=tt(),[d,v]=P.useState(!1),{isInteractive:y,minZoomReached:w,maxZoomReached:p}=Fe(uN,St),{zoomIn:m,zoomOut:g,fitView:_}=$p();if(P.useEffect(()=>{v(!0)},[]),!d)return null;const T=()=>{m(),s==null||s()},I=()=>{g(),o==null||o()},A=()=>{_(i),a==null||a()},R=()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return V.createElement(Lw,{className:kt(["react-flow__controls",u]),position:h,style:e,"data-testid":"rf__controls"},t&&V.createElement(V.Fragment,null,V.createElement(ho,{onClick:T,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:p},V.createElement(iN,null)),V.createElement(ho,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},V.createElement(sN,null))),n&&V.createElement(ho,{className:"react-flow__controls-fitview",onClick:A,title:"fit view","aria-label":"fit view"},V.createElement(oN,null)),r&&V.createElement(ho,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity"},y?V.createElement(lN,null):V.createElement(aN,null)),c)};k1.displayName="Controls";var cN=P.memo(k1),dn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(dn||(dn={}));function hN({color:e,dimensions:t,lineWidth:n}){return V.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function fN({color:e,radius:t}){return V.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const dN={[dn.Dots]:"#91919a",[dn.Lines]:"#eee",[dn.Cross]:"#e2e2e2"},pN={[dn.Dots]:1,[dn.Lines]:1,[dn.Cross]:6},mN=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function P1({id:e,variant:t=dn.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:l}){const u=P.useRef(null),{transform:c,patternId:h}=Fe(mN,St),f=o||dN[t],d=r||pN[t],v=t===dn.Dots,y=t===dn.Cross,w=Array.isArray(n)?n:[n,n],p=[w[0]*c[2]||1,w[1]*c[2]||1],m=d*c[2],g=y?[m,m]:p,_=v?[m/s,m/s]:[g[0]/s,g[1]/s];return V.createElement("svg",{className:kt(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},V.createElement("pattern",{id:h+e,x:c[0]%p[0],y:c[1]%p[1],width:p[0],height:p[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},v?V.createElement(fN,{color:f,radius:m/s}):V.createElement(hN,{dimensions:g,color:f,lineWidth:i})),V.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+e})`}))}P1.displayName="Background";var gN=P.memo(P1),N1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ly=V.createContext&&V.createContext(N1),xr=function(){return xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xr.apply(this,arguments)},yN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function D1(e){return e&&e.map(function(t,n){return V.createElement(t.tag,xr({key:n},t.attr),D1(t.child))})}function ac(e){return function(t){return V.createElement(vN,xr({attr:xr({},e.attr)},t),D1(e.child))}}function vN(e){var t=function(n){var r=e.attr,i=e.size,s=e.title,o=yN(e,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),V.createElement("svg",xr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:xr(xr({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&V.createElement("title",null,s),e.children)};return Ly!==void 0?V.createElement(Ly.Consumer,null,function(n){return t(n)}):t(N1)}function _N(e){return ac({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function wN(e){return ac({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function EN(e){return ac({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function SN(e){return ac({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}]})(e)}var Fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},TN=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},M1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,d=u&63;l||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(V1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):TN(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const h=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new xN;const f=s<<2|a>>4;if(r.push(f),u!==64){const d=a<<4&240|u>>2;if(r.push(d),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IN=function(e){const t=V1(e);return M1.encodeByteArray(t,!0)},Eu=function(e){return IN(e).replace(/\./g,"")},AN=function(e){try{return M1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=()=>CN().__FIREBASE_DEFAULTS__,kN=()=>{if(typeof process>"u"||typeof Fy>"u")return;const e=Fy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},PN=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&AN(e[1]);return t&&JSON.parse(t)},$1=()=>{try{return RN()||kN()||PN()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},NN=e=>{var t,n;return(n=(t=$1())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},DN=e=>{const t=NN(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},O1=()=>{var e;return(e=$1())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Eu(JSON.stringify(n)),Eu(JSON.stringify(o)),a].join(".")}function $N(){try{return typeof indexedDB=="object"}catch{return!1}}function ON(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="FirebaseError";class Ns extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=LN,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L1.prototype.create)}}class L1{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?FN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ns(i,a,r)}}function FN(e,t){return e.replace(bN,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const bN=/\{\$([^}]+)}/g;function Qf(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(by(s)&&by(o)){if(!Qf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function by(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(e){return e&&e._delegate?e._delegate:e}class na{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new VN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(UN(t))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Wr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wr){return this.instances.has(t)}getOptions(t=Wr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BN(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Wr){return this.component?this.component.multipleInstances?t:Wr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BN(e){return e===Wr?void 0:e}function UN(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new zN(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(_e||(_e={}));const HN={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},qN=_e.INFO,WN={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},GN=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=WN[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class F1{constructor(t){this.name=t,this._logLevel=qN,this._logHandler=GN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _e))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?HN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...t),this._logHandler(this,_e.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...t),this._logHandler(this,_e.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...t),this._logHandler(this,_e.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...t),this._logHandler(this,_e.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...t),this._logHandler(this,_e.ERROR,...t)}}const KN=(e,t)=>t.some(n=>e instanceof n);let zy,By;function QN(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YN(){return By||(By=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b1=new WeakMap,Yf=new WeakMap,z1=new WeakMap,Sh=new WeakMap,Lp=new WeakMap;function XN(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Ir(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&b1.set(n,e)}).catch(()=>{}),Lp.set(t,e),t}function ZN(e){if(Yf.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Yf.set(e,t)}let Xf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Yf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||z1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function JN(e){Xf=e(Xf)}function eD(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Th(this),t,...n);return z1.set(r,t.sort?t.sort():[t]),Ir(r)}:YN().includes(e)?function(...t){return e.apply(Th(this),t),Ir(b1.get(this))}:function(...t){return Ir(e.apply(Th(this),t))}}function tD(e){return typeof e=="function"?eD(e):(e instanceof IDBTransaction&&ZN(e),KN(e,QN())?new Proxy(e,Xf):e)}function Ir(e){if(e instanceof IDBRequest)return XN(e);if(Sh.has(e))return Sh.get(e);const t=tD(e);return t!==e&&(Sh.set(e,t),Lp.set(t,e)),t}const Th=e=>Lp.get(e);function nD(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Ir(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ir(o.result),l.oldVersion,l.newVersion,Ir(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const rD=["get","getKey","getAll","getAllKeys","count"],iD=["put","add","delete","clear"],xh=new Map;function Uy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xh.get(t))return xh.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=iD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return xh.set(t,s),s}JN(e=>({...e,get:(t,n,r)=>Uy(t,n)||e.get(t,n,r),has:(t,n)=>!!Uy(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oD(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Zf="@firebase/app",jy="0.9.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new F1("@firebase/app"),aD="@firebase/app-compat",lD="@firebase/analytics-compat",uD="@firebase/analytics",cD="@firebase/app-check-compat",hD="@firebase/app-check",fD="@firebase/auth",dD="@firebase/auth-compat",pD="@firebase/database",mD="@firebase/database-compat",gD="@firebase/functions",yD="@firebase/functions-compat",vD="@firebase/installations",_D="@firebase/installations-compat",wD="@firebase/messaging",ED="@firebase/messaging-compat",SD="@firebase/performance",TD="@firebase/performance-compat",xD="@firebase/remote-config",ID="@firebase/remote-config-compat",AD="@firebase/storage",CD="@firebase/storage-compat",RD="@firebase/firestore",kD="@firebase/firestore-compat",PD="firebase",ND="10.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]",DD={[Zf]:"fire-core",[aD]:"fire-core-compat",[uD]:"fire-analytics",[lD]:"fire-analytics-compat",[hD]:"fire-app-check",[cD]:"fire-app-check-compat",[fD]:"fire-auth",[dD]:"fire-auth-compat",[pD]:"fire-rtdb",[mD]:"fire-rtdb-compat",[gD]:"fire-fn",[yD]:"fire-fn-compat",[vD]:"fire-iid",[_D]:"fire-iid-compat",[wD]:"fire-fcm",[ED]:"fire-fcm-compat",[SD]:"fire-perf",[TD]:"fire-perf-compat",[xD]:"fire-rc",[ID]:"fire-rc-compat",[AD]:"fire-gcs",[CD]:"fire-gcs-compat",[RD]:"fire-fst",[kD]:"fire-fst-compat","fire-js":"fire-js",[PD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Map,ed=new Map;function VD(e,t){try{e.container.addComponent(t)}catch(n){di.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Tu(e){const t=e.name;if(ed.has(t))return di.debug(`There were multiple attempts to register component ${t}.`),!1;ed.set(t,e);for(const n of Su.values())VD(n,e);return!0}function MD(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ar=new L1("app","Firebase",$D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=ND;function B1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Jf,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Ar.create("bad-app-name",{appName:String(i)});if(n||(n=O1()),!n)throw Ar.create("no-options");const s=Su.get(i);if(s){if(Qf(n,s.options)&&Qf(r,s.config))return s;throw Ar.create("duplicate-app",{appName:i})}const o=new jN(i);for(const l of ed.values())o.addComponent(l);const a=new OD(n,r,o);return Su.set(i,a),a}function FD(e=Jf){const t=Su.get(e);if(!t&&e===Jf&&O1())return B1();if(!t)throw Ar.create("no-app",{appName:e});return t}function is(e,t,n){var r;let i=(r=DD[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),di.warn(a.join(" "));return}Tu(new na(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebase-heartbeat-database",zD=1,ra="firebase-heartbeat-store";let Ih=null;function U1(){return Ih||(Ih=nD(bD,zD,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ra)}}}).catch(e=>{throw Ar.create("idb-open",{originalErrorMessage:e.message})})),Ih}async function BD(e){try{return await(await U1()).transaction(ra).objectStore(ra).get(j1(e))}catch(t){if(t instanceof Ns)di.warn(t.message);else{const n=Ar.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});di.warn(n.message)}}}async function Hy(e,t){try{const r=(await U1()).transaction(ra,"readwrite");await r.objectStore(ra).put(t,j1(e)),await r.done}catch(n){if(n instanceof Ns)di.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function j1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=1024,jD=30*24*60*60*1e3;class HD{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qy();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=jD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qy(),{heartbeatsToSend:r,unsentEntries:i}=qD(this._heartbeatsCache.heartbeats),s=Eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qy(){return new Date().toISOString().substring(0,10)}function qD(e,t=UD){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wy(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wy(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $N()?ON().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wy(e){return Eu(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(e){Tu(new na("platform-logger",t=>new sD(t),"PRIVATE")),Tu(new na("heartbeat",t=>new HD(t),"PRIVATE")),is(Zf,jy,e),is(Zf,jy,"esm2017"),is("fire-js","")}GD("");var KD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G,Fp=Fp||{},ue=KD||self;function lc(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Aa(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function QD(e){return Object.prototype.hasOwnProperty.call(e,Ah)&&e[Ah]||(e[Ah]=++YD)}var Ah="closure_uid_"+(1e9*Math.random()>>>0),YD=0;function XD(e,t,n){return e.call.apply(e.bind,arguments)}function ZD(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function _t(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_t=XD:_t=ZD,_t.apply(null,arguments)}function dl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function nt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function Or(){this.s=this.s,this.o=this.o}var JD=0;Or.prototype.s=!1;Or.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),JD!=0)&&QD(this)};Or.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const H1=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function bp(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Gy(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(lc(r)){const i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function wt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var eV=function(){if(!ue.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};ue.addEventListener("test",n,t),ue.removeEventListener("test",n,t)}catch{}return e}();function ia(e){return/^[\s\xa0]*$/.test(e)}function uc(){var e=ue.navigator;return e&&(e=e.userAgent)?e:""}function xn(e){return uc().indexOf(e)!=-1}function zp(e){return zp[" "](e),e}zp[" "]=function(){};function tV(e,t){var n=GV;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var nV=xn("Opera"),ws=xn("Trident")||xn("MSIE"),q1=xn("Edge"),td=q1||ws,W1=xn("Gecko")&&!(uc().toLowerCase().indexOf("webkit")!=-1&&!xn("Edge"))&&!(xn("Trident")||xn("MSIE"))&&!xn("Edge"),rV=uc().toLowerCase().indexOf("webkit")!=-1&&!xn("Edge");function G1(){var e=ue.document;return e?e.documentMode:void 0}var nd;e:{var Ch="",Rh=function(){var e=uc();if(W1)return/rv:([^\);]+)(\)|;)/.exec(e);if(q1)return/Edge\/([\d\.]+)/.exec(e);if(ws)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(rV)return/WebKit\/(\S+)/.exec(e);if(nV)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Rh&&(Ch=Rh?Rh[1]:""),ws){var kh=G1();if(kh!=null&&kh>parseFloat(Ch)){nd=String(kh);break e}}nd=Ch}var rd;if(ue.document&&ws){var Ky=G1();rd=Ky||parseInt(nd,10)||void 0}else rd=void 0;var iV=rd;function sa(e,t){if(wt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(W1){e:{try{zp(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:sV[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&sa.$.h.call(this)}}nt(sa,wt);var sV={2:"touch",3:"pen",4:"mouse"};sa.prototype.h=function(){sa.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ca="closure_listenable_"+(1e6*Math.random()|0),oV=0;function aV(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++oV,this.fa=this.ia=!1}function cc(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Bp(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function lV(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function K1(e){const t={};for(const n in e)t[n]=e[n];return t}const Qy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q1(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<Qy.length;s++)n=Qy[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hc(e){this.src=e,this.g={},this.h=0}hc.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=sd(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new aV(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function id(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=H1(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(cc(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function sd(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var Up="closure_lm_"+(1e6*Math.random()|0),Ph={};function Y1(e,t,n,r,i){if(r&&r.once)return Z1(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y1(e,t[s],n,r,i);return null}return n=qp(n),e&&e[Ca]?e.O(t,n,Aa(r)?!!r.capture:!!r,i):X1(e,t,n,!1,r,i)}function X1(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Aa(i)?!!i.capture:!!i,a=Hp(e);if(a||(e[Up]=a=new hc(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=uV(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)eV||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(eE(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function uV(){function e(n){return t.call(e.src,e.listener,n)}const t=cV;return e}function Z1(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Z1(e,t[s],n,r,i);return null}return n=qp(n),e&&e[Ca]?e.P(t,n,Aa(r)?!!r.capture:!!r,i):X1(e,t,n,!0,r,i)}function J1(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)J1(e,t[s],n,r,i);else r=Aa(r)?!!r.capture:!!r,n=qp(n),e&&e[Ca]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=sd(s,n,r,i),-1<n&&(cc(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Hp(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sd(t,n,r,i)),(n=-1<e?t[e]:null)&&jp(n))}function jp(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Ca])id(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(eE(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Hp(t))?(id(n,e),n.h==0&&(n.src=null,t[Up]=null)):cc(e)}}}function eE(e){return e in Ph?Ph[e]:Ph[e]="on"+e}function cV(e,t){if(e.fa)e=!0;else{t=new sa(t,this);var n=e.listener,r=e.la||e.src;e.ia&&jp(e),e=n.call(r,t)}return e}function Hp(e){return e=e[Up],e instanceof hc?e:null}var Nh="__closure_events_fn_"+(1e9*Math.random()>>>0);function qp(e){return typeof e=="function"?e:(e[Nh]||(e[Nh]=function(t){return e.handleEvent(t)}),e[Nh])}function et(){Or.call(this),this.i=new hc(this),this.S=this,this.J=null}nt(et,Or);et.prototype[Ca]=!0;et.prototype.removeEventListener=function(e,t,n,r){J1(this,e,t,n,r)};function lt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new wt(t,e);else if(t instanceof wt)t.target=t.target||e;else{var i=t;t=new wt(r,e),Q1(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=pl(o,r,!0,t)&&i}if(o=t.g=e,i=pl(o,r,!0,t)&&i,i=pl(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=pl(o,r,!1,t)&&i}et.prototype.N=function(){if(et.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)cc(n[r]);delete e.g[t],e.h--}}this.J=null};et.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};et.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function pl(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&id(e.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Wp=ue.JSON.stringify;class hV{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function fV(){var e=Gp;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class dV{constructor(){this.h=this.g=null}add(t,n){const r=tE.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var tE=new hV(()=>new pV,e=>e.reset());class pV{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function mV(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function gV(e){ue.setTimeout(()=>{throw e},0)}let oa,aa=!1,Gp=new dV,nE=()=>{const e=ue.Promise.resolve(void 0);oa=()=>{e.then(yV)}};var yV=()=>{for(var e;e=fV();){try{e.h.call(e.g)}catch(n){gV(n)}var t=tE;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}aa=!1};function fc(e,t){et.call(this),this.h=e||1,this.g=t||ue,this.j=_t(this.qb,this),this.l=Date.now()}nt(fc,et);G=fc.prototype;G.ga=!1;G.T=null;G.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lt(this,"tick"),this.ga&&(Kp(this),this.start()))}};G.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Kp(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}G.N=function(){fc.$.N.call(this),Kp(this),delete this.g};function Qp(e,t,n){if(typeof e=="function")n&&(e=_t(e,n));else if(e&&typeof e.handleEvent=="function")e=_t(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:ue.setTimeout(e,t||0)}function rE(e){e.g=Qp(()=>{e.g=null,e.i&&(e.i=!1,rE(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class vV extends Or{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:rE(this)}N(){super.N(),this.g&&(ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(e){Or.call(this),this.h=e,this.g={}}nt(la,Or);var Yy=[];function iE(e,t,n,r){Array.isArray(n)||(n&&(Yy[0]=n.toString()),n=Yy);for(var i=0;i<n.length;i++){var s=Y1(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function sE(e){Bp(e.g,function(t,n){this.g.hasOwnProperty(n)&&jp(t)},e),e.g={}}la.prototype.N=function(){la.$.N.call(this),sE(this)};la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function dc(){this.g=!0}dc.prototype.Ea=function(){this.g=!1};function _V(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function wV(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function Gi(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+SV(e,n)+(r?" "+r:"")})}function EV(e,t){e.info(function(){return"TIMEOUT: "+t})}dc.prototype.info=function(){};function SV(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Wp(n)}catch{return t}}var wi={},Xy=null;function pc(){return Xy=Xy||new et}wi.Ta="serverreachability";function oE(e){wt.call(this,wi.Ta,e)}nt(oE,wt);function ua(e){const t=pc();lt(t,new oE(t))}wi.STAT_EVENT="statevent";function aE(e,t){wt.call(this,wi.STAT_EVENT,e),this.stat=t}nt(aE,wt);function It(e){const t=pc();lt(t,new aE(t,e))}wi.Ua="timingevent";function lE(e,t){wt.call(this,wi.Ua,e),this.size=t}nt(lE,wt);function Ra(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return ue.setTimeout(function(){e()},t)}var mc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yp(){}Yp.prototype.h=null;function Zy(e){return e.h||(e.h=e.i())}function cE(){}var ka={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xp(){wt.call(this,"d")}nt(Xp,wt);function Zp(){wt.call(this,"c")}nt(Zp,wt);var od;function gc(){}nt(gc,Yp);gc.prototype.g=function(){return new XMLHttpRequest};gc.prototype.i=function(){return{}};od=new gc;function Pa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new la(this),this.P=TV,e=td?125:void 0,this.V=new fc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hE}function hE(){this.i=null,this.g="",this.h=!1}var TV=45e3,fE={},ad={};G=Pa.prototype;G.setTimeout=function(e){this.P=e};function ld(e,t,n){e.L=1,e.A=vc(Xn(t)),e.u=n,e.S=!0,dE(e,null)}function dE(e,t){e.G=Date.now(),Na(e),e.B=Xn(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),EE(n.i,"t",r),e.o=0,n=e.l.J,e.h=new hE,e.g=UE(e.l,n?t:null,!e.u),0<e.O&&(e.M=new vV(_t(e.Pa,e,e.g),e.O)),iE(e.U,e.g,"readystatechange",e.nb),t=e.I?K1(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ua(),_V(e.j,e.v,e.B,e.m,e.W,e.u)}G.nb=function(e){e=e.target;const t=this.M;t&&In(e)==3?t.l():this.Pa(e)};G.Pa=function(e){try{if(e==this.g)e:{const c=In(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||td||this.g&&(this.h.h||this.g.ja()||n0(this.g)))){this.J||c!=4||t==7||(t==8||0>=h?ua(3):ua(2)),yc(this);var n=this.g.da();this.ca=n;t:if(pE(this)){var r=n0(this.g);e="";var i=r.length,s=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),Co(this);var o="";break t}this.h.i=new ue.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,wV(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ia(a)){var u=a;break t}}u=null}if(n=u)Gi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ud(this,n);else{this.i=!1,this.s=3,It(12),Zr(this),Co(this);break e}}this.S?(mE(this,c,o),td&&this.i&&c==3&&(iE(this.U,this.V,"tick",this.mb),this.V.start())):(Gi(this.j,this.m,o,null),ud(this,o)),c==4&&Zr(this),this.i&&!this.J&&(c==4?FE(this.l,this):(this.i=!1,Na(this)))}else HV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Zr(this),Co(this)}}}catch{}finally{}};function pE(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function mE(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=xV(e,n),i==ad){t==4&&(e.s=4,It(14),r=!1),Gi(e.j,e.m,null,"[Incomplete Response]");break}else if(i==fE){e.s=4,It(15),Gi(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Gi(e.j,e.m,i,null),ud(e,i);pE(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,It(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),im(t),t.M=!0,It(11))):(Gi(e.j,e.m,n,"[Invalid Chunked Response]"),Zr(e),Co(e))}G.mb=function(){if(this.g){var e=In(this.g),t=this.g.ja();this.o<t.length&&(yc(this),mE(this,e,t),this.i&&e!=4&&Na(this))}};function xV(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?ad:(n=Number(t.substring(n,r)),isNaN(n)?fE:(r+=1,r+n>t.length?ad:(t=t.slice(r,r+n),e.o=r+n,t)))}G.cancel=function(){this.J=!0,Zr(this)};function Na(e){e.Y=Date.now()+e.P,gE(e,e.P)}function gE(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Ra(_t(e.lb,e),t)}function yc(e){e.C&&(ue.clearTimeout(e.C),e.C=null)}G.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(EV(this.j,this.B),this.L!=2&&(ua(),It(17)),Zr(this),this.s=2,Co(this)):gE(this,this.Y-e)};function Co(e){e.l.H==0||e.J||FE(e.l,e)}function Zr(e){yc(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Kp(e.V),sE(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ud(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||cd(n.i,e))){if(!e.K&&cd(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Au(n),Sc(n);else break e;rm(n),It(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ra(_t(n.ib,n),6e3));if(1>=xE(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Jr(n,11)}else if((e.K||n.g==e)&&Au(n),!ia(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const v=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Jp(s,s.h),s.h=null))}if(r.F){const y=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Pe(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=BE(r,r.J?r.pa:null,r.Y),o.K){IE(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(yc(a),Na(a)),r.g=o}else OE(r);0<n.j.length&&Tc(n)}else u[0]!="stop"&&u[0]!="close"||Jr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Jr(n,7):nm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ua(4)}catch{}}function IV(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(lc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function AV(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(lc(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function yE(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(lc(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=AV(e),r=IV(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var vE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CV(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ii(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ii){this.h=e.h,xu(this,e.j),this.s=e.s,this.g=e.g,Iu(this,e.m),this.l=e.l;var t=e.i,n=new ca;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Jy(this,n),this.o=e.o}else e&&(t=String(e).match(vE))?(this.h=!1,xu(this,t[1]||"",!0),this.s=fo(t[2]||""),this.g=fo(t[3]||"",!0),Iu(this,t[4]),this.l=fo(t[5]||"",!0),Jy(this,t[6]||"",!0),this.o=fo(t[7]||"")):(this.h=!1,this.i=new ca(null,this.h))}ii.prototype.toString=function(){var e=[],t=this.j;t&&e.push(po(t,e0,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(po(t,e0,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(po(n,n.charAt(0)=="/"?PV:kV,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",po(n,DV)),e.join("")};function Xn(e){return new ii(e)}function xu(e,t,n){e.j=n?fo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Iu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jy(e,t,n){t instanceof ca?(e.i=t,VV(e.i,e.h)):(n||(t=po(t,NV)),e.i=new ca(t,e.h))}function Pe(e,t,n){e.i.set(t,n)}function vc(e){return Pe(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function po(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,RV),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function RV(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var e0=/[#\/\?@]/g,kV=/[#\?:]/g,PV=/[#\?]/g,NV=/[#\?@]/g,DV=/#/g;function ca(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lr(e){e.g||(e.g=new Map,e.h=0,e.i&&CV(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}G=ca.prototype;G.add=function(e,t){Lr(this),this.i=null,e=Ds(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function _E(e,t){Lr(e),t=Ds(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wE(e,t){return Lr(e),t=Ds(e,t),e.g.has(t)}G.forEach=function(e,t){Lr(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};G.ta=function(){Lr(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};G.Z=function(e){Lr(this);let t=[];if(typeof e=="string")wE(this,e)&&(t=t.concat(this.g.get(Ds(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};G.set=function(e,t){return Lr(this),this.i=null,e=Ds(this,e),wE(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};G.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function EE(e,t,n){_E(e,t),0<n.length&&(e.i=null,e.g.set(Ds(e,t),bp(n)),e.h+=n.length)}G.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function Ds(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function VV(e,t){t&&!e.j&&(Lr(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(_E(this,r),EE(this,i,n))},e)),e.j=t}var MV=class{constructor(e,t){this.g=e,this.map=t}};function SE(e){this.l=e||$V,ue.PerformanceNavigationTiming?(e=ue.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(ue.g&&ue.g.Ka&&ue.g.Ka()&&ue.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $V=10;function TE(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function xE(e){return e.h?1:e.g?e.g.size:0}function cd(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Jp(e,t){e.g?e.g.add(t):e.h=t}function IE(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}SE.prototype.cancel=function(){if(this.i=AE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function AE(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return bp(e.i)}var OV=class{stringify(e){return ue.JSON.stringify(e,void 0)}parse(e){return ue.JSON.parse(e,void 0)}};function LV(){this.g=new OV}function FV(e,t,n){const r=n||"";try{yE(e,function(i,s){let o=i;Aa(i)&&(o=Wp(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bV(e,t){const n=new dc;if(ue.Image){const r=new Image;r.onload=dl(ml,n,r,"TestLoadImage: loaded",!0,t),r.onerror=dl(ml,n,r,"TestLoadImage: error",!1,t),r.onabort=dl(ml,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=dl(ml,n,r,"TestLoadImage: timeout",!1,t),ue.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function ml(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function _c(e){this.l=e.ec||null,this.j=e.ob||!1}nt(_c,Yp);_c.prototype.g=function(){return new wc(this.l,this.j)};_c.prototype.i=function(e){return function(){return e}}({});function wc(e,t){et.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=em,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nt(wc,et);var em=0;G=wc.prototype;G.open=function(e,t){if(this.readyState!=em)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ha(this)};G.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ue).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};G.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=em};G.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ue.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CE(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function CE(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}G.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Da(this):ha(this),this.readyState==3&&CE(this)}};G.Za=function(e){this.g&&(this.response=this.responseText=e,Da(this))};G.Ya=function(e){this.g&&(this.response=e,Da(this))};G.ka=function(){this.g&&Da(this)};function Da(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ha(e)}G.setRequestHeader=function(e,t){this.v.append(e,t)};G.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};G.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function ha(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var zV=ue.JSON.parse;function Be(e){et.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=RE,this.L=this.M=!1}nt(Be,et);var RE="",BV=/^https?$/i,UV=["POST","PUT"];G=Be.prototype;G.Oa=function(e){this.M=e};G.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():od.g(),this.C=this.u?Zy(this.u):Zy(od),this.g.onreadystatechange=_t(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){t0(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ue.FormData&&e instanceof ue.FormData,!(0<=H1(UV,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{NE(this),0<this.B&&((this.L=jV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_t(this.ua,this)):this.A=Qp(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){t0(this,s)}};function jV(e){return ws&&typeof e.timeout=="number"&&e.ontimeout!==void 0}G.ua=function(){typeof Fp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lt(this,"timeout"),this.abort(8))};function t0(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,kE(e),Ec(e)}function kE(e){e.F||(e.F=!0,lt(e,"complete"),lt(e,"error"))}G.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,lt(this,"complete"),lt(this,"abort"),Ec(this))};G.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ec(this,!0)),Be.$.N.call(this)};G.La=function(){this.s||(this.G||this.v||this.l?PE(this):this.kb())};G.kb=function(){PE(this)};function PE(e){if(e.h&&typeof Fp<"u"&&(!e.C[1]||In(e)!=4||e.da()!=2)){if(e.v&&In(e)==4)Qp(e.La,0,e);else if(lt(e,"readystatechange"),In(e)==4){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(vE)[1]||null;!i&&ue.self&&ue.self.location&&(i=ue.self.location.protocol.slice(0,-1)),r=!BV.test(i?i.toLowerCase():"")}n=r}if(n)lt(e,"complete"),lt(e,"success");else{e.m=6;try{var s=2<In(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",kE(e)}}finally{Ec(e)}}}}function Ec(e,t){if(e.g){NE(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||lt(e,"ready");try{n.onreadystatechange=r}catch{}}}function NE(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ue.clearTimeout(e.A),e.A=null)}G.isActive=function(){return!!this.g};function In(e){return e.g?e.g.readyState:0}G.da=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}};G.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};G.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),zV(t)}};function n0(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case RE:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function HV(e){const t={};e=(e.g&&2<=In(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(ia(e[r]))continue;var n=mV(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}lV(t,function(r){return r.join(", ")})}G.Ia=function(){return this.m};G.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function DE(e){let t="";return Bp(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function tm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=DE(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Pe(e,t,n))}function to(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function VE(e){this.Ga=0,this.j=[],this.l=new dc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=to("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=to("baseRetryDelayMs",5e3,e),this.hb=to("retryDelaySeedMs",1e4,e),this.eb=to("forwardChannelMaxRetries",2,e),this.xa=to("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new SE(e&&e.concurrentRequestLimit),this.Ja=new LV,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}G=VE.prototype;G.ra=8;G.H=1;function nm(e){if(ME(e),e.H==3){var t=e.W++,n=Xn(e.I);if(Pe(n,"SID",e.K),Pe(n,"RID",t),Pe(n,"TYPE","terminate"),Va(e,n),t=new Pa(e,e.l,t),t.L=2,t.A=vc(Xn(n)),n=!1,ue.navigator&&ue.navigator.sendBeacon)try{n=ue.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&ue.Image&&(new Image().src=t.A,n=!0),n||(t.g=UE(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Na(t)}zE(e)}function Sc(e){e.g&&(im(e),e.g.cancel(),e.g=null)}function ME(e){Sc(e),e.u&&(ue.clearTimeout(e.u),e.u=null),Au(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&ue.clearTimeout(e.m),e.m=null)}function Tc(e){if(!TE(e.i)&&!e.m){e.m=!0;var t=e.Na;oa||nE(),aa||(oa(),aa=!0),Gp.add(t,e),e.C=0}}function qV(e,t){return xE(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Ra(_t(e.Na,e,t),bE(e,e.C)),e.C++,!0)}G.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Pa(this,this.l,e);let s=this.s;if(this.U&&(s?(s=K1(s),Q1(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=$E(this,i,t),n=Xn(this.I),Pe(n,"RID",e),Pe(n,"CVER",22),this.F&&Pe(n,"X-HTTP-Session-Id",this.F),Va(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(DE(s)))+"&"+t:this.o&&tm(n,this.o,s)),Jp(this.i,i),this.bb&&Pe(n,"TYPE","init"),this.P?(Pe(n,"$req",t),Pe(n,"SID","null"),i.aa=!0,ld(i,n,null)):ld(i,n,t),this.H=2}}else this.H==3&&(e?r0(this,e):this.j.length==0||TE(this.i)||r0(this))};function r0(e,t){var n;t?n=t.m:n=e.W++;const r=Xn(e.I);Pe(r,"SID",e.K),Pe(r,"RID",n),Pe(r,"AID",e.V),Va(e,r),e.o&&e.s&&tm(r,e.o,e.s),n=new Pa(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=$E(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Jp(e.i,n),ld(n,r,t)}function Va(e,t){e.na&&Bp(e.na,function(n,r){Pe(t,r,n)}),e.h&&yE({},function(n,r){Pe(t,r,n)})}function $E(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_t(e.h.Va,e.h,e):null;e:{var i=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{FV(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function OE(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;oa||nE(),aa||(oa(),aa=!0),Gp.add(t,e),e.A=0}}function rm(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Ra(_t(e.Ma,e),bE(e,e.A)),e.A++,!0)}G.Ma=function(){if(this.u=null,LE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ra(_t(this.jb,this),e)}};G.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,It(10),Sc(this),LE(this))};function im(e){e.B!=null&&(ue.clearTimeout(e.B),e.B=null)}function LE(e){e.g=new Pa(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Xn(e.wa);Pe(t,"RID","rpc"),Pe(t,"SID",e.K),Pe(t,"AID",e.V),Pe(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Pe(t,"TO",e.qa),Pe(t,"TYPE","xmlhttp"),Va(e,t),e.o&&e.s&&tm(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=vc(Xn(t)),n.u=null,n.S=!0,dE(n,e)}G.ib=function(){this.v!=null&&(this.v=null,Sc(this),rm(this),It(19))};function Au(e){e.v!=null&&(ue.clearTimeout(e.v),e.v=null)}function FE(e,t){var n=null;if(e.g==t){Au(e),im(e),e.g=null;var r=2}else if(cd(e.i,t))n=t.F,IE(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=pc(),lt(r,new lE(r,n)),Tc(e)}else OE(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&qV(e,t)||r==2&&rm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Jr(e,5);break;case 4:Jr(e,10);break;case 3:Jr(e,6);break;default:Jr(e,2)}}}function bE(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Jr(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=_t(e.pb,e);n||(n=new ii("//www.google.com/images/cleardot.gif"),ue.location&&ue.location.protocol=="http"||xu(n,"https"),vc(n)),bV(n.toString(),r)}else It(2);e.H=0,e.h&&e.h.za(t),zE(e),ME(e)}G.pb=function(e){e?(this.l.info("Successfully pinged google.com"),It(2)):(this.l.info("Failed to ping google.com"),It(1))};function zE(e){if(e.H=0,e.ma=[],e.h){const t=AE(e.i);(t.length!=0||e.j.length!=0)&&(Gy(e.ma,t),Gy(e.ma,e.j),e.i.i.length=0,bp(e.j),e.j.length=0),e.h.ya()}}function BE(e,t,n){var r=n instanceof ii?Xn(n):new ii(n);if(r.g!="")t&&(r.g=t+"."+r.g),Iu(r,r.m);else{var i=ue.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ii(null);r&&xu(s,r),t&&(s.g=t),i&&Iu(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Pe(r,n,t),Pe(r,"VER",e.ra),Va(e,r),r}function UE(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Be(new _c({ob:n})):new Be(e.va),t.Oa(e.J),t}G.isActive=function(){return!!this.h&&this.h.isActive(this)};function jE(){}G=jE.prototype;G.Ba=function(){};G.Aa=function(){};G.za=function(){};G.ya=function(){};G.isActive=function(){return!0};G.Va=function(){};function Cu(){if(ws&&!(10<=Number(iV)))throw Error("Environmental error: no available transport.")}Cu.prototype.g=function(e,t){return new jt(e,t)};function jt(e,t){et.call(this),this.g=new VE(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ia(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ia(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Vs(this)}nt(jt,et);jt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;It(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=BE(e,null,e.Y),Tc(e)};jt.prototype.close=function(){nm(this.g)};jt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Wp(e),e=n);t.j.push(new MV(t.fb++,e)),t.H==3&&Tc(t)};jt.prototype.N=function(){this.g.h=null,delete this.j,nm(this.g),delete this.g,jt.$.N.call(this)};function HE(e){Xp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}nt(HE,Xp);function qE(){Zp.call(this),this.status=1}nt(qE,Zp);function Vs(e){this.g=e}nt(Vs,jE);Vs.prototype.Ba=function(){lt(this.g,"a")};Vs.prototype.Aa=function(e){lt(this.g,new HE(e))};Vs.prototype.za=function(e){lt(this.g,new qE)};Vs.prototype.ya=function(){lt(this.g,"b")};function WV(){this.blockSize=-1}function mn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}nt(mn,WV);mn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Dh(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}mn.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)Dh(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Dh(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Dh(this,r),i=0;break}}this.h=i,this.i+=t};mn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function xe(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var GV={};function sm(e){return-128<=e&&128>e?tV(e,function(t){return new xe([t|0],0>t?-1:0)}):new xe([e|0],0>e?-1:0)}function An(e){if(isNaN(e)||!isFinite(e))return ss;if(0>e)return st(An(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=hd;return new xe(t,0)}function WE(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return st(WE(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=An(Math.pow(t,8)),r=ss,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=An(Math.pow(t,s)),r=r.R(s).add(An(o))):(r=r.R(n),r=r.add(An(o)))}return r}var hd=4294967296,ss=sm(0),fd=sm(1),i0=sm(16777216);G=xe.prototype;G.ea=function(){if(Kt(this))return-st(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:hd+r)*t,t*=hd}return e};G.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Bn(this))return"0";if(Kt(this))return"-"+st(this).toString(e);for(var t=An(Math.pow(e,6)),n=this,r="";;){var i=ku(n,t).g;n=Ru(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Bn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};G.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Bn(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Kt(e){return e.h==-1}G.X=function(e){return e=Ru(this,e),Kt(e)?-1:Bn(e)?0:1};function st(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new xe(n,~e.h).add(fd)}G.abs=function(){return Kt(this)?st(this):this};G.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new xe(n,n[n.length-1]&-2147483648?-1:0)};function Ru(e,t){return e.add(st(t))}G.R=function(e){if(Bn(this)||Bn(e))return ss;if(Kt(this))return Kt(e)?st(this).R(st(e)):st(st(this).R(e));if(Kt(e))return st(this.R(st(e)));if(0>this.X(i0)&&0>e.X(i0))return An(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,l=e.D(i)&65535;n[2*r+2*i]+=o*l,gl(n,2*r+2*i),n[2*r+2*i+1]+=s*l,gl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,gl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,gl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new xe(n,0)};function gl(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function no(e,t){this.g=e,this.h=t}function ku(e,t){if(Bn(t))throw Error("division by zero");if(Bn(e))return new no(ss,ss);if(Kt(e))return t=ku(st(e),t),new no(st(t.g),st(t.h));if(Kt(t))return t=ku(e,st(t)),new no(st(t.g),t.h);if(30<e.g.length){if(Kt(e)||Kt(t))throw Error("slowDivide_ only works with positive integers.");for(var n=fd,r=t;0>=r.X(e);)n=s0(n),r=s0(r);var i=Pi(n,1),s=Pi(r,1);for(r=Pi(r,2),n=Pi(n,2);!Bn(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Pi(r,1),n=Pi(n,1)}return t=Ru(e,i.R(t)),new no(i,t)}for(i=ss;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=An(n),o=s.R(t);Kt(o)||0<o.X(e);)n-=r,s=An(n),o=s.R(t);Bn(s)&&(s=fd),i=i.add(s),e=Ru(e,o)}return new no(i,e)}G.gb=function(e){return ku(this,e).h};G.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new xe(n,this.h&e.h)};G.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new xe(n,this.h|e.h)};G.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new xe(n,this.h^e.h)};function s0(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new xe(n,e.h)}function Pi(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new xe(i,e.h)}Cu.prototype.createWebChannel=Cu.prototype.g;jt.prototype.send=jt.prototype.u;jt.prototype.open=jt.prototype.m;jt.prototype.close=jt.prototype.close;mc.NO_ERROR=0;mc.TIMEOUT=8;mc.HTTP_ERROR=6;uE.COMPLETE="complete";cE.EventType=ka;ka.OPEN="a";ka.CLOSE="b";ka.ERROR="c";ka.MESSAGE="d";et.prototype.listen=et.prototype.O;Be.prototype.listenOnce=Be.prototype.P;Be.prototype.getLastError=Be.prototype.Sa;Be.prototype.getLastErrorCode=Be.prototype.Ia;Be.prototype.getStatus=Be.prototype.da;Be.prototype.getResponseJson=Be.prototype.Wa;Be.prototype.getResponseText=Be.prototype.ja;Be.prototype.send=Be.prototype.ha;Be.prototype.setWithCredentials=Be.prototype.Oa;mn.prototype.digest=mn.prototype.l;mn.prototype.reset=mn.prototype.reset;mn.prototype.update=mn.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=An;xe.fromString=WE;var KV=function(){return new Cu},QV=function(){return pc()},Vh=mc,YV=uE,XV=wi,o0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yl=cE,ZV=Be,JV=mn,os=xe;const a0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new F1("@firebase/firestore");function ro(){return pi.logLevel}function J(e,...t){if(pi.logLevel<=_e.DEBUG){const n=t.map(om);pi.debug(`Firestore (${Ms}): ${e}`,...n)}}function Zn(e,...t){if(pi.logLevel<=_e.ERROR){const n=t.map(om);pi.error(`Firestore (${Ms}): ${e}`,...n)}}function Es(e,...t){if(pi.logLevel<=_e.WARN){const n=t.map(om);pi.warn(`Firestore (${Ms}): ${e}`,...n)}}function om(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(e="Unexpected state"){const t=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: `+e;throw Zn(t),new Error(t)}function Ce(e,t){e||ae()}function fe(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Ns{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class e4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class t4{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class n4{constructor(t){this.t=t,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jn,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new GE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ce(t===null||typeof t=="string"),new gt(t)}}class r4{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class i4{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new r4(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s4{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o4{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new s4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=a4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Se(e,t){return e<t?-1:e>t?1:0}function Ss(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ye.fromMillis(Date.now())}static fromDate(t){return Ye.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Se(this.nanoseconds,t.nanoseconds):Se(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ce(t)}static min(){return new ce(new Ye(0,0))}static max(){return new ce(new Ye(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n,r){n===void 0?n=0:n>t.length&&ae(),r===void 0?r=t.length-n:r>t.length-n&&ae(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return fa.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof fa?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ne extends fa{construct(t,n,r){return new Ne(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const l4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends fa{construct(t,n,r){return new ot(t,n,r)}static isValidIdentifier(t){return l4.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.path=t}static fromPath(t){return new re(Ne.fromString(t))}static fromName(t){return new re(Ne.fromString(t).popFirst(5))}static empty(){return new re(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ne.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new re(new Ne(t.slice()))}}function u4(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Pr(i,re.empty(),t)}function c4(e){return new Pr(e.readTime,e.key,-1)}class Pr{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(ce.min(),re.empty(),-1)}static max(){return new Pr(ce.max(),re.empty(),-1)}}function h4(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=re.comparator(e.documentKey,t.documentKey),n!==0?n:Se(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==f4)throw e;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):z.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):z.reject(n)}static resolve(t){return new z((n,r)=>{n(t)})}static reject(t){return new z((n,r)=>{r(t)})}static waitFor(t){return new z((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(t){let n=z.resolve(!1);for(const r of t)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new z((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(t[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new z((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function $a(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}am._e=-1;function xc(e){return e==null}function Pu(e){return e===0&&1/e==-1/0}function p4(e){return typeof e=="number"&&Number.isInteger(e)&&!Pu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function QE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,n){this.comparator=t,this.root=n||it.EMPTY}insert(t,n){return new be(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,it.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vl(this.root,t,this.comparator,!1)}getReverseIterator(){return new vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vl(this.root,t,this.comparator,!0)}}class vl{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class it{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=s??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new it(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const t=this.left.check();if(t!==this.right.check())throw ae();return t+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(t,n,r,i,s){return this}insert(t,n,r){return new it(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(t){return new u0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof ut)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ut(this.comparator);return n.data=t,n}}class u0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.fields=t,t.sort(ot.comparator)}static empty(){return new cn([])}unionWith(t){let n=new ut(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new cn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ss(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new YE("Invalid base64 string: "+s):s}}(t);return new Tt(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Tt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Se(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const m4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(e){if(Ce(!!e),typeof e=="string"){let t=0;const n=m4.exec(e);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:He(e.seconds),nanos:He(e.nanos)}}function He(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mi(e){return typeof e=="string"?Tt.fromBase64String(e):Tt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function um(e){const t=e.mapValue.fields.__previous_value__;return lm(t)?um(t):t}function da(e){const t=Nr(e.mapValue.fields.__local_write_time__.timestampValue);return new Ye(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(t,n,r,i,s,o,a,l,u){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class pa{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof pa&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lm(e)?4:y4(e)?9007199254740991:10:ae()}function Dn(e,t){if(e===t)return!0;const n=gi(e);if(n!==gi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return da(e).isEqual(da(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nr(i.timestampValue),a=Nr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return mi(i.bytesValue).isEqual(mi(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=He(i.doubleValue),a=He(s.doubleValue);return o===a?Pu(o)===Pu(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Ss(e.arrayValue.values||[],t.arrayValue.values||[],Dn);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(l0(o)!==l0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dn(o[l],a[l])))return!1;return!0}(e,t);default:return ae()}}function ma(e,t){return(e.values||[]).find(n=>Dn(n,t))!==void 0}function Ts(e,t){if(e===t)return 0;const n=gi(e),r=gi(t);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=He(s.integerValue||s.doubleValue),l=He(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return c0(e.timestampValue,t.timestampValue);case 4:return c0(da(e),da(t));case 5:return Se(e.stringValue,t.stringValue);case 6:return function(s,o){const a=mi(s),l=mi(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Se(a[u],l[u]);if(c!==0)return c}return Se(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Se(He(s.latitude),He(o.latitude));return a!==0?a:Se(He(s.longitude),He(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=Ts(a[u],l[u]);if(c)return c}return Se(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===_l.mapValue&&o===_l.mapValue)return 0;if(s===_l.mapValue)return 1;if(o===_l.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const f=Se(l[h],c[h]);if(f!==0)return f;const d=Ts(a[l[h]],u[c[h]]);if(d!==0)return d}return Se(l.length,c.length)}(e.mapValue,t.mapValue);default:throw ae()}}function c0(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Se(e,t);const n=Nr(e),r=Nr(t),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function xs(e){return dd(e)}function dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return mi(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return re.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=dd(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dd(n.fields[o])}`;return i+"}"}(e.mapValue):ae()}function h0(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function pd(e){return!!e&&"integerValue"in e}function cm(e){return!!e&&"arrayValue"in e}function f0(e){return!!e&&"nullValue"in e}function d0(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fl(e){return!!e&&"mapValue"in e}function Ro(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ro(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ro(e.arrayValue.values[n]);return t}return Object.assign({},e)}function y4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this.value=t}static empty(){return new Qt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Fl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ro(n)}setAll(t){let n=ot.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ro(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());Fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Dn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){$s(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Qt(Ro(this.value))}}function XE(e){const t=[];return $s(e.fields,(n,r)=>{const i=new ot([n]);if(Fl(r)){const s=XE(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new vt(t,0,ce.min(),ce.min(),ce.min(),Qt.empty(),0)}static newFoundDocument(t,n,r,i){return new vt(t,1,n,ce.min(),r,i,0)}static newNoDocument(t,n){return new vt(t,2,n,ce.min(),ce.min(),Qt.empty(),0)}static newUnknownDocument(t,n){return new vt(t,3,n,ce.min(),ce.min(),Qt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof vt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,n){this.position=t,this.inclusive=n}}function p0(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Ts(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function m0(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,n="asc"){this.field=t,this.dir=n}}function v4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class We extends ZE{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new w4(t,n,r):n==="array-contains"?new T4(t,r):n==="in"?new x4(t,r):n==="not-in"?new I4(t,r):n==="array-contains-any"?new A4(t,r):new We(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new E4(t,r):new S4(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ts(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(Ts(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends ZE{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new gn(t,n)}matches(t){return JE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function JE(e){return e.op==="and"}function eS(e){return _4(e)&&JE(e)}function _4(e){for(const t of e.filters)if(t instanceof gn)return!1;return!0}function md(e){if(e instanceof We)return e.field.canonicalString()+e.op.toString()+xs(e.value);if(eS(e))return e.filters.map(t=>md(t)).join(",");{const t=e.filters.map(n=>md(n)).join(",");return`${e.op}(${t})`}}function tS(e,t){return e instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(e,t):e instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tS(o,i.filters[a]),!0):!1}(e,t):void ae()}function nS(e){return e instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${xs(n.value)}`}(e):e instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(nS).join(" ,")+"}"}(e):"Filter"}class w4 extends We{constructor(t,n,r){super(t,n,r),this.key=re.fromName(r.referenceValue)}matches(t){const n=re.comparator(t.key,this.key);return this.matchesComparison(n)}}class E4 extends We{constructor(t,n){super(t,"in",n),this.keys=rS("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class S4 extends We{constructor(t,n){super(t,"not-in",n),this.keys=rS("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function rS(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class T4 extends We{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return cm(n)&&ma(n.arrayValue,this.value)}}class x4 extends We{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class I4 extends We{constructor(t,n){super(t,"not-in",n)}matches(t){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!ma(this.value.arrayValue,n)}}class A4 extends We{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!cm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function g0(e,t=null,n=[],r=[],i=null,s=null,o=null){return new C4(e,t,n,r,i,s,o)}function hm(e){const t=fe(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>md(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>xs(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>xs(r)).join(",")),t.ce=n}return t.ce}function fm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!v4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tS(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!m0(e.startAt,t.startAt)&&m0(e.endAt,t.endAt)}function gd(e){return re.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function R4(e,t,n,r,i,s,o,a){return new Oa(e,t,n,r,i,s,o,a)}function dm(e){return new Oa(e)}function y0(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function iS(e){return e.collectionGroup!==null}function ko(e){const t=fe(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ut(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new Du(s,r))}),n.has(ot.keyField().canonicalString())||t.le.push(new Du(ot.keyField(),r))}return t.le}function Pn(e){const t=fe(e);return t.he||(t.he=k4(t,ko(e))),t.he}function k4(e,t){if(e.limitType==="F")return g0(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Du(i.field,s)});const n=e.endAt?new Nu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nu(e.startAt.position,e.startAt.inclusive):null;return g0(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function yd(e,t){const n=e.filters.concat([t]);return new Oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function vd(e,t,n){return new Oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ic(e,t){return fm(Pn(e),Pn(t))&&e.limitType===t.limitType}function sS(e){return`${hm(Pn(e))}|lt:${e.limitType}`}function Ni(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nS(i)).join(", ")}]`),xc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xs(i)).join(",")),`Target(${r})`}(Pn(e))}; limitType=${e.limitType})`}function Ac(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of ko(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=p0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ko(r),i)||r.endAt&&!function(o,a,l){const u=p0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ko(r),i))}(e,t)}function P4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function oS(e){return(t,n)=>{let r=!1;for(const i of ko(e)){const s=N4(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function N4(e,t,n){const r=e.field.isKeyField()?re.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ts(l,u):ae()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){$s(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return QE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new be(re.comparator);function Jn(){return D4}const aS=new be(re.comparator);function mo(...e){let t=aS;for(const n of e)t=t.insert(n.key,n);return t}function lS(e){let t=aS;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function ei(){return Po()}function uS(){return Po()}function Po(){return new Os(e=>e.toString(),(e,t)=>e.isEqual(t))}const V4=new be(re.comparator),M4=new ut(re.comparator);function me(...e){let t=M4;for(const n of e)t=t.add(n);return t}const $4=new ut(Se);function O4(){return $4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(t)?"-0":t}}function hS(e){return{integerValue:""+e}}function L4(e,t){return p4(t)?hS(t):cS(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function F4(e,t,n){return e instanceof Vu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lm(s)&&(s=um(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof ga?dS(e,t):e instanceof ya?pS(e,t):function(i,s){const o=fS(i,s),a=v0(o)+v0(i.Ie);return pd(o)&&pd(i.Ie)?hS(a):cS(i.serializer,a)}(e,t)}function b4(e,t,n){return e instanceof ga?dS(e,t):e instanceof ya?pS(e,t):n}function fS(e,t){return e instanceof Mu?function(r){return pd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class Vu extends Cc{}class ga extends Cc{constructor(t){super(),this.elements=t}}function dS(e,t){const n=mS(t);for(const r of e.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ya extends Cc{constructor(t){super(),this.elements=t}}function pS(e,t){let n=mS(t);for(const r of e.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}class Mu extends Cc{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function v0(e){return He(e.integerValue||e.doubleValue)}function mS(e){return cm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function z4(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof ga&&i instanceof ga||r instanceof ya&&i instanceof ya?Ss(r.elements,i.elements,Dn):r instanceof Mu&&i instanceof Mu?Dn(r.Ie,i.Ie):r instanceof Vu&&i instanceof Vu}(e.transform,t.transform)}class B4{constructor(t,n){this.version=t,this.transformResults=n}}class Hn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Hn}static exists(t){return new Hn(void 0,t)}static updateTime(t){return new Hn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Rc{}function gS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new vS(e.key,Hn.none()):new La(e.key,e.data,Hn.none());{const n=e.data,r=Qt.empty();let i=new ut(ot.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ei(e.key,r,new cn(i.toArray()),Hn.none())}}function U4(e,t,n){e instanceof La?function(i,s,o){const a=i.value.clone(),l=w0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Ei?function(i,s,o){if(!bl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=w0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(yS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function No(e,t,n,r){return e instanceof La?function(s,o,a,l){if(!bl(s.precondition,o))return a;const u=s.value.clone(),c=E0(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ei?function(s,o,a,l){if(!bl(s.precondition,o))return a;const u=E0(s.fieldTransforms,l,o),c=o.data;return c.setAll(yS(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(s,o,a){return bl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function j4(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=fS(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function _0(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ss(r,i,(s,o)=>z4(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class La extends Rc{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ei extends Rc{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yS(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function w0(e,t,n){const r=new Map;Ce(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,b4(o,a,n[i]))}return r}function E0(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,F4(s,o,t))}return r}class vS extends Rc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H4 extends Rc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&U4(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=No(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=No(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=uS();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=gS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),me())}isEqual(t){return this.batchId===t.batchId&&Ss(this.mutations,t.mutations,(n,r)=>_0(n,r))&&Ss(this.baseMutations,t.baseMutations,(n,r)=>_0(n,r))}}class pm{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Ce(t.mutations.length===r.length);let i=function(){return V4}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new pm(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ve;function K4(e){switch(e){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function _S(e){if(e===void 0)return Zn("GRPC error has no .code"),F.UNKNOWN;switch(e){case je.OK:return F.OK;case je.CANCELLED:return F.CANCELLED;case je.UNKNOWN:return F.UNKNOWN;case je.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case je.INTERNAL:return F.INTERNAL;case je.UNAVAILABLE:return F.UNAVAILABLE;case je.UNAUTHENTICATED:return F.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case je.NOT_FOUND:return F.NOT_FOUND;case je.ALREADY_EXISTS:return F.ALREADY_EXISTS;case je.PERMISSION_DENIED:return F.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case je.ABORTED:return F.ABORTED;case je.OUT_OF_RANGE:return F.OUT_OF_RANGE;case je.UNIMPLEMENTED:return F.UNIMPLEMENTED;case je.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(ve=je||(je={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new os([4294967295,4294967295],0);function S0(e){const t=Q4().encode(e),n=new JV;return n.update(t),new Uint8Array(n.digest())}function T0(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new os([n,r],0),new os([i,s],0)]}class mm{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(r<0)throw new go(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=os.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(os.fromNumber(r)));return i.compare(Y4)===1&&(i=new os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=S0(t),[r,i]=T0(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new mm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=S0(t),[r,i]=T0(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Fa.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new kc(ce.min(),i,new be(Se),Jn(),me())}}class Fa{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Fa(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class wS{constructor(t,n){this.targetId=t,this.fe=n}}class ES{constructor(t,n,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class x0{constructor(){this.ge=0,this.pe=A0(),this.ye=Tt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=me(),n=me(),r=me();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Fa(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=A0()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ce(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class X4{constructor(t){this.Le=t,this.ke=new Map,this.qe=Jn(),this.Qe=I0(),this.Ke=new be(Se)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:ae()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const s=i.target;if(gd(s))if(r===0){const o=new re(s.path);this.We(n,o,vt.newNoDocument(o,ce.min()))}else Ce(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=mi(r).toUint8Array()}catch(l){if(l instanceof YE)return Es("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mm(o,i,s)}catch(l){return Es(l instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&gd(a.target)){const l=new re(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,vt.newNoDocument(l,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=me();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const i=new kc(t,n,this.Ke,this.qe,r);return this.qe=Jn(),this.Qe=I0(),this.Ke=new be(Se),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new x0,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new ut(Se),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||J("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new x0),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function I0(){return new be(re.comparator)}function A0(){return new be(re.comparator)}const Z4={asc:"ASCENDING",desc:"DESCENDING"},J4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eM={and:"AND",or:"OR"};class tM{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _d(e,t){return e.useProto3Json||xc(t)?t:{value:t}}function $u(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nM(e,t){return $u(e,t.toTimestamp())}function Nn(e){return Ce(!!e),ce.fromTimestamp(function(n){const r=Nr(n);return new Ye(r.seconds,r.nanos)}(e))}function gm(e,t){return function(r){return new Ne(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function TS(e){const t=Ne.fromString(e);return Ce(CS(t)),t}function wd(e,t){return gm(e.databaseId,t.path)}function Mh(e,t){const n=TS(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new re(xS(n))}function Ed(e,t){return gm(e.databaseId,t)}function rM(e){const t=TS(e);return t.length===4?Ne.emptyPath():xS(t)}function Sd(e){return new Ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xS(e){return Ce(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function C0(e,t,n){return{name:wd(e,t),fields:n.value.mapValue.fields}}function iM(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Ce(c===void 0||typeof c=="string"),Tt.fromBase64String(c||"")):(Ce(c===void 0||c instanceof Uint8Array),Tt.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const c=u.code===void 0?F.UNKNOWN:_S(u.code);return new Z(c,u.message||"")}(o);n=new ES(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mh(e,r.document.name),s=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):ce.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=vt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new zl(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Mh(e,r.document),s=r.readTime?Nn(r.readTime):ce.min(),o=vt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new zl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Mh(e,r.document),s=r.removedTargetIds||[];n=new zl([],s,i,null)}else{if(!("filter"in t))return ae();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new G4(i,s),a=r.targetId;n=new wS(a,o)}}return n}function sM(e,t){let n;if(t instanceof La)n={update:C0(e,t.key,t.value)};else if(t instanceof vS)n={delete:wd(e,t.key)};else if(t instanceof Ei)n={update:C0(e,t.key,t.data),updateMask:pM(t.fieldMask)};else{if(!(t instanceof H4))return ae();n={verify:wd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ya)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ae()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(e,t.precondition)),n}function oM(e,t){return e&&e.length>0?(Ce(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Nn(i.updateTime):Nn(s);return o.isEqual(ce.min())&&(o=Nn(s)),new B4(o,i.transformResults||[])}(n,t))):[]}function aM(e,t){return{documents:[Ed(e,t.path)]}}function lM(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=Ed(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ed(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return AS(gn.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Di(h.field),direction:hM(h.dir)}}(u))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=_d(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function uM(e){let t=rM(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(h){const f=IS(h);return f instanceof gn&&eS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new Du(Vi(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,xc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,d=h.values||[];return new Nu(d,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,d=h.values||[];return new Nu(d,f)}(n.endAt)),R4(t,i,o,s,a,"F",l,u)}function cM(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function IS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vi(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vi(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vi(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vi(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(e):e.fieldFilter!==void 0?function(n){return We.create(Vi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>IS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(e):ae()}function hM(e){return Z4[e]}function fM(e){return J4[e]}function dM(e){return eM[e]}function Di(e){return{fieldPath:e.canonicalString()}}function Vi(e){return ot.fromServerFormat(e.fieldPath)}function AS(e){return e instanceof We?function(n){if(n.op==="=="){if(d0(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d0(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(n.field),op:fM(n.op),value:n.value}}}(e):e instanceof gn?function(n){const r=n.getFilters().map(i=>AS(i));return r.length===1?r[0]:{compositeFilter:{op:dM(n.op),filters:r}}}(e):ae()}function pM(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function CS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,n,r,i,s=ce.min(),o=ce.min(),a=Tt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(t){this.ut=t}}function gM(e){const t=uM({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?vd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.on=new vM}addToCollectionParentIndex(t,n){return this.on.add(n),z.resolve()}getCollectionParents(t,n){return z.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return z.resolve()}deleteFieldIndex(t,n){return z.resolve()}deleteAllFieldIndexes(t){return z.resolve()}createTargetIndexes(t,n){return z.resolve()}getDocumentsMatchingTarget(t,n){return z.resolve(null)}getIndexType(t,n){return z.resolve(0)}getFieldIndexes(t,n){return z.resolve([])}getNextCollectionGroupToUpdate(t){return z.resolve(null)}getMinOffset(t,n){return z.resolve(Pr.min())}getMinOffsetFromCollectionGroup(t,n){return z.resolve(Pr.min())}updateCollectionGroup(t,n,r){return z.resolve()}updateIndexEntries(t,n){return z.resolve()}}class vM{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new ut(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ut(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Is(0)}static Nn(){return new Is(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.changes=new Os(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,vt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&No(r.mutation,i,cn.empty(),Ye.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,me()).next(()=>r))}getLocalViewOfDocuments(t,n,r=me()){const i=ei();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=mo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=ei();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,me()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Jn();const o=Po(),a=function(){return Po()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Ei)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),No(c.mutation,u,c.mutation.getFieldMask(),Ye.now())):o.set(u.key,cn.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new wM(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Po();let i=new be((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||cn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||me()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=uS();c.forEach(f=>{if(!s.has(f)){const d=gS(n.get(f),r.get(f));d!==null&&h.set(f,d),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):iS(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):z.resolve(ei());let a=-1,l=s;return o.next(u=>z.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?z.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,me())).next(c=>({batchId:a,changes:lS(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new re(n)).next(r=>{let i=mo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=mo();return this.indexManager.getCollectionParents(t,s).next(a=>z.forEach(a,l=>{const u=function(h,f){return new Oa(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next(c=>{c.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,vt.newInvalidDocument(c)))});let a=mo();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&No(c.mutation,u,cn.empty(),Ye.now()),Ac(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return z.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Nn(i.createTime)}}(n)),z.resolve()}getNamedQuery(t,n){return z.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(i){return{name:i.name,query:gM(i.bundledQuery),readTime:Nn(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.overlays=new be(re.comparator),this.lr=new Map}getOverlay(t,n){return z.resolve(this.overlays.get(n))}getOverlays(t,n){const r=ei();return z.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.lt(t,n,s)}),z.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),z.resolve()}getOverlaysForCollection(t,n,r){const i=ei(),s=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new be((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ei(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ei(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return z.resolve(a)}lt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W4(n,r));let s=this.lr.get(n);s===void 0&&(s=me(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.hr=new ut(Xe.Pr),this.Ir=new ut(Xe.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Xe(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Xe(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new re(new Ne([])),r=new Xe(n,t),i=new Xe(n,t+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new re(new Ne([])),r=new Xe(n,t),i=new Xe(n,t+1);let s=me();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Xe(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Xe{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return re.comparator(t.key,n.key)||Se(t.gr,n.gr)}static Tr(t,n){return Se(t.gr,n.gr)||re.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ut(Xe.Pr)}checkEmpty(t){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Xe(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(t,n){return z.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ut(Se);return n.forEach(i=>{const s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),z.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new Xe(new re(s),0);let a=new ut(Se);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.gr)),!0)},o),z.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Ce(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return z.forEach(n.mutations,i=>{const s=new Xe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Xe(n,0),i=this.yr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,z.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(t){this.Cr=t,this.docs=function(){return new be(re.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(t,n){let r=Jn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Jn();const o=n.path,a=new re(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||h4(c4(c),r)<=0||(i.has(c.key)||Ac(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(t,n,r,i){ae()}vr(t,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new AM(this)}getSize(t){return z.resolve(this.size)}}class AM extends _M{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(t,i)):this._r.removeEntry(r)}),z.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t){this.persistence=t,this.Fr=new Os(n=>hm(n),fm),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ym,this.targetCount=0,this.Nr=Is.On()}forEachTarget(t,n){return this.Fr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(t){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return z.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),z.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new Is(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,z.resolve()}updateTargetData(t,n){return this.kn(n),z.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(t){return z.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return z.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),z.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),z.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return z.resolve(r)}containsKey(t,n){return z.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(t,n){this.Br={},this.overlays={},this.Lr=new am(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new CM(this),this.indexManager=new yM,this.remoteDocumentCache=function(i){return new IM(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new mM(n),this.Kr=new SM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new TM,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new xM(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){J("MemoryPersistence","Starting transaction:",t);const i=new kM(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(t,n){return z.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class kM extends d4{constructor(t){super(),this.currentSequenceNumber=t}}class vm{constructor(t){this.persistence=t,this.Gr=new ym,this.zr=null}static jr(t){return new vm(t)}get Hr(){if(this.zr)return this.zr;throw ae()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),z.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),z.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Hr,r=>{const i=re.fromPath(r);return this.Jr(t,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return z.or([()=>z.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}static Qi(t,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _m(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PM;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,r,i){return r.documentReadCount<this.Ui?(ro()<=_e.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),z.resolve()):(ro()<=_e.DEBUG&&J("QueryEngine","Query:",Ni(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(ro()<=_e.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pn(n))):z.resolve())}zi(t,n){if(y0(n))return z.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vd(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=me(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.Yi(n,a);return this.Zi(n,u,o,l.readTime)?this.zi(t,vd(n,null,"F")):this.Xi(t,u,n,l)}))})))}ji(t,n,r,i){return y0(n)||i.isEqual(ce.min())?z.resolve(null):this.Gi.getDocuments(t,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?z.resolve(null):(ro()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ni(n)),this.Xi(t,o,n,u4(i,-1)).next(a=>a))})}Yi(t,n){let r=new ut(oS(t));return n.forEach((i,s)=>{Ac(t,s)&&(r=r.add(s))}),r}Zi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(t,n,r){return ro()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ni(n)),this.Gi.getDocumentsMatchingQuery(t,n,Pr.min(),r)}Xi(t,n,r,i){return this.Gi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(t,n,r,i){this.persistence=t,this.es=n,this.serializer=i,this.ts=new be(Se),this.ns=new Os(s=>hm(s),fm),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new EM(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function VM(e,t,n,r){return new DM(e,t,n,r)}async function RS(e,t){const n=fe(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=me();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}function MM(e,t){const n=fe(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,f=h.keys();let d=z.resolve();return f.forEach(v=>{d=d.next(()=>c.getEntry(l,v)).next(y=>{const w=u.docVersions.get(v);Ce(w!==null),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),c.addEntry(y)))})}),d.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function kS(e){const t=fe(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function $M(e,t){const n=fe(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];t.targetChanges.forEach((c,h)=>{const f=i.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,h)));let d=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?d=d.withResumeToken(Tt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,r)),i=i.insert(h,d),function(y,w,p){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(f,d,c)&&a.push(n.qr.updateTargetData(s,d))});let l=Jn(),u=me();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(OM(s,o,t.documentUpdates).next(c=>{l=c.us,u=c.cs})),!r.isEqual(ce.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(h=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ts=i,s))}function OM(e,t,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Jn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:i}})}function LM(e,t){const n=fe(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function FM(e,t){const n=fe(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,t).next(s=>s?(i=s,z.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new dr(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function Td(e,t,n){const r=fe(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$a(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function R0(e,t,n){const r=fe(e);let i=ce.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=fe(l),f=h.ns.get(c);return f!==void 0?z.resolve(h.ts.get(f)):h.qr.getTargetData(u,c)}(r,o,Pn(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?i:ce.min(),n?s:me())).next(a=>(bM(r,P4(t),a),{documents:a,ls:s})))}function bM(e,t,n){let r=e.rs.get(t)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.rs.set(t,r)}class k0{constructor(){this.activeTargetIds=O4()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zM{constructor(){this.eo=new k0,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new k0,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl=null;function $h(){return wl===null?wl=function(){return 268435456+Math.round(2147483648*Math.random())}():wl++,"0x"+wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class HM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=$h(),l=this.So(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,l,u,i).then(c=>(J("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Es("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ms}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=UM[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,i){const s=$h();return new Promise((o,a)=>{const l=new ZV;l.setWithCredentials(!0),l.listenOnce(YV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vh.NO_ERROR:const c=l.getResponseJson();J(mt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case Vh.TIMEOUT:J(mt,`RPC '${t}' ${s} timed out`),a(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const h=l.getStatus();if(J(mt,`RPC '${t}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const v=function(w){const p=w.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(p)>=0?p:F.UNKNOWN}(d.status);a(new Z(v,d.message))}else a(new Z(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(mt,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(i);J(mt,`RPC '${t}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}vo(t,n,r){const i=$h(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=KV(),a=QV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");J(mt,`Creating RPC '${t}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let f=!1,d=!1;const v=new jM({co:w=>{d?J(mt,`Not sending because RPC '${t}' stream ${i} is closed:`,w):(f||(J(mt,`Opening RPC '${t}' stream ${i} transport.`),h.open(),f=!0),J(mt,`RPC '${t}' stream ${i} sending:`,w),h.send(w))},lo:()=>h.close()}),y=(w,p,m)=>{w.listen(p,g=>{try{m(g)}catch(_){setTimeout(()=>{throw _},0)}})};return y(h,yl.EventType.OPEN,()=>{d||J(mt,`RPC '${t}' stream ${i} transport opened.`)}),y(h,yl.EventType.CLOSE,()=>{d||(d=!0,J(mt,`RPC '${t}' stream ${i} transport closed`),v.Ro())}),y(h,yl.EventType.ERROR,w=>{d||(d=!0,Es(mt,`RPC '${t}' stream ${i} transport errored:`,w),v.Ro(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),y(h,yl.EventType.MESSAGE,w=>{var p;if(!d){const m=w.data[0];Ce(!!m);const g=m,_=g.error||((p=g[0])===null||p===void 0?void 0:p.error);if(_){J(mt,`RPC '${t}' stream ${i} received error:`,_);const T=_.status;let I=function($){const O=je[$];if(O!==void 0)return _S(O)}(T),A=_.message;I===void 0&&(I=F.INTERNAL,A="Unknown error status: "+T+" with message "+_.message),d=!0,v.Ro(new Z(I,A)),h.close()}else J(mt,`RPC '${t}' stream ${i} received:`,m),v.Vo(m)}}),y(a,XV.STAT_EVENT,w=>{w.stat===o0.PROXY?J(mt,`RPC '${t}' stream ${i} detected buffering proxy`):w.stat===o0.NOPROXY&&J(mt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ao()},0),v}}function Oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(e){return new tM(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(t,n,r=1e3,i=1.5,s=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(t,n,r,i,s,o,a,l){this.si=t,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new PS(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{t(()=>{const i=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return J("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qM extends NS{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=iM(this.serializer,t),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Nn(o.readTime):ce.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=Sd(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=gd(l)?{documents:aM(s,l)}:{query:lM(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SS(s,o.resumeToken);const u=_d(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=$u(s,o.snapshotVersion.toTimestamp());const u=_d(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const r=cM(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=Sd(this.serializer),n.removeTarget=t,this.e_(n)}}class WM extends NS{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(Ce(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=oM(t.writeResults,t.commitTime),r=Nn(t.commitTime);return this.listener.I_(r,n)}return Ce(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=Sd(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>sM(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(t,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())})}Co(t,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(F.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class KM{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Zn(n),this.f_=!1):J("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{Si(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=fe(l);u.C_.add(4),await ba(u),u.M_.set("Unknown"),u.C_.delete(4),await Nc(u)}(this))})}),this.M_=new KM(r,i)}}async function Nc(e){if(Si(e))for(const t of e.v_)await t(!0)}async function ba(e){for(const t of e.v_)await t(!1)}function DS(e,t){const n=fe(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Sm(n)?Em(n):Ls(n).Ho()&&wm(n,t))}function VS(e,t){const n=fe(e),r=Ls(n);n.D_.delete(t),r.Ho()&&MS(n,t),n.D_.size===0&&(r.Ho()?r.Zo():Si(n)&&n.M_.set("Unknown"))}function wm(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ce.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ls(e).u_(t)}function MS(e,t){e.x_.Oe(t),Ls(e).c_(t)}function Em(e){e.x_=new X4({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Ls(e).start(),e.M_.g_()}function Sm(e){return Si(e)&&!Ls(e).jo()&&e.D_.size>0}function Si(e){return fe(e).C_.size===0}function $S(e){e.x_=void 0}async function YM(e){e.D_.forEach((t,n)=>{wm(e,t)})}async function XM(e,t){$S(e),Sm(e)?(e.M_.w_(t),Em(e)):e.M_.set("Unknown")}async function ZM(e,t,n){if(e.M_.set("Online"),t instanceof ES&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(e,t)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ou(e,r)}else if(t instanceof zl?e.x_.$e(t):t instanceof wS?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(ce.min()))try{const r=await kS(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.D_.get(u);c&&s.D_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.D_.get(l);if(!c)return;s.D_.set(l,c.withResumeToken(Tt.EMPTY_BYTE_STRING,c.snapshotVersion)),MS(s,l);const h=new dr(c.target,l,u,c.sequenceNumber);wm(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Ou(e,r)}}async function Ou(e,t,n){if(!$a(t))throw t;e.C_.add(1),await ba(e),e.M_.set("Offline"),n||(n=()=>kS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Nc(e)})}function OS(e,t){return t().catch(n=>Ou(e,n,t))}async function Dc(e){const t=fe(e),n=Dr(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;JM(t);)try{const i=await LM(t.localStore,r);if(i===null){t.b_.length===0&&n.Zo();break}r=i.batchId,e3(t,i)}catch(i){await Ou(t,i)}LS(t)&&FS(t)}function JM(e){return Si(e)&&e.b_.length<10}function e3(e,t){e.b_.push(t);const n=Dr(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function LS(e){return Si(e)&&!Dr(e).jo()&&e.b_.length>0}function FS(e){Dr(e).start()}async function t3(e){Dr(e).E_()}async function n3(e){const t=Dr(e);for(const n of e.b_)t.P_(n.mutations)}async function r3(e,t,n){const r=e.b_.shift(),i=pm.from(r,t,n);await OS(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Dc(e)}async function i3(e,t){t&&Dr(e).h_&&await async function(r,i){if(function(o){return K4(o)&&o!==F.ABORTED}(i.code)){const s=r.b_.shift();Dr(r).Yo(),await OS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Dc(r)}}(e,t),LS(e)&&FS(e)}async function N0(e,t){const n=fe(e);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Si(n);n.C_.add(3),await ba(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Nc(n)}async function s3(e,t){const n=fe(e);t?(n.C_.delete(2),await Nc(n)):t||(n.C_.add(2),await ba(n),n.M_.set("Unknown"))}function Ls(e){return e.O_||(e.O_=function(n,r,i){const s=fe(n);return s.A_(),new qM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:YM.bind(null,e),Io:XM.bind(null,e),a_:ZM.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),Sm(e)?Em(e):e.M_.set("Unknown")):(await e.O_.stop(),$S(e))})),e.O_}function Dr(e){return e.N_||(e.N_=function(n,r,i){const s=fe(n);return s.A_(),new WM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:t3.bind(null,e),Io:i3.bind(null,e),T_:n3.bind(null,e),I_:r3.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await Dc(e)):(await e.N_.stop(),e.b_.length>0&&(J("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Tm(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(e,t){if(Zn("AsyncQueue",`${t}: ${e}`),$a(e))return new Z(F.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.comparator=t?(n,r)=>t(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=mo(),this.sortedSet=new be(this.comparator)}static emptySet(t){return new as(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof as)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.B_=new be(re.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):ae():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class As{constructor(t,n,r,i,s,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new As(t,n,as.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ic(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.k_=void 0,this.listeners=[]}}class a3{constructor(){this.queries=new Os(t=>sS(t),Ic),this.onlineState="Unknown",this.q_=new Set}}async function bS(e,t){const n=fe(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new o3),i)try{s.k_=await n.onListen(r)}catch(o){const a=xm(o,`Initialization of query '${Ni(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&Im(n)}async function zS(e,t){const n=fe(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function l3(e,t){const n=fe(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&Im(n)}function u3(e,t,n){const r=fe(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Im(e){e.q_.forEach(t=>{t.next()})}class BS{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new As(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=As.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t){this.key=t}}class jS{constructor(t){this.key=t}}class c3{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=me(),this.mutatedKeys=me(),this._a=oS(t),this.aa=new as(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new D0,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,h)=>{const f=i.get(c),d=Ac(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let w=!1;f&&d?f.data.isEqual(d.data)?v!==y&&(r.track({type:3,doc:d}),w=!0):this.ha(f,d)||(r.track({type:2,doc:d}),w=!0,(l&&this._a(d,l)>0||u&&this._a(d,u)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),w=!0):f&&!d&&(r.track({type:1,doc:f}),w=!0,(l||u)&&(a=!0)),w&&(d?(o=o.add(d),s=y?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((c,h)=>function(d,v){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return y(d)-y(v)}(c.type,h.type)||this._a(c.doc,h.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],l=this.oa.size===0&&this.current&&!i?1:0,u=l!==this.sa;return this.sa=l,o.length!==0||u?{snapshot:new As(this.query,t.aa,s,o,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new D0,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=me(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new jS(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new US(r))}),n}da(t){this.ia=t.ls,this.oa=me();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return As.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class h3{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class f3{constructor(t){this.key=t,this.Ra=!1}}class d3{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Os(a=>sS(a),Ic),this.fa=new Map,this.ga=new Set,this.pa=new be(re.comparator),this.ya=new Map,this.wa=new ym,this.Sa={},this.ba=new Map,this.Da=Is.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function p3(e,t){const n=x3(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await FM(n.localStore,Pn(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await m3(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&DS(n.remoteStore,o)}return i}async function m3(e,t,n,r,i){e.va=(h,f,d)=>async function(y,w,p,m){let g=w.view.ca(p);g.Zi&&(g=await R0(y.localStore,w.query,!1).then(({documents:A})=>w.view.ca(A,g)));const _=m&&m.targetChanges.get(w.targetId),T=m&&m.targetMismatches.get(w.targetId)!=null,I=w.view.applyChanges(g,y.isPrimaryClient,_,T);return M0(y,w.targetId,I.Ta),I.snapshot}(e,h,f,d);const s=await R0(e.localStore,t,!0),o=new c3(t,s.ls),a=o.ca(s.documents),l=Fa.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);M0(e,n,u.Ta);const c=new h3(t,n,o);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),u.snapshot}async function g3(e,t){const n=fe(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!Ic(s,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Td(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),VS(n.remoteStore,r.targetId),xd(n,r.targetId)}).catch(Ma)):(xd(n,r.targetId),await Td(n.localStore,r.targetId,!0))}async function y3(e,t,n){const r=I3(e);try{const i=await function(o,a){const l=fe(o),u=Ye.now(),c=a.reduce((d,v)=>d.add(v.key),me());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let v=Jn(),y=me();return l.ss.getEntries(d,c).next(w=>{v=w,v.forEach((p,m)=>{m.isValidDocument()||(y=y.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,v)).next(w=>{h=w;const p=[];for(const m of a){const g=j4(m,h.get(m.key).overlayedDocument);g!=null&&p.push(new Ei(m.key,g,XE(g.value.mapValue),Hn.exists(!0)))}return l.mutationQueue.addMutationBatch(d,u,p,a)}).next(w=>{f=w;const p=w.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(d,w.batchId,p)})}).then(()=>({batchId:f.batchId,changes:lS(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new be(Se)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,n),await za(r,i.changes),await Dc(r.remoteStore)}catch(i){const s=xm(i,"Failed to persist write");n.reject(s)}}async function HS(e,t){const n=fe(e);try{const r=await $M(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ce(o.Ra):i.removedDocuments.size>0&&(Ce(o.Ra),o.Ra=!1))}),await za(n,r,t)}catch(r){await Ma(r)}}function V0(e,t,n){const r=fe(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const f of h.listeners)f.Q_(a)&&(u=!0)}),u&&Im(l)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function v3(e,t,n){const r=fe(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let o=new be(re.comparator);o=o.insert(s,vt.newNoDocument(s,ce.min()));const a=me().add(s),l=new kc(ce.min(),new Map,new be(Se),o,a);await HS(r,l),r.pa=r.pa.remove(s),r.ya.delete(t),Am(r)}else await Td(r.localStore,t,!1).then(()=>xd(r,t,n)).catch(Ma)}async function _3(e,t){const n=fe(e),r=t.batch.batchId;try{const i=await MM(n.localStore,t);WS(n,r,null),qS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await za(n,i)}catch(i){await Ma(i)}}async function w3(e,t,n){const r=fe(e);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Ce(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,t);WS(r,t,n),qS(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await za(r,i)}catch(i){await Ma(i)}}function qS(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function WS(e,t,n){const r=fe(e);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function xd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||GS(e,r)})}function GS(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(VS(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Am(e))}function M0(e,t,n){for(const r of n)r instanceof US?(e.wa.addReference(r.key,t),E3(e,r)):r instanceof jS?(J("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||GS(e,r.key)):ae()}function E3(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(J("SyncEngine","New document in limbo: "+n),e.ga.add(r),Am(e))}function Am(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new re(Ne.fromString(t)),r=e.Da.next();e.ya.set(r,new f3(n)),e.pa=e.pa.insert(n,r),DS(e.remoteStore,new dr(Pn(dm(n.path)),r,"TargetPurposeLimboResolution",am._e))}}async function za(e,t,n){const r=fe(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,t,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=_m.Qi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(l,u){const c=fe(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(u,f=>z.forEach(f.ki,d=>c.persistence.referenceDelegate.addReference(h,f.targetId,d)).next(()=>z.forEach(f.qi,d=>c.persistence.referenceDelegate.removeReference(h,f.targetId,d)))))}catch(h){if(!$a(h))throw h;J("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const d=c.ts.get(f),v=d.snapshotVersion,y=d.withLastLimboFreeSnapshotVersion(v);c.ts=c.ts.insert(f,y)}}}(r.localStore,s))}async function S3(e,t){const n=fe(e);if(!n.currentUser.isEqual(t)){J("SyncEngine","User change. New user:",t.toKey());const r=await RS(n.localStore,t);n.currentUser=t,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new Z(F.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await za(n,r._s)}}function T3(e,t){const n=fe(e),r=n.ya.get(t);if(r&&r.Ra)return me().add(r.key);{let i=me();const s=n.fa.get(t);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function x3(e){const t=fe(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=HS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=T3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=v3.bind(null,t),t.Va.a_=l3.bind(null,t.eventManager),t.Va.Fa=u3.bind(null,t.eventManager),t}function I3(e){const t=fe(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=w3.bind(null,t),t}class $0{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Pc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return VM(this.persistence,new NM,t.initialUser,this.serializer)}createPersistence(t){return new RM(vm.jr,this.serializer)}createSharedClientState(t){return new zM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class A3{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>V0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=S3.bind(null,this.syncEngine),await s3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new a3}()}createDatastore(t){const n=Pc(t.databaseInfo.databaseId),r=function(s){return new HM(s)}(t.databaseInfo);return function(s,o,a,l){return new GM(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new QM(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>V0(this.syncEngine,n,0),function(){return P0.D()?new P0:new BM}())}createSyncEngine(t,n){return function(i,s,o,a,l,u,c){const h=new d3(i,s,o,a,l,u);return c&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=fe(n);J("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await ba(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Zn("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=KE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{J("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=xm(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Lh(e,t){e.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await RS(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function O0(e,t){e.asyncQueue.verifyOperationInProgress();const n=await k3(e);J("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>N0(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>N0(t.remoteStore,s)),e._onlineComponents=t}function R3(e){return e.name==="FirebaseError"?e.code===F.FAILED_PRECONDITION||e.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function k3(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!R3(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),await Lh(e,new $0)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Lh(e,new $0);return e._offlineComponents}async function QS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await O0(e,e._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await O0(e,new A3))),e._onlineComponents}function P3(e){return QS(e).then(t=>t.syncEngine)}async function YS(e){const t=await QS(e),n=t.eventManager;return n.onListen=p3.bind(null,t.syncEngine),n.onUnlisten=g3.bind(null,t.syncEngine),n}function N3(e,t,n={}){const r=new jn;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new KS({next:f=>{o.enqueueAndForget(()=>zS(s,h));const d=f.docs.has(a);!d&&f.fromCache?u.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&f.fromCache&&l&&l.source==="server"?u.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new BS(dm(a.path),c,{includeMetadataChanges:!0,J_:!0});return bS(s,h)}(await YS(e),e.asyncQueue,t,n,r)),r.promise}function D3(e,t,n={}){const r=new jn;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new KS({next:f=>{o.enqueueAndForget(()=>zS(s,h)),f.fromCache&&l.source==="server"?u.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new BS(a,c,{includeMetadataChanges:!0,J_:!0});return bS(s,h)}(await YS(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(e,t,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function V3(e,t,n,r){if(t===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function F0(e){if(!re.isDocumentKey(e))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function b0(e){if(re.isDocumentKey(e))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Vc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ae()}function yi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vc(e);throw new Z(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}V3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XS((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Mc{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z0(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new e4;switch(r.type){case"firstParty":return new i4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=L0.get(n);r&&(J("ComponentProvider","Removing Datastore"),L0.delete(n),r.terminate())}(this),Promise.resolve()}}function M3(e,t,n,r={}){var i;const s=(e=yi(e,Mc))._getSettings(),o=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=gt.MOCK_USER;else{a=MN(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new gt(u)}e._authCredentials=new t4(new GE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fs(this.firestore,t,this._query)}}class Ot{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ot(this.firestore,t,this._key)}}class Cr extends Fs{constructor(t,n,r){super(t,n,dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ot(this.firestore,null,new re(t))}withConverter(t){return new Cr(this.firestore,t,this._path)}}function El(e,t,...n){if(e=_s(e),ZS("collection","path",t),e instanceof Mc){const r=Ne.fromString(t,...n);return b0(r),new Cr(e,null,r)}{if(!(e instanceof Ot||e instanceof Cr))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ne.fromString(t,...n));return b0(r),new Cr(e.firestore,null,r)}}function Fh(e,t,...n){if(e=_s(e),arguments.length===1&&(t=KE.newId()),ZS("doc","path",t),e instanceof Mc){const r=Ne.fromString(t,...n);return F0(r),new Ot(e,null,new re(r))}{if(!(e instanceof Ot||e instanceof Cr))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ne.fromString(t,...n));return F0(r),new Ot(e.firestore,e instanceof Cr?e.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new PS(this,"async_queue_retry"),this.iu=()=>{const n=Oh();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=Oh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=Oh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new jn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!$a(t))throw t;J("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Zn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const i=Tm.createAndSchedule(this,t,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&ae()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}class $c extends Mc{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new $3}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||JS(this),this._firestoreClient.terminate()}}function O3(e,t){const n=typeof e=="object"?e:FD(),r=typeof e=="string"?e:t||"(default)",i=MD(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=DN("firestore");s&&M3(i,...s)}return i}function Cm(e){return e._firestoreClient||JS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function JS(e){var t,n,r;const i=e._freezeSettings(),s=function(a,l,u,c){return new g4(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,XS(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new C3(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cs(Tt.fromBase64String(t))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Cs(Tt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Se(this._lat,t._lat)||Se(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^__.*__$/;class F3{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ei(t,this.data,this.fieldMask,n,this.fieldTransforms):new La(t,this.data,n,this.fieldTransforms)}}function tT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Pm{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new Pm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Au(t),i}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Lu(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(tT(this.Iu)&&L3.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class b3{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Pc(t)}pu(t,n,r,i=!1){return new Pm({Iu:t,methodName:n,gu:r,path:ot.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nT(e){const t=e._freezeSettings(),n=Pc(e._databaseId);return new b3(e._databaseId,!!t.ignoreUndefinedProperties,n)}function z3(e,t,n,r,i,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);sT("Data must be an object, but it was:",o,r);const a=rT(r,o);let l,u;if(s.merge)l=new cn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const f=U3(t,h,n);if(!o.contains(f))throw new Z(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);H3(c,f)||c.push(f)}l=new cn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new F3(new Qt(a),l,u)}function B3(e,t,n,r=!1){return Nm(n,e.pu(r?4:3,t))}function Nm(e,t){if(iT(e=_s(e)))return sT("Unsupported field value:",t,e),rT(e,t);if(e instanceof eT)return function(r,i){if(!tT(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Nm(a,i.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=_s(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:$u(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$u(i.serializer,s)}}if(r instanceof km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cs)return{bytesValue:SS(i.serializer,r._byteString)};if(r instanceof Ot){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Vc(r)}`)}(e,t)}function rT(e,t){const n={};return QE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(r,i)=>{const s=Nm(i,t.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function iT(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ye||e instanceof km||e instanceof Cs||e instanceof Ot||e instanceof eT)}function sT(e,t,n){if(!iT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vc(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function U3(e,t,n){if((t=_s(t))instanceof Rm)return t._internalPath;if(typeof t=="string")return oT(e,t);throw Lu("Field path arguments must be of type string or ",e,!1,void 0,n)}const j3=new RegExp("[~\\*/\\[\\]]");function oT(e,t,n){if(t.search(j3)>=0)throw Lu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Rm(...t.split("."))._internalPath}catch{throw Lu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Lu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Z(F.INVALID_ARGUMENT,a+e+l)}function H3(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new q3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Dm("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q3 extends aT{data(){return super.data()}}function Dm(e,t){return typeof t=="string"?oT(e,t):t instanceof Rm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vm{}class G3 extends Vm{}function K3(e,t,...n){let r=[];t instanceof Vm&&r.push(t),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Mm).length,a=s.filter(l=>l instanceof Oc).length;if(o>1||o>0&&a>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Oc extends G3{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Oc(t,n,r)}_apply(t){const n=this._parse(t);return lT(t._query,n),new Fs(t.firestore,t.converter,yd(t._query,n))}_parse(t){const n=nT(t.firestore);return function(s,o,a,l,u,c,h){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){U0(h,c);const d=[];for(const v of h)d.push(B0(l,s,v));f={arrayValue:{values:d}}}else f=B0(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||U0(h,c),f=B3(a,o,h,c==="in"||c==="not-in");return We.create(u,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Q3(e,t,n){const r=t,i=Dm("where",e);return Oc._create(i,r,n)}class Mm extends Vm{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Mm(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)lT(o,l),o=yd(o,l)}(t._query,n),new Fs(t.firestore,t.converter,yd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function B0(e,t,n){if(typeof(n=_s(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iS(t)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ne.fromString(n));if(!re.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return h0(e,new re(r))}if(n instanceof Ot)return h0(e,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(n)}.`)}function U0(e,t){if(!Array.isArray(e)||e.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lT(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Y3{convertValue(t,n="none"){switch(gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return He(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(mi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw ae()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $s(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new km(He(t.latitude),He(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=um(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(da(t));default:return null}}convertTimestamp(t){const n=Nr(t);return new Ye(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ne.fromString(t);Ce(CS(r));const i=new pa(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||Zn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class uT extends aT{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Dm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bl extends uT{data(t={}){return super.data(t)}}class Z3{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Bl(this._firestore,this._userDataWriter,r.key,r,new yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Bl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Bl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:J3(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function J3(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(e){e=yi(e,Ot);const t=yi(e.firestore,$c);return N3(Cm(t),e._key).then(n=>r$(t,e,n))}class cT extends Y3{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cs(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function t$(e){e=yi(e,Fs);const t=yi(e.firestore,$c),n=Cm(t),r=new cT(t);return W3(e._query),D3(n,e._query).then(i=>new Z3(t,r,e,i))}function j0(e,t,n){e=yi(e,Ot);const r=yi(e.firestore,$c),i=X3(e.converter,t,n);return n$(r,[z3(nT(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Hn.none())])}function n$(e,t){return function(r,i){const s=new jn;return r.asyncQueue.enqueueAndForget(async()=>y3(await P3(r),i,s)),s.promise}(Cm(e),t)}function r$(e,t,n){const r=n.docs.get(t._key),i=new cT(e);return new uT(e,i,t._key,r,new yo(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){Ms=i})(LD),Tu(new na("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $c(new n4(r.getProvider("auth-internal")),new o4(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),is(a0,"4.4.0",t),is(a0,"4.4.0","esm2017")})();var i$="firebase",s$="10.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(i$,s$,"app");const o$={apiKey:"AIzaSyDQlGxr54XNpfu7p1h9BYSm-aM_NBzWRgU",authDomain:"magnetrade.firebaseapp.com",projectId:"magnetrade",storageBucket:"magnetrade.appspot.com",messagingSenderId:"829752852496",appId:"1:829752852496:web:52f12f631d7a4654070a95"},a$=B1(o$),io=O3(a$),l$=[],u$=[],c$=({id:e,data:t})=>H.jsxs("div",{className:"condition-node",children:[H.jsx(fi,{type:"target",position:ee.Top,id:`${e}_input`,style:{borderRadius:0}}),H.jsxs("div",{className:"condition-node-inner",children:[H.jsx("div",{className:"condition-node-label",children:t.label}),H.jsx("div",{className:"condition-node-summary",children:t.summary}),t.evaluatedResults&&H.jsxs("div",{className:"action-node-evaluatedResults",children:["Eval: ",t.evaluatedResults.lhs," ",t.evaluatedResults.op," ",t.evaluatedResults.rhs]})]}),H.jsx(fi,{type:"source",position:ee.Bottom,id:`${e}_output`,style:{borderRadius:0}})]}),h$=({id:e,data:t})=>H.jsxs("div",{className:"action-node",children:[H.jsx(fi,{type:"target",position:ee.Top,id:`${e}_input`,style:{borderRadius:0}}),H.jsxs("div",{className:"action-node-inner",children:[H.jsx("div",{className:"action-node-label",children:t.label}),H.jsx("div",{className:"action-node-summary",children:t.summary})]})]}),f$={condition:c$,action:h$};function d$(){const[e,t,n]=nN(l$),[r,i,s]=rN(u$),[o,a]=P.useState(!1),[l,u]=P.useState(null),[c,h]=P.useState([]),[f,d]=P.useState(null),v=P.useRef(e.length),[y,w]=P.useState("now"),[p,m]=P.useState(!1),[g,_]=P.useState(0),[T,I]=P.useState(0),[A,R]=P.useState([]),[$,O]=P.useState([]);P.useEffect(()=>{Re("nate",f)},[f]),P.useEffect(()=>{const L="nate";pe(),Ee(L)},[]);const B=P.useCallback(L=>i(ne=>Ww(L,ne)),[i]),q=(L,ne)=>{let oe=(v.current+=1).toString();for(;e.find(K=>K.id===oe);)oe=(v.current+=1).toString();const te={id:oe,type:L,position:{x:Math.random()*window.innerWidth*.5,y:Math.random()*window.innerHeight*.5},data:{label:ne}};t(K=>K.concat(te)),a(!1)},D=P.useCallback((L,ne)=>{L.preventDefault();const oe=L.clientX,te=L.clientY,ie=window.innerHeight-te;u({nodeId:ne.id,posX:oe,posY:te,maxHeight:ie})},[u]);function E(L,ne){const oe=new Map(L.map(W=>[W.id,W])),te=[],K=W=>W.data.label.startsWith("Condition"),ie=W=>W.data.label.startsWith("Action"),ye=W=>ne.filter(Ie=>Ie.source===W),le=(W,Ie)=>{const Me=oe.get(W);if(!Me)return;Ie.push(Me.data.summary);const ht=ye(W);ie(Me)&&ht.length===0||ht.forEach(tn=>{le(tn.target,Ie)})};return L.forEach(W=>{const Ie=ne.some(Me=>Me.target===W.id);if(K(W)&&!Ie||ie(W)&&!Ie){const Me=[];le(W.id,Me),te.push(Me)}}),te}P.useState("MovingAverage"),P.useState(null),P.useState({});const N=(L,ne,oe)=>{t(te=>te.map(K=>K.id===L?{...K,data:{...K.data,menus:{...K.data.menus,[ne]:oe},menuSelections:{...K.data.menuSelections,[ne]:{}}}}:K))},k=(L,ne,oe,te)=>{t(K=>K.map(ie=>{if(ie.id===L){const ye={...ie.data,menuSelections:{...ie.data.menuSelections,[te]:{...ie.data.menuSelections[te],[ne]:oe}}},le=U({...ie,data:ye});return{...ie,data:{...ye,summary:le}}}return ie}))};P.useEffect(()=>{console.log("nodes",e)},[e]);const x={"Condition Block":{"Operation 1":{"RSI (Relative Strength Index)":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Look-back Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]}]},"Bollinger Bands Middle":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Look-back Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]},{label:"Standard Deviations:",type:"input",inputType:"number"}]},"MACD Line":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Fast Period:",type:"input",inputType:"number"},{label:"Slow Period:",type:"input",inputType:"number"},{label:"Signal Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]}]},"Current Stock Price":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]}]},Number:{prompts:[{label:"Number:",type:"input",inputType:"number"}]},Volume:{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Look-back Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]}]}},condition:{operator:{prompts:[{label:"Operator",type:"select",options:[">","<","=="]}]}},"Operation 2":{"RSI (Relative Strength Index)":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Look-back Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]}]},"Bollinger Bands Middle":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Look-back Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]},{label:"Standard Deviations:",type:"input",inputType:"number"}]},"MACD Line":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Fast Period:",type:"input",inputType:"number"},{label:"Slow Period:",type:"input",inputType:"number"},{label:"Signal Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]}]},"Current Stock Price":{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]}]},Number:{prompts:[{label:"Number:",type:"input",inputType:"number"}]},Volume:{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Look-back Period:",type:"input",inputType:"number"},{label:"Aggregation:",type:"select",options:["Minutes","Hours","Days","Weeks","Months"]}]}}},"Action Block":{Actions:{Buy:{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Quantity:",type:"input",inputType:"number"},{label:"Execution:",type:"select",options:["once","loop","none"]}]},Sell:{prompts:[{label:"Asset:",type:"select",options:["AAPL","MSFT","GOOGL"]},{label:"Quantity:",type:"input",inputType:"number"},{label:"Execution:",type:"select",options:["once","loop","none"]}]}}}},S=L=>H.jsx(H.Fragment,{children:Object.keys(x[L.data.label]).map(ne=>{const oe=x[L.data.label][ne],te=L.data.menus&&L.data.menus[ne];return H.jsxs("div",{style:{padding:"5px"},children:[H.jsxs("select",{value:te||"",onChange:K=>N(L.id,ne,K.target.value),children:[H.jsxs("option",{value:"",children:["Select ",ne]}),Object.keys(oe).map(K=>H.jsx("option",{value:K,children:K},K))]}),te&&oe[te].prompts.map((K,ie)=>H.jsx("div",{style:{padding:"5px",color:"black"},children:C(K,ie,L.id,ne)},ie))]},ne)})}),C=(L,ne,oe,te)=>{var ie;const K=(ie=M==null?void 0:M.data.menuSelections[te])==null?void 0:ie[L.label];switch(L.type){case"select":return H.jsxs("div",{style:{padding:"5px",color:"black"},children:[H.jsxs("label",{children:[L.label,": "]}),H.jsxs("select",{onChange:le=>k(oe,L.label,le.target.value,te),value:K!==void 0?K:"",children:[H.jsxs("option",{value:"",children:["Select ",L.label]}),L.options.map(le=>H.jsx("option",{value:le,children:le},le))]})]},ne);case"input":return H.jsxs("div",{style:{padding:"5px",color:"black"},children:[H.jsxs("label",{children:[L.label,": "]}),H.jsx("input",{value:K!==void 0?K:"",type:L.inputType||"text",onChange:le=>k(oe,L.label,le.target.value,te)})]},ne);case"selectMultiple":const ye=Array.isArray(K)?K:[];return H.jsxs("div",{style:{padding:"5px",color:"black"},children:[H.jsxs("label",{children:[L.label,": "]}),H.jsx("select",{multiple:!0,value:ye,onChange:le=>k(oe,L.label,Array.from(le.target.selectedOptions,W=>W.value),te),children:L.options.map(le=>H.jsx("option",{value:le,children:le},le))})]},ne);default:return null}},M=l?e.find(L=>L.id===l.nodeId):null,U=L=>{var te,K;let ne=[];if(L.data.label==="Condition Block"){const ie=Object.keys(x["Condition Block"]);for(const ye of ie){const le=(te=L.data.menus)==null?void 0:te[ye];if(le){const Ie=x["Condition Block"][ye][le];if(Ie&&Ie.prompts){le!="operator"&&ne.push(le);const Me=Ie.prompts.map(ht=>{var vn,nn;const tn=(nn=(vn=L.data.menuSelections)==null?void 0:vn[ye])==null?void 0:nn[ht.label];return tn?`${tn}`:""}).filter(Boolean).join(" ");ne.push(`${Me}`)}}}}const oe=(ie,ye,le)=>ie.prompts.map(W=>{var Me,ht;return((ht=(Me=le.data.menuSelections)==null?void 0:Me[ye])==null?void 0:ht[W.label])||""}).filter(Boolean).join(" ");if(L.data.label==="Action Block"){const ie=Object.keys(x["Action Block"]);for(const ye of ie){const le=(K=L.data.menus)==null?void 0:K[ye];if(le){const W=x["Action Block"][ye][le];if(W&&W.prompts){const Ie=oe(W,ye,L);ne.push(`${le} ${Ie}`)}}}}return ne.length>0?ne.join(" "):"No operations defined"},Y=async L=>{console.log("Running strategy..."),!L.frequency||L.frequency=="now"?(await he(L.id,L.orderedWorkflow,!0),window.location.reload()):(L.runningStatus=!0,se(!0))},Q=async L=>{console.log("Stopping strategy..."),L.runningStatus=!1,se(!1)},se=async L=>{console.log("Saving strategy to Firestore...");const ne=E(e,r),oe=JSON.stringify(ne),te={uid:"nate",strategy:{nodes:e,edges:r},orderedWorkflow:oe,frequency:y,runningStatus:L};try{if(f){const K=Fh(El(io,"strategies"),f);await j0(K,te),console.log("Strategy updated successfully with ID: ",K.id),window.location.reload()}else{const K=Fh(El(io,"strategies"));await j0(K,te),console.log("Strategy saved successfully with ID: ",K.id),window.location.reload()}}catch(K){console.error("Error saving strategy: ",K)}},he=async(L,ne,oe)=>{const te="https://magnetrade.uc.r.appspot.com/commands",K={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commands:ne,strategyId:L,execute:oe})};try{const ye=await(await fetch(te,K)).json();console.log("API response: ",ye),t(le=>le.map(W=>{const Ie=ye[W.data.summary],Me=[">","<","=="];for(const ht of Me)W.data.summary.includes(ht)&&(Ie.op=ht);return Ie?{...W,data:{...W.data,evaluatedResults:Ie}}:W}))}catch(ie){console.error("Error fetching data: ",ie)}},pe=async()=>{const L="https://magnetrade.uc.r.appspot.com/balance",ne={method:"POST",headers:{"Content-Type":"application/json"}};try{const te=await(await fetch(L,ne)).json();_(te.cash),I(te.equity),R(te.open_orders),O(te.closed_orders),console.log("API response: ",te)}catch(oe){console.error("Error fetching data: ",oe)}},Ee=async L=>{El(io,"strategies");const ne=await t$(K3(El(io,"strategies"),Q3("uid","==",L))),oe=[];return ne.forEach(te=>{oe.push({id:te.id,...te.data()})}),console.log("Found strategies: ",oe),h(oe),oe},Re=async(L,ne)=>{const oe=Fh(io,"strategies",ne);try{const te=await e$(oe);if(te.exists()){const K=te.data();t(K.strategy.nodes),i(K.strategy.edges),d(te.id),w(K.frequency||"now"),console.log("Strategy loaded successfully!"),he(te.id,K.orderedWorkflow,!1)}else console.log("No such strategy!")}catch(te){console.error("Error loading strategy: ",te)}};return H.jsxs("div",{style:{display:"flex",width:"100vw",height:"100vh"},children:[H.jsxs("aside",{style:{width:"20%",background:"#F0F0F0",padding:"10px",boxShadow:"1px 0px 3px rgba(0,0,0,0.2)",maxHeight:"100vh",overflowY:"scroll"},children:[H.jsx("div",{className:"logo",style:{marginBottom:"20px",color:"black",textAlign:"center"},children:H.jsx("strong",{children:"Magnetrade"})}),H.jsx("hr",{}),H.jsxs("div",{className:"balance-info",style:{marginBottom:"20px",color:"black"},children:[H.jsx("strong",{children:"Cash Available:"}),H.jsxs("div",{children:["$",g]})]}),H.jsx("hr",{}),H.jsxs("div",{className:"balance-info",style:{marginBottom:"20px",color:"black"},children:[H.jsx("strong",{children:"Total Equity (with cash):"}),H.jsxs("div",{children:["$",T]})]}),H.jsx("hr",{}),H.jsxs("div",{style:{marginBottom:"20px",color:"black",fontSize:"small"},children:[H.jsx("strong",{children:"Open Orders:"}),H.jsx("div",{className:"open-orders",style:{marginBottom:"20px",maxHeight:"50px",overflowY:"scroll",color:"black",fontSize:"small"},children:H.jsx("div",{children:A.map(L=>H.jsx("div",{children:L},L+Math.random()*999+1))})})]}),H.jsx("hr",{}),H.jsxs("div",{style:{marginBottom:"20px",color:"black",fontSize:"small"},children:[H.jsx("strong",{children:"Closed Orders:"}),H.jsx("div",{className:"closed-orders",style:{marginBottom:"20px",maxHeight:"50px",overflowY:"scroll",color:"black",fontSize:"small"},children:H.jsx("div",{children:$.map(L=>H.jsx("div",{children:L},L+Math.random()*999+1))})})]}),H.jsx("div",{className:"strategies",children:c.map(L=>H.jsxs("div",{style:{marginBottom:"10px"},children:[H.jsxs("button",{onClick:()=>d(L.id),style:{width:"100%",padding:"5px 10px",margin:"5px 0",background:"black",color:"white",border:"none"},children:["Strat: ",L.id]}),L.runningStatus?H.jsxs("button",{onClick:()=>Q(L),style:{width:"100%",padding:"5px 10px",margin:"5px 0",background:"#ff3333",color:"white",border:"none",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f!==L.id,children:[H.jsx(SN,{style:{marginRight:"5px"}}),"Stop"]}):H.jsxs("button",{onClick:()=>Y(L),style:{width:"100%",padding:"5px 10px",margin:"5px 0",background:"#33cc33",color:"white",border:"none",display:"flex",alignItems:"center",justifyContent:"center"},disabled:f!==L.id,children:[H.jsx(wN,{style:{marginRight:"5px"}}),"Play"]})]},L.id))}),H.jsx("button",{onClick:()=>window.location.reload(),style:{width:"100%",padding:"5px 10px",margin:"20px 0",background:"#3385ff",color:"white",border:"none"},children:"Create new Strategy"})]}),H.jsx("div",{className:"reactflow-wrapper",style:{flex:1},children:H.jsxs(C1,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:s,onConnect:B,onMoveEnd:L=>console.log("Position and zoom updated",L),onNodeContextMenu:D,nodeTypes:f$,children:[H.jsx(cN,{}),H.jsx(gN,{variant:"dots",gap:12,size:1})]})}),H.jsxs("div",{style:{position:"relative"},children:[H.jsx("button",{onClick:()=>a(!o),style:{position:"absolute",right:80,top:20,zIndex:100,background:"linear-gradient(45deg, purple, red)",color:"white",border:"none",borderRadius:"50%",width:56,height:56,cursor:"pointer"},children:"+"}),H.jsx("button",{onClick:()=>m(!p),style:{position:"absolute",right:140,top:20,zIndex:100,borderRadius:"50%",width:56,height:56,cursor:"pointer",textAlign:"center",border:"1px solid #3385ff"},children:H.jsx(_N,{style:{marginTop:"3px"}})}),H.jsx("button",{onClick:()=>se(!1),style:{position:"absolute",right:20,top:20,zIndex:100,background:"linear-gradient(45deg, green, lightgreen)",color:"white",border:"none",borderRadius:"50%",width:56,height:56,cursor:"pointer"},children:H.jsx(EN,{})}),o&&H.jsx("div",{style:{position:"absolute",right:20,top:80,zIndex:100,background:"white",boxShadow:"0 2px 10px rgba(0,0,0,.2)",borderRadius:4,padding:5},children:H.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[H.jsx("li",{style:{padding:"5px"},children:H.jsx("button",{onClick:()=>q("condition","Condition Block"),style:{padding:"10px 20px",cursor:"pointer",display:"block",width:"100%"},children:"Condition Block"})}),H.jsx("li",{style:{padding:"5px"},children:H.jsx("button",{onClick:()=>q("action","Action Block"),style:{padding:"10px 20px",cursor:"pointer",display:"block",width:"100%"},children:"Action Block"})})]})})]}),M&&H.jsxs("div",{style:{position:"fixed",left:l.posX,top:l.posY,zIndex:10,background:"white",boxShadow:"0 2px 10px rgba(0,0,0,.2)",borderRadius:4,padding:"5px",maxHeight:`${l.maxHeight-20}px`,overflow:"auto"},onContextMenu:L=>L.preventDefault(),children:[H.jsx("div",{style:{marginBottom:"5px",color:"black"},children:H.jsx("strong",{children:M.data.label})}),S(M),H.jsx("div",{style:{padding:"5px",marginTop:"10px"},children:H.jsx("button",{onClick:()=>u(null),style:{background:"#3385ff",color:"white",border:"none",padding:"5px 10px",cursor:"pointer"},children:"Close"})})]}),p&&H.jsx("div",{style:{position:"absolute",right:140,top:80,zIndex:100},children:H.jsxs("select",{value:y,onChange:L=>w(L.target.value),style:{display:"block",width:"100%",padding:"10px",margin:"5px 0"},children:[H.jsx("option",{value:"now",children:"Now"}),H.jsx("option",{value:"1min",children:"Every 1 Minute"}),H.jsx("option",{value:"1hour",children:"Every Hour"}),H.jsx("option",{value:"1day",children:"Every Day"})]})})]})}bh.createRoot(document.getElementById("root")).render(H.jsx(V.StrictMode,{children:H.jsx(d$,{})}));
